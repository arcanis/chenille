{
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/cli.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/cli.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/cli.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/cli.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "cli.ts"
      }
    },
    "ast": null,
    "code": "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport { npath } from '@yarnpkg/fslib';\nimport { Cli } from 'clipanion';\nconst cli = new Cli({\n  binaryName: `yarn chenille`\n});\ncli.register(require(`./commands/DispatchComment`));\ncli.register(require(`./commands/SyncAgainstMaster`));\ncli.register(require(`./commands/SyncAgainstQueue`));\ncli.register(require(`./commands/Cancel`));\ncli.register(require(`./commands/Queue`));\nexport default cli;\n\nif (process.mainModule === module) {\n  cli.runExit(process.argv.slice(2), {\n    cwd: npath.toPortablePath(process.cwd()),\n    stdin: process.stdin,\n    stdout: process.stdout,\n    stderr: process.stderr\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaS50cyJdLCJuYW1lcyI6WyJucGF0aCIsIkNsaSIsImNsaSIsImJpbmFyeU5hbWUiLCJyZWdpc3RlciIsInJlcXVpcmUiLCJwcm9jZXNzIiwibWFpbk1vZHVsZSIsIm1vZHVsZSIsInJ1bkV4aXQiLCJhcmd2Iiwic2xpY2UiLCJjd2QiLCJ0b1BvcnRhYmxlUGF0aCIsInN0ZGluIiwic3Rkb3V0Iiwic3RkZXJyIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBTUEsU0FBc0JBLEtBQXRCLFFBQWtDLGdCQUFsQztBQUNBLFNBQXFCQyxHQUFyQixRQUErQixXQUEvQjtBQU1BLE1BQU1DLEdBQUcsR0FBRyxJQUFJRCxHQUFKLENBQWlCO0FBQUNFLEVBQUFBLFVBQVUsRUFBRztBQUFkLENBQWpCLENBQVo7QUFFQUQsR0FBRyxDQUFDRSxRQUFKLENBQWFDLE9BQU8sQ0FBRSw0QkFBRixDQUFwQjtBQUVBSCxHQUFHLENBQUNFLFFBQUosQ0FBYUMsT0FBTyxDQUFFLDhCQUFGLENBQXBCO0FBQ0FILEdBQUcsQ0FBQ0UsUUFBSixDQUFhQyxPQUFPLENBQUUsNkJBQUYsQ0FBcEI7QUFFQUgsR0FBRyxDQUFDRSxRQUFKLENBQWFDLE9BQU8sQ0FBRSxtQkFBRixDQUFwQjtBQUNBSCxHQUFHLENBQUNFLFFBQUosQ0FBYUMsT0FBTyxDQUFFLGtCQUFGLENBQXBCO0FBRUEsZUFBZUgsR0FBZjs7QUFFQSxJQUFJSSxPQUFPLENBQUNDLFVBQVIsS0FBdUJDLE1BQTNCLEVBQW1DO0FBQ2pDTixFQUFBQSxHQUFHLENBQUNPLE9BQUosQ0FBWUgsT0FBTyxDQUFDSSxJQUFSLENBQWFDLEtBQWIsQ0FBbUIsQ0FBbkIsQ0FBWixFQUFtQztBQUNqQ0MsSUFBQUEsR0FBRyxFQUFFWixLQUFLLENBQUNhLGNBQU4sQ0FBcUJQLE9BQU8sQ0FBQ00sR0FBUixFQUFyQixDQUQ0QjtBQUVqQ0UsSUFBQUEsS0FBSyxFQUFFUixPQUFPLENBQUNRLEtBRmtCO0FBR2pDQyxJQUFBQSxNQUFNLEVBQUVULE9BQU8sQ0FBQ1MsTUFIaUI7QUFJakNDLElBQUFBLE1BQU0sRUFBRVYsT0FBTyxDQUFDVTtBQUppQixHQUFuQztBQU1EIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5pbXBvcnQge1BvcnRhYmxlUGF0aCwgbnBhdGh9IGZyb20gJ0B5YXJucGtnL2ZzbGliJztcbmltcG9ydCB7QmFzZUNvbnRleHQsIENsaX0gZnJvbSAnY2xpcGFuaW9uJztcblxuZXhwb3J0IHR5cGUgQ29udGV4dCA9IEJhc2VDb250ZXh0ICYge1xuICBjd2Q6IFBvcnRhYmxlUGF0aCxcbn07XG5cbmNvbnN0IGNsaSA9IG5ldyBDbGk8Q29udGV4dD4oe2JpbmFyeU5hbWU6IGB5YXJuIGNoZW5pbGxlYH0pO1xuXG5jbGkucmVnaXN0ZXIocmVxdWlyZShgLi9jb21tYW5kcy9EaXNwYXRjaENvbW1lbnRgKSk7XG5cbmNsaS5yZWdpc3RlcihyZXF1aXJlKGAuL2NvbW1hbmRzL1N5bmNBZ2FpbnN0TWFzdGVyYCkpO1xuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvU3luY0FnYWluc3RRdWV1ZWApKTtcblxuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvQ2FuY2VsYCkpO1xuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvUXVldWVgKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsaTtcblxuaWYgKHByb2Nlc3MubWFpbk1vZHVsZSA9PT0gbW9kdWxlKSB7XG4gIGNsaS5ydW5FeGl0KHByb2Nlc3MuYXJndi5zbGljZSgyKSwge1xuICAgIGN3ZDogbnBhdGgudG9Qb3J0YWJsZVBhdGgocHJvY2Vzcy5jd2QoKSksXG4gICAgc3RkaW46IHByb2Nlc3Muc3RkaW4sXG4gICAgc3Rkb3V0OiBwcm9jZXNzLnN0ZG91dCxcbiAgICBzdGRlcnI6IHByb2Nlc3Muc3RkZXJyLFxuICB9KTtcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "cli.ts"
      ],
      "names": [
        "npath",
        "Cli",
        "cli",
        "binaryName",
        "register",
        "require",
        "process",
        "mainModule",
        "module",
        "runExit",
        "argv",
        "slice",
        "cwd",
        "toPortablePath",
        "stdin",
        "stdout",
        "stderr"
      ],
      "mappings": "AAAA;;;;;;AAMA,SAAsBA,KAAtB,QAAkC,gBAAlC;AACA,SAAqBC,GAArB,QAA+B,WAA/B;AAMA,MAAMC,GAAG,GAAG,IAAID,GAAJ,CAAiB;AAACE,EAAAA,UAAU,EAAG;AAAd,CAAjB,CAAZ;AAEAD,GAAG,CAACE,QAAJ,CAAaC,OAAO,CAAE,4BAAF,CAApB;AAEAH,GAAG,CAACE,QAAJ,CAAaC,OAAO,CAAE,8BAAF,CAApB;AACAH,GAAG,CAACE,QAAJ,CAAaC,OAAO,CAAE,6BAAF,CAApB;AAEAH,GAAG,CAACE,QAAJ,CAAaC,OAAO,CAAE,mBAAF,CAApB;AACAH,GAAG,CAACE,QAAJ,CAAaC,OAAO,CAAE,kBAAF,CAApB;AAEA,eAAeH,GAAf;;AAEA,IAAII,OAAO,CAACC,UAAR,KAAuBC,MAA3B,EAAmC;AACjCN,EAAAA,GAAG,CAACO,OAAJ,CAAYH,OAAO,CAACI,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAZ,EAAmC;AACjCC,IAAAA,GAAG,EAAEZ,KAAK,CAACa,cAAN,CAAqBP,OAAO,CAACM,GAAR,EAArB,CAD4B;AAEjCE,IAAAA,KAAK,EAAER,OAAO,CAACQ,KAFkB;AAGjCC,IAAAA,MAAM,EAAET,OAAO,CAACS,MAHiB;AAIjCC,IAAAA,MAAM,EAAEV,OAAO,CAACU;AAJiB,GAAnC;AAMD",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport {PortablePath, npath} from '@yarnpkg/fslib';\nimport {BaseContext, Cli} from 'clipanion';\n\nexport type Context = BaseContext & {\n  cwd: PortablePath,\n};\n\nconst cli = new Cli<Context>({binaryName: `yarn chenille`});\n\ncli.register(require(`./commands/DispatchComment`));\n\ncli.register(require(`./commands/SyncAgainstMaster`));\ncli.register(require(`./commands/SyncAgainstQueue`));\n\ncli.register(require(`./commands/Cancel`));\ncli.register(require(`./commands/Queue`));\n\nexport default cli;\n\nif (process.mainModule === module) {\n  cli.runExit(process.argv.slice(2), {\n    cwd: npath.toPortablePath(process.cwd()),\n    stdin: process.stdin,\n    stdout: process.stdout,\n    stderr: process.stderr,\n  });\n}\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1578934815888
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/cli.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/cli.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/cli.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/cli.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "cli.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _fslib = require(\"@yarnpkg/fslib\");\n\nvar _clipanion = require(\"clipanion\");\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst cli = new _clipanion.Cli({\n  binaryName: `yarn chenille`\n});\ncli.register(require(`./commands/DispatchComment`));\ncli.register(require(`./commands/SyncAgainstMaster`));\ncli.register(require(`./commands/SyncAgainstQueue`));\ncli.register(require(`./commands/Cancel`));\ncli.register(require(`./commands/Queue`));\nvar _default = cli;\nexports.default = _default;\n\nif (process.mainModule === module) {\n  cli.runExit(process.argv.slice(2), {\n    cwd: _fslib.npath.toPortablePath(process.cwd()),\n    stdin: process.stdin,\n    stdout: process.stdout,\n    stderr: process.stderr\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaS50cyJdLCJuYW1lcyI6WyJjbGkiLCJDbGkiLCJiaW5hcnlOYW1lIiwicmVnaXN0ZXIiLCJyZXF1aXJlIiwicHJvY2VzcyIsIm1haW5Nb2R1bGUiLCJtb2R1bGUiLCJydW5FeGl0IiwiYXJndiIsInNsaWNlIiwiY3dkIiwibnBhdGgiLCJ0b1BvcnRhYmxlUGF0aCIsInN0ZGluIiwic3Rkb3V0Iiwic3RkZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTUE7O0FBQ0E7O0FBUEE7Ozs7OztBQWFBLE1BQU1BLEdBQUcsR0FBRyxJQUFJQyxjQUFKLENBQWlCO0FBQUNDLEVBQUFBLFVBQVUsRUFBRztBQUFkLENBQWpCLENBQVo7QUFFQUYsR0FBRyxDQUFDRyxRQUFKLENBQWFDLE9BQU8sQ0FBRSw0QkFBRixDQUFwQjtBQUVBSixHQUFHLENBQUNHLFFBQUosQ0FBYUMsT0FBTyxDQUFFLDhCQUFGLENBQXBCO0FBQ0FKLEdBQUcsQ0FBQ0csUUFBSixDQUFhQyxPQUFPLENBQUUsNkJBQUYsQ0FBcEI7QUFFQUosR0FBRyxDQUFDRyxRQUFKLENBQWFDLE9BQU8sQ0FBRSxtQkFBRixDQUFwQjtBQUNBSixHQUFHLENBQUNHLFFBQUosQ0FBYUMsT0FBTyxDQUFFLGtCQUFGLENBQXBCO2VBRWVKLEc7OztBQUVmLElBQUlLLE9BQU8sQ0FBQ0MsVUFBUixLQUF1QkMsTUFBM0IsRUFBbUM7QUFDakNQLEVBQUFBLEdBQUcsQ0FBQ1EsT0FBSixDQUFZSCxPQUFPLENBQUNJLElBQVIsQ0FBYUMsS0FBYixDQUFtQixDQUFuQixDQUFaLEVBQW1DO0FBQ2pDQyxJQUFBQSxHQUFHLEVBQUVDLGFBQU1DLGNBQU4sQ0FBcUJSLE9BQU8sQ0FBQ00sR0FBUixFQUFyQixDQUQ0QjtBQUVqQ0csSUFBQUEsS0FBSyxFQUFFVCxPQUFPLENBQUNTLEtBRmtCO0FBR2pDQyxJQUFBQSxNQUFNLEVBQUVWLE9BQU8sQ0FBQ1UsTUFIaUI7QUFJakNDLElBQUFBLE1BQU0sRUFBRVgsT0FBTyxDQUFDVztBQUppQixHQUFuQztBQU1EIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5pbXBvcnQge1BvcnRhYmxlUGF0aCwgbnBhdGh9IGZyb20gJ0B5YXJucGtnL2ZzbGliJztcbmltcG9ydCB7QmFzZUNvbnRleHQsIENsaX0gZnJvbSAnY2xpcGFuaW9uJztcblxuZXhwb3J0IHR5cGUgQ29udGV4dCA9IEJhc2VDb250ZXh0ICYge1xuICBjd2Q6IFBvcnRhYmxlUGF0aCxcbn07XG5cbmNvbnN0IGNsaSA9IG5ldyBDbGk8Q29udGV4dD4oe2JpbmFyeU5hbWU6IGB5YXJuIGNoZW5pbGxlYH0pO1xuXG5jbGkucmVnaXN0ZXIocmVxdWlyZShgLi9jb21tYW5kcy9EaXNwYXRjaENvbW1lbnRgKSk7XG5cbmNsaS5yZWdpc3RlcihyZXF1aXJlKGAuL2NvbW1hbmRzL1N5bmNBZ2FpbnN0TWFzdGVyYCkpO1xuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvU3luY0FnYWluc3RRdWV1ZWApKTtcblxuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvQ2FuY2VsYCkpO1xuY2xpLnJlZ2lzdGVyKHJlcXVpcmUoYC4vY29tbWFuZHMvUXVldWVgKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsaTtcblxuaWYgKHByb2Nlc3MubWFpbk1vZHVsZSA9PT0gbW9kdWxlKSB7XG4gIGNsaS5ydW5FeGl0KHByb2Nlc3MuYXJndi5zbGljZSgyKSwge1xuICAgIGN3ZDogbnBhdGgudG9Qb3J0YWJsZVBhdGgocHJvY2Vzcy5jd2QoKSksXG4gICAgc3RkaW46IHByb2Nlc3Muc3RkaW4sXG4gICAgc3Rkb3V0OiBwcm9jZXNzLnN0ZG91dCxcbiAgICBzdGRlcnI6IHByb2Nlc3Muc3RkZXJyLFxuICB9KTtcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "cli.ts"
      ],
      "names": [
        "cli",
        "Cli",
        "binaryName",
        "register",
        "require",
        "process",
        "mainModule",
        "module",
        "runExit",
        "argv",
        "slice",
        "cwd",
        "npath",
        "toPortablePath",
        "stdin",
        "stdout",
        "stderr"
      ],
      "mappings": ";;;;;;;AAMA;;AACA;;AAPA;;;;;;AAaA,MAAMA,GAAG,GAAG,IAAIC,cAAJ,CAAiB;AAACC,EAAAA,UAAU,EAAG;AAAd,CAAjB,CAAZ;AAEAF,GAAG,CAACG,QAAJ,CAAaC,OAAO,CAAE,4BAAF,CAApB;AAEAJ,GAAG,CAACG,QAAJ,CAAaC,OAAO,CAAE,8BAAF,CAApB;AACAJ,GAAG,CAACG,QAAJ,CAAaC,OAAO,CAAE,6BAAF,CAApB;AAEAJ,GAAG,CAACG,QAAJ,CAAaC,OAAO,CAAE,mBAAF,CAApB;AACAJ,GAAG,CAACG,QAAJ,CAAaC,OAAO,CAAE,kBAAF,CAApB;eAEeJ,G;;;AAEf,IAAIK,OAAO,CAACC,UAAR,KAAuBC,MAA3B,EAAmC;AACjCP,EAAAA,GAAG,CAACQ,OAAJ,CAAYH,OAAO,CAACI,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAZ,EAAmC;AACjCC,IAAAA,GAAG,EAAEC,aAAMC,cAAN,CAAqBR,OAAO,CAACM,GAAR,EAArB,CAD4B;AAEjCG,IAAAA,KAAK,EAAET,OAAO,CAACS,KAFkB;AAGjCC,IAAAA,MAAM,EAAEV,OAAO,CAACU,MAHiB;AAIjCC,IAAAA,MAAM,EAAEX,OAAO,CAACW;AAJiB,GAAnC;AAMD",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport {PortablePath, npath} from '@yarnpkg/fslib';\nimport {BaseContext, Cli} from 'clipanion';\n\nexport type Context = BaseContext & {\n  cwd: PortablePath,\n};\n\nconst cli = new Cli<Context>({binaryName: `yarn chenille`});\n\ncli.register(require(`./commands/DispatchComment`));\n\ncli.register(require(`./commands/SyncAgainstMaster`));\ncli.register(require(`./commands/SyncAgainstQueue`));\n\ncli.register(require(`./commands/Cancel`));\ncli.register(require(`./commands/Queue`));\n\nexport default cli;\n\nif (process.mainModule === module) {\n  cli.runExit(process.argv.slice(2), {\n    cwd: npath.toPortablePath(process.cwd()),\n    stdin: process.stdin,\n    stdout: process.stdout,\n    stderr: process.stderr,\n  });\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934815888
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/commands\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/commands/DispatchComment.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/commands/DispatchComment.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/commands/DispatchComment.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/commands/DispatchComment.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
        "sourceFileName": "DispatchComment.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  Command\n} = require(`clipanion`);\n\nconst yup = require(`yup`);\n\nconst {\n  bailoutWorkflow\n} = require(`../bailoutWorkflow`);\n\nclass DispatchComment extends Command {\n  async execute() {\n    const command = this.body.match(/^\\/chenille(\\s|$)/m);\n    if (command === null) return bailoutWorkflow(this.context.stdout, `No command found`);\n    return await this.cli.run([`queue`, this.pr, `--title=${this.title}`]);\n  }\n\n}\n\nDispatchComment.schema = yup.object().shape({\n  title: yup.string().required(),\n  body: yup.string().required(),\n  pr: yup.number().required()\n});\nDispatchComment.addPath(`dispatch`, `comment`, `to`);\nDispatchComment.addOption(`title`, Command.String(`--title`));\nDispatchComment.addOption(`body`, Command.String(`--body`));\nDispatchComment.addOption(`pr`, Command.String());\nmodule.exports = DispatchComment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRpc3BhdGNoQ29tbWVudC5qcyJdLCJuYW1lcyI6WyJDb21tYW5kIiwicmVxdWlyZSIsInl1cCIsImJhaWxvdXRXb3JrZmxvdyIsIkRpc3BhdGNoQ29tbWVudCIsImV4ZWN1dGUiLCJjb21tYW5kIiwiYm9keSIsIm1hdGNoIiwiY29udGV4dCIsInN0ZG91dCIsImNsaSIsInJ1biIsInByIiwidGl0bGUiLCJzY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsInN0cmluZyIsInJlcXVpcmVkIiwibnVtYmVyIiwiYWRkUGF0aCIsImFkZE9wdGlvbiIsIlN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQU1BLE1BQU07QUFBQ0EsRUFBQUE7QUFBRCxJQUFZQyxPQUFPLENBQUUsV0FBRixDQUF6Qjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBRSxLQUFGLENBQW5COztBQUVBLE1BQU07QUFBQ0UsRUFBQUE7QUFBRCxJQUFvQkYsT0FBTyxDQUFFLG9CQUFGLENBQWpDOztBQUVBLE1BQU1HLGVBQU4sU0FBOEJKLE9BQTlCLENBQXNDO0FBQ3BDLFFBQU1LLE9BQU4sR0FBZ0I7QUFDZCxVQUFNQyxPQUFPLEdBQUcsS0FBS0MsSUFBTCxDQUFVQyxLQUFWLENBQWdCLG9CQUFoQixDQUFoQjtBQUNBLFFBQUlGLE9BQU8sS0FBSyxJQUFoQixFQUNFLE9BQU9ILGVBQWUsQ0FBQyxLQUFLTSxPQUFMLENBQWFDLE1BQWQsRUFBdUIsa0JBQXZCLENBQXRCO0FBRUYsV0FBTyxNQUFNLEtBQUtDLEdBQUwsQ0FBU0MsR0FBVCxDQUFhLENBQUUsT0FBRixFQUFVLEtBQUtDLEVBQWYsRUFBb0IsV0FBVSxLQUFLQyxLQUFNLEVBQXpDLENBQWIsQ0FBYjtBQUNEOztBQVBtQzs7QUFVdENWLGVBQWUsQ0FBQ1csTUFBaEIsR0FBeUJiLEdBQUcsQ0FBQ2MsTUFBSixHQUFhQyxLQUFiLENBQW1CO0FBQzFDSCxFQUFBQSxLQUFLLEVBQUVaLEdBQUcsQ0FBQ2dCLE1BQUosR0FBYUMsUUFBYixFQURtQztBQUUxQ1osRUFBQUEsSUFBSSxFQUFFTCxHQUFHLENBQUNnQixNQUFKLEdBQWFDLFFBQWIsRUFGb0M7QUFHMUNOLEVBQUFBLEVBQUUsRUFBRVgsR0FBRyxDQUFDa0IsTUFBSixHQUFhRCxRQUFiO0FBSHNDLENBQW5CLENBQXpCO0FBTUFmLGVBQWUsQ0FBQ2lCLE9BQWhCLENBQXlCLFVBQXpCLEVBQXFDLFNBQXJDLEVBQWdELElBQWhEO0FBRUFqQixlQUFlLENBQUNrQixTQUFoQixDQUEyQixPQUEzQixFQUFtQ3RCLE9BQU8sQ0FBQ3VCLE1BQVIsQ0FBZ0IsU0FBaEIsQ0FBbkM7QUFDQW5CLGVBQWUsQ0FBQ2tCLFNBQWhCLENBQTJCLE1BQTNCLEVBQWtDdEIsT0FBTyxDQUFDdUIsTUFBUixDQUFnQixRQUFoQixDQUFsQztBQUNBbkIsZUFBZSxDQUFDa0IsU0FBaEIsQ0FBMkIsSUFBM0IsRUFBZ0N0QixPQUFPLENBQUN1QixNQUFSLEVBQWhDO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnJCLGVBQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMvY29tbWFuZHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5jb25zdCB7Q29tbWFuZH0gPSByZXF1aXJlKGBjbGlwYW5pb25gKTtcbmNvbnN0IHl1cCA9IHJlcXVpcmUoYHl1cGApO1xuXG5jb25zdCB7YmFpbG91dFdvcmtmbG93fSA9IHJlcXVpcmUoYC4uL2JhaWxvdXRXb3JrZmxvd2ApO1xuXG5jbGFzcyBEaXNwYXRjaENvbW1lbnQgZXh0ZW5kcyBDb21tYW5kIHtcbiAgYXN5bmMgZXhlY3V0ZSgpIHtcbiAgICBjb25zdCBjb21tYW5kID0gdGhpcy5ib2R5Lm1hdGNoKC9eXFwvY2hlbmlsbGUoXFxzfCQpL20pO1xuICAgIGlmIChjb21tYW5kID09PSBudWxsKVxuICAgICAgcmV0dXJuIGJhaWxvdXRXb3JrZmxvdyh0aGlzLmNvbnRleHQuc3Rkb3V0LCBgTm8gY29tbWFuZCBmb3VuZGApO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xpLnJ1bihbYHF1ZXVlYCwgdGhpcy5wciwgYC0tdGl0bGU9JHt0aGlzLnRpdGxlfWBdKTtcbiAgfVxufVxuXG5EaXNwYXRjaENvbW1lbnQuc2NoZW1hID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgdGl0bGU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBib2R5OiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgcHI6IHl1cC5udW1iZXIoKS5yZXF1aXJlZCgpLFxufSk7XG5cbkRpc3BhdGNoQ29tbWVudC5hZGRQYXRoKGBkaXNwYXRjaGAsIGBjb21tZW50YCwgYHRvYCk7XG5cbkRpc3BhdGNoQ29tbWVudC5hZGRPcHRpb24oYHRpdGxlYCwgQ29tbWFuZC5TdHJpbmcoYC0tdGl0bGVgKSk7XG5EaXNwYXRjaENvbW1lbnQuYWRkT3B0aW9uKGBib2R5YCwgQ29tbWFuZC5TdHJpbmcoYC0tYm9keWApKTtcbkRpc3BhdGNoQ29tbWVudC5hZGRPcHRpb24oYHByYCwgQ29tbWFuZC5TdHJpbmcoKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGF0Y2hDb21tZW50O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "DispatchComment.js"
      ],
      "names": [
        "Command",
        "require",
        "yup",
        "bailoutWorkflow",
        "DispatchComment",
        "execute",
        "command",
        "body",
        "match",
        "context",
        "stdout",
        "cli",
        "run",
        "pr",
        "title",
        "schema",
        "object",
        "shape",
        "string",
        "required",
        "number",
        "addPath",
        "addOption",
        "String",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAAYC,OAAO,CAAE,WAAF,CAAzB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAE,KAAF,CAAnB;;AAEA,MAAM;AAACE,EAAAA;AAAD,IAAoBF,OAAO,CAAE,oBAAF,CAAjC;;AAEA,MAAMG,eAAN,SAA8BJ,OAA9B,CAAsC;AACpC,QAAMK,OAAN,GAAgB;AACd,UAAMC,OAAO,GAAG,KAAKC,IAAL,CAAUC,KAAV,CAAgB,oBAAhB,CAAhB;AACA,QAAIF,OAAO,KAAK,IAAhB,EACE,OAAOH,eAAe,CAAC,KAAKM,OAAL,CAAaC,MAAd,EAAuB,kBAAvB,CAAtB;AAEF,WAAO,MAAM,KAAKC,GAAL,CAASC,GAAT,CAAa,CAAE,OAAF,EAAU,KAAKC,EAAf,EAAoB,WAAU,KAAKC,KAAM,EAAzC,CAAb,CAAb;AACD;;AAPmC;;AAUtCV,eAAe,CAACW,MAAhB,GAAyBb,GAAG,CAACc,MAAJ,GAAaC,KAAb,CAAmB;AAC1CH,EAAAA,KAAK,EAAEZ,GAAG,CAACgB,MAAJ,GAAaC,QAAb,EADmC;AAE1CZ,EAAAA,IAAI,EAAEL,GAAG,CAACgB,MAAJ,GAAaC,QAAb,EAFoC;AAG1CN,EAAAA,EAAE,EAAEX,GAAG,CAACkB,MAAJ,GAAaD,QAAb;AAHsC,CAAnB,CAAzB;AAMAf,eAAe,CAACiB,OAAhB,CAAyB,UAAzB,EAAqC,SAArC,EAAgD,IAAhD;AAEAjB,eAAe,CAACkB,SAAhB,CAA2B,OAA3B,EAAmCtB,OAAO,CAACuB,MAAR,CAAgB,SAAhB,CAAnC;AACAnB,eAAe,CAACkB,SAAhB,CAA2B,MAA3B,EAAkCtB,OAAO,CAACuB,MAAR,CAAgB,QAAhB,CAAlC;AACAnB,eAAe,CAACkB,SAAhB,CAA2B,IAA3B,EAAgCtB,OAAO,CAACuB,MAAR,EAAhC;AAEAC,MAAM,CAACC,OAAP,GAAiBrB,eAAjB",
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {Command} = require(`clipanion`);\nconst yup = require(`yup`);\n\nconst {bailoutWorkflow} = require(`../bailoutWorkflow`);\n\nclass DispatchComment extends Command {\n  async execute() {\n    const command = this.body.match(/^\\/chenille(\\s|$)/m);\n    if (command === null)\n      return bailoutWorkflow(this.context.stdout, `No command found`);\n\n    return await this.cli.run([`queue`, this.pr, `--title=${this.title}`]);\n  }\n}\n\nDispatchComment.schema = yup.object().shape({\n  title: yup.string().required(),\n  body: yup.string().required(),\n  pr: yup.number().required(),\n});\n\nDispatchComment.addPath(`dispatch`, `comment`, `to`);\n\nDispatchComment.addOption(`title`, Command.String(`--title`));\nDispatchComment.addOption(`body`, Command.String(`--body`));\nDispatchComment.addOption(`pr`, Command.String());\n\nmodule.exports = DispatchComment;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567898
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/bailoutWorkflow.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/bailoutWorkflow.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/bailoutWorkflow.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/bailoutWorkflow.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "bailoutWorkflow.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bailoutWorkflow = bailoutWorkflow;\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nfunction bailoutWorkflow(output, message) {\n  output.write(message);\n  return 0;\n}\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhaWxvdXRXb3JrZmxvdy50cyJdLCJuYW1lcyI6WyJiYWlsb3V0V29ya2Zsb3ciLCJvdXRwdXQiLCJtZXNzYWdlIiwid3JpdGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7O0FBUU8sU0FBU0EsZUFBVCxDQUF5QkMsTUFBekIsRUFBMkNDLE9BQTNDLEVBQTREO0FBQ2pFRCxFQUFBQSxNQUFNLENBQUNFLEtBQVAsQ0FBYUQsT0FBYjtBQUNBLFNBQU8sQ0FBUDtBQUNEOztBQUFBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5pbXBvcnQge1dyaXRhYmxlfSBmcm9tICdzdHJlYW0nO1xuXG5leHBvcnQgZnVuY3Rpb24gYmFpbG91dFdvcmtmbG93KG91dHB1dDogV3JpdGFibGUsIG1lc3NhZ2U6IHN0cmluZykge1xuICBvdXRwdXQud3JpdGUobWVzc2FnZSk7XG4gIHJldHVybiAwO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "bailoutWorkflow.ts"
      ],
      "names": [
        "bailoutWorkflow",
        "output",
        "message",
        "write"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAQO,SAASA,eAAT,CAAyBC,MAAzB,EAA2CC,OAA3C,EAA4D;AACjED,EAAAA,MAAM,CAACE,KAAP,CAAaD,OAAb;AACA,SAAO,CAAP;AACD;;AAAA",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport {Writable} from 'stream';\n\nexport function bailoutWorkflow(output: Writable, message: string) {\n  output.write(message);\n  return 0;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934706660
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/commands\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/commands/SyncAgainstMaster.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/commands/SyncAgainstMaster.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/commands/SyncAgainstMaster.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/commands/SyncAgainstMaster.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
        "sourceFileName": "SyncAgainstMaster.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  Command\n} = require(`clipanion`);\n\nconst {\n  clearBranches\n} = require(`../git/clearBranches`);\n\nconst {\n  openRepository\n} = require(`../git/openRepository`);\n\nconst {\n  retryIfStale\n} = require(`../git/retryIfStale`);\n\nconst {\n  synchroniseWithMaster\n} = require(`../git/synchroniseWithMaster`);\n\nclass SyncAgainstMaster extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout\n    });\n    const cancelled = await retryIfStale(async () => {\n      await clearBranches(git, git.config.branches.master, git.config.branches.mergeQueue);\n      this.context.stdout.write(`Fetching the head for ${git.config.branches.master} and the merge queue...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.master}:${git.config.branches.master}`, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`); // If we have any commit that are on master but not yet inside\n      // the merge queue, then we need to rebase the whole merge\n      // queue on top of the new master (otherwise there's a chance\n      // that the new master commits would cause the commits in the\n      // merge queue to fail)\n\n      this.context.stdout.write(`Syncing against ${git.config.branches.master}...\\n`);\n      const cancelled = await synchroniseWithMaster(git); // We must always push the result, because it's possible for\n      // our merge queue to not contain any PR that isn't in master\n      // but that doesn't mean we don't want the merge queue to\n      // follow master.\n      //\n      // if (cancelled.length === 0)\n      //   return cancelled;\n\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.master, git.config.branches.mergeQueue);\n      return cancelled;\n    });\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n\n}\n\nSyncAgainstMaster.addPath(`sync`, `against`, `master`);\nmodule.exports = SyncAgainstMaster;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN5bmNBZ2FpbnN0TWFzdGVyLmpzIl0sIm5hbWVzIjpbIkNvbW1hbmQiLCJyZXF1aXJlIiwiY2xlYXJCcmFuY2hlcyIsIm9wZW5SZXBvc2l0b3J5IiwicmV0cnlJZlN0YWxlIiwic3luY2hyb25pc2VXaXRoTWFzdGVyIiwiU3luY0FnYWluc3RNYXN0ZXIiLCJleGVjdXRlIiwiZ2l0IiwiY29udGV4dCIsImN3ZCIsInN0ZG91dCIsImNhbmNlbGxlZCIsImNvbmZpZyIsImJyYW5jaGVzIiwibWFzdGVyIiwibWVyZ2VRdWV1ZSIsIndyaXRlIiwiZHJpdmVyIiwiZmV0Y2hGcm9tT3JpZ2luIiwicHVzaFRvT3JpZ2luIiwic2VuZENhbmNlbE5vdGlmaWNhdGlvbnMiLCJhZGRQYXRoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUEsTUFBTTtBQUFDQSxFQUFBQTtBQUFELElBQVlDLE9BQU8sQ0FBRSxXQUFGLENBQXpCOztBQUVBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFrQkQsT0FBTyxDQUFFLHNCQUFGLENBQS9COztBQUNBLE1BQU07QUFBQ0UsRUFBQUE7QUFBRCxJQUFtQkYsT0FBTyxDQUFFLHVCQUFGLENBQWhDOztBQUNBLE1BQU07QUFBQ0csRUFBQUE7QUFBRCxJQUFpQkgsT0FBTyxDQUFFLHFCQUFGLENBQTlCOztBQUNBLE1BQU07QUFBQ0ksRUFBQUE7QUFBRCxJQUEwQkosT0FBTyxDQUFFLDhCQUFGLENBQXZDOztBQUVBLE1BQU1LLGlCQUFOLFNBQWdDTixPQUFoQyxDQUF3QztBQUN0QyxRQUFNTyxPQUFOLEdBQWdCO0FBQ2QsVUFBTUMsR0FBRyxHQUFHLE1BQU1MLGNBQWMsQ0FBQyxLQUFLTSxPQUFMLENBQWFDLEdBQWQsRUFBbUI7QUFDakRDLE1BQUFBLE1BQU0sRUFBRSxLQUFLRixPQUFMLENBQWFFO0FBRDRCLEtBQW5CLENBQWhDO0FBSUEsVUFBTUMsU0FBUyxHQUFHLE1BQU1SLFlBQVksQ0FBQyxZQUFZO0FBQy9DLFlBQU1GLGFBQWEsQ0FBQ00sR0FBRCxFQUFNQSxHQUFHLENBQUNLLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsTUFBMUIsRUFBa0NQLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CRSxVQUF0RCxDQUFuQjtBQUVBLFdBQUtQLE9BQUwsQ0FBYUUsTUFBYixDQUFvQk0sS0FBcEIsQ0FBMkIseUJBQXdCVCxHQUFHLENBQUNLLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsTUFBTywyQkFBOUU7QUFDQSxZQUFNLEtBQUtOLE9BQUwsQ0FBYVMsTUFBYixDQUFvQkMsZUFBcEIsQ0FBb0NYLEdBQXBDLEVBQTBDLEdBQUVBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CQyxNQUFPLElBQUdQLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CQyxNQUFPLEVBQXJHLEVBQXlHLEdBQUVQLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CRSxVQUFXLElBQUdSLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CRSxVQUFXLEVBQTVLLENBQU4sQ0FKK0MsQ0FNL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFLUCxPQUFMLENBQWFFLE1BQWIsQ0FBb0JNLEtBQXBCLENBQTJCLG1CQUFrQlQsR0FBRyxDQUFDSyxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLE1BQU8sT0FBeEU7QUFDQSxZQUFNSCxTQUFTLEdBQUcsTUFBTVAscUJBQXFCLENBQUNHLEdBQUQsQ0FBN0MsQ0FiK0MsQ0FlL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsV0FBS0MsT0FBTCxDQUFhRSxNQUFiLENBQW9CTSxLQUFwQixDQUEyQiwrQkFBM0I7QUFDQSxZQUFNLEtBQUtSLE9BQUwsQ0FBYVMsTUFBYixDQUFvQkUsWUFBcEIsQ0FBaUNaLEdBQWpDLEVBQXVDLFVBQXZDLEVBQW1ELG9CQUFuRCxFQUF3RUEsR0FBRyxDQUFDSyxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLE1BQTVGLEVBQW9HUCxHQUFHLENBQUNLLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkUsVUFBeEgsQ0FBTjtBQUVBLGFBQU9KLFNBQVA7QUFDRCxLQTNCbUMsQ0FBcEM7QUE2QkEsVUFBTSxLQUFLSCxPQUFMLENBQWFTLE1BQWIsQ0FBb0JHLHVCQUFwQixDQUE0Q1QsU0FBNUMsQ0FBTjtBQUNEOztBQXBDcUM7O0FBdUN4Q04saUJBQWlCLENBQUNnQixPQUFsQixDQUEyQixNQUEzQixFQUFtQyxTQUFuQyxFQUE4QyxRQUE5QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJsQixpQkFBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL21hZWwubmlzb24vY2hlbmlsbGUvc291cmNlcy9jb21tYW5kcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmNvbnN0IHtDb21tYW5kfSA9IHJlcXVpcmUoYGNsaXBhbmlvbmApO1xuXG5jb25zdCB7Y2xlYXJCcmFuY2hlc30gPSByZXF1aXJlKGAuLi9naXQvY2xlYXJCcmFuY2hlc2ApO1xuY29uc3Qge29wZW5SZXBvc2l0b3J5fSA9IHJlcXVpcmUoYC4uL2dpdC9vcGVuUmVwb3NpdG9yeWApO1xuY29uc3Qge3JldHJ5SWZTdGFsZX0gPSByZXF1aXJlKGAuLi9naXQvcmV0cnlJZlN0YWxlYCk7XG5jb25zdCB7c3luY2hyb25pc2VXaXRoTWFzdGVyfSA9IHJlcXVpcmUoYC4uL2dpdC9zeW5jaHJvbmlzZVdpdGhNYXN0ZXJgKTtcblxuY2xhc3MgU3luY0FnYWluc3RNYXN0ZXIgZXh0ZW5kcyBDb21tYW5kIHtcbiAgYXN5bmMgZXhlY3V0ZSgpIHtcbiAgICBjb25zdCBnaXQgPSBhd2FpdCBvcGVuUmVwb3NpdG9yeSh0aGlzLmNvbnRleHQuY3dkLCB7XG4gICAgICBzdGRvdXQ6IHRoaXMuY29udGV4dC5zdGRvdXQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxsZWQgPSBhd2FpdCByZXRyeUlmU3RhbGUoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgY2xlYXJCcmFuY2hlcyhnaXQsIGdpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUpO1xuXG4gICAgICB0aGlzLmNvbnRleHQuc3Rkb3V0LndyaXRlKGBGZXRjaGluZyB0aGUgaGVhZCBmb3IgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn0gYW5kIHRoZSBtZXJnZSBxdWV1ZS4uLlxcbmApO1xuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5mZXRjaEZyb21PcmlnaW4oZ2l0LCBgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn06JHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn1gLCBgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9OiR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlfWApO1xuXG4gICAgICAvLyBJZiB3ZSBoYXZlIGFueSBjb21taXQgdGhhdCBhcmUgb24gbWFzdGVyIGJ1dCBub3QgeWV0IGluc2lkZVxuICAgICAgLy8gdGhlIG1lcmdlIHF1ZXVlLCB0aGVuIHdlIG5lZWQgdG8gcmViYXNlIHRoZSB3aG9sZSBtZXJnZVxuICAgICAgLy8gcXVldWUgb24gdG9wIG9mIHRoZSBuZXcgbWFzdGVyIChvdGhlcndpc2UgdGhlcmUncyBhIGNoYW5jZVxuICAgICAgLy8gdGhhdCB0aGUgbmV3IG1hc3RlciBjb21taXRzIHdvdWxkIGNhdXNlIHRoZSBjb21taXRzIGluIHRoZVxuICAgICAgLy8gbWVyZ2UgcXVldWUgdG8gZmFpbClcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgU3luY2luZyBhZ2FpbnN0ICR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tYXN0ZXJ9Li4uXFxuYCk7XG4gICAgICBjb25zdCBjYW5jZWxsZWQgPSBhd2FpdCBzeW5jaHJvbmlzZVdpdGhNYXN0ZXIoZ2l0KTtcblxuICAgICAgLy8gV2UgbXVzdCBhbHdheXMgcHVzaCB0aGUgcmVzdWx0LCBiZWNhdXNlIGl0J3MgcG9zc2libGUgZm9yXG4gICAgICAvLyBvdXIgbWVyZ2UgcXVldWUgdG8gbm90IGNvbnRhaW4gYW55IFBSIHRoYXQgaXNuJ3QgaW4gbWFzdGVyXG4gICAgICAvLyBidXQgdGhhdCBkb2Vzbid0IG1lYW4gd2UgZG9uJ3Qgd2FudCB0aGUgbWVyZ2UgcXVldWUgdG9cbiAgICAgIC8vIGZvbGxvdyBtYXN0ZXIuXG4gICAgICAvL1xuICAgICAgLy8gaWYgKGNhbmNlbGxlZC5sZW5ndGggPT09IDApXG4gICAgICAvLyAgIHJldHVybiBjYW5jZWxsZWQ7XG5cbiAgICAgIHRoaXMuY29udGV4dC5zdGRvdXQud3JpdGUoYERvbmUgLSBwdXNoaW5nIHRoZSBjaGFuZ2VzIVxcbmApO1xuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5wdXNoVG9PcmlnaW4oZ2l0LCBgLS1hdG9taWNgLCBgLS1mb3JjZS13aXRoLWxlYXNlYCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tYXN0ZXIsIGdpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZSk7XG5cbiAgICAgIHJldHVybiBjYW5jZWxsZWQ7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZHJpdmVyLnNlbmRDYW5jZWxOb3RpZmljYXRpb25zKGNhbmNlbGxlZCk7XG4gIH1cbn1cblxuU3luY0FnYWluc3RNYXN0ZXIuYWRkUGF0aChgc3luY2AsIGBhZ2FpbnN0YCwgYG1hc3RlcmApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bmNBZ2FpbnN0TWFzdGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "SyncAgainstMaster.js"
      ],
      "names": [
        "Command",
        "require",
        "clearBranches",
        "openRepository",
        "retryIfStale",
        "synchroniseWithMaster",
        "SyncAgainstMaster",
        "execute",
        "git",
        "context",
        "cwd",
        "stdout",
        "cancelled",
        "config",
        "branches",
        "master",
        "mergeQueue",
        "write",
        "driver",
        "fetchFromOrigin",
        "pushToOrigin",
        "sendCancelNotifications",
        "addPath",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAAYC,OAAO,CAAE,WAAF,CAAzB;;AAEA,MAAM;AAACC,EAAAA;AAAD,IAAkBD,OAAO,CAAE,sBAAF,CAA/B;;AACA,MAAM;AAACE,EAAAA;AAAD,IAAmBF,OAAO,CAAE,uBAAF,CAAhC;;AACA,MAAM;AAACG,EAAAA;AAAD,IAAiBH,OAAO,CAAE,qBAAF,CAA9B;;AACA,MAAM;AAACI,EAAAA;AAAD,IAA0BJ,OAAO,CAAE,8BAAF,CAAvC;;AAEA,MAAMK,iBAAN,SAAgCN,OAAhC,CAAwC;AACtC,QAAMO,OAAN,GAAgB;AACd,UAAMC,GAAG,GAAG,MAAML,cAAc,CAAC,KAAKM,OAAL,CAAaC,GAAd,EAAmB;AACjDC,MAAAA,MAAM,EAAE,KAAKF,OAAL,CAAaE;AAD4B,KAAnB,CAAhC;AAIA,UAAMC,SAAS,GAAG,MAAMR,YAAY,CAAC,YAAY;AAC/C,YAAMF,aAAa,CAACM,GAAD,EAAMA,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAA1B,EAAkCP,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBE,UAAtD,CAAnB;AAEA,WAAKP,OAAL,CAAaE,MAAb,CAAoBM,KAApB,CAA2B,yBAAwBT,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAAO,2BAA9E;AACA,YAAM,KAAKN,OAAL,CAAaS,MAAb,CAAoBC,eAApB,CAAoCX,GAApC,EAA0C,GAAEA,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAAO,IAAGP,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAAO,EAArG,EAAyG,GAAEP,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBE,UAAW,IAAGR,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBE,UAAW,EAA5K,CAAN,CAJ+C,CAM/C;AACA;AACA;AACA;AACA;;AAEA,WAAKP,OAAL,CAAaE,MAAb,CAAoBM,KAApB,CAA2B,mBAAkBT,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAAO,OAAxE;AACA,YAAMH,SAAS,GAAG,MAAMP,qBAAqB,CAACG,GAAD,CAA7C,CAb+C,CAe/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAKC,OAAL,CAAaE,MAAb,CAAoBM,KAApB,CAA2B,+BAA3B;AACA,YAAM,KAAKR,OAAL,CAAaS,MAAb,CAAoBE,YAApB,CAAiCZ,GAAjC,EAAuC,UAAvC,EAAmD,oBAAnD,EAAwEA,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBC,MAA5F,EAAoGP,GAAG,CAACK,MAAJ,CAAWC,QAAX,CAAoBE,UAAxH,CAAN;AAEA,aAAOJ,SAAP;AACD,KA3BmC,CAApC;AA6BA,UAAM,KAAKH,OAAL,CAAaS,MAAb,CAAoBG,uBAApB,CAA4CT,SAA5C,CAAN;AACD;;AApCqC;;AAuCxCN,iBAAiB,CAACgB,OAAlB,CAA2B,MAA3B,EAAmC,SAAnC,EAA8C,QAA9C;AAEAC,MAAM,CAACC,OAAP,GAAiBlB,iBAAjB",
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {Command} = require(`clipanion`);\n\nconst {clearBranches} = require(`../git/clearBranches`);\nconst {openRepository} = require(`../git/openRepository`);\nconst {retryIfStale} = require(`../git/retryIfStale`);\nconst {synchroniseWithMaster} = require(`../git/synchroniseWithMaster`);\n\nclass SyncAgainstMaster extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout,\n    });\n\n    const cancelled = await retryIfStale(async () => {\n      await clearBranches(git, git.config.branches.master, git.config.branches.mergeQueue);\n\n      this.context.stdout.write(`Fetching the head for ${git.config.branches.master} and the merge queue...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.master}:${git.config.branches.master}`, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`);\n\n      // If we have any commit that are on master but not yet inside\n      // the merge queue, then we need to rebase the whole merge\n      // queue on top of the new master (otherwise there's a chance\n      // that the new master commits would cause the commits in the\n      // merge queue to fail)\n\n      this.context.stdout.write(`Syncing against ${git.config.branches.master}...\\n`);\n      const cancelled = await synchroniseWithMaster(git);\n\n      // We must always push the result, because it's possible for\n      // our merge queue to not contain any PR that isn't in master\n      // but that doesn't mean we don't want the merge queue to\n      // follow master.\n      //\n      // if (cancelled.length === 0)\n      //   return cancelled;\n\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.master, git.config.branches.mergeQueue);\n\n      return cancelled;\n    });\n\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n}\n\nSyncAgainstMaster.addPath(`sync`, `against`, `master`);\n\nmodule.exports = SyncAgainstMaster;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567898
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/clearBranches.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/clearBranches.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/clearBranches.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/clearBranches.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "clearBranches.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.clearBranches = async (git, ...branches) => {\n  await git(`checkout`, `--detach`);\n\n  for (const branch of branches) {\n    let branchExists = true;\n\n    try {\n      await git(`rev-parse`, `--verify`, branch);\n    } catch (err) {\n      branchExists = false;\n    }\n\n    if (branchExists) {\n      await git(`branch`, `-D`, branch);\n    }\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsZWFyQnJhbmNoZXMuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsImNsZWFyQnJhbmNoZXMiLCJnaXQiLCJicmFuY2hlcyIsImJyYW5jaCIsImJyYW5jaEV4aXN0cyIsImVyciJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUFBLE9BQU8sQ0FBQ0MsYUFBUixHQUF3QixPQUFPQyxHQUFQLEVBQVksR0FBR0MsUUFBZixLQUE0QjtBQUNsRCxRQUFNRCxHQUFHLENBQUUsVUFBRixFQUFjLFVBQWQsQ0FBVDs7QUFFQSxPQUFLLE1BQU1FLE1BQVgsSUFBcUJELFFBQXJCLEVBQStCO0FBQzdCLFFBQUlFLFlBQVksR0FBRyxJQUFuQjs7QUFDQSxRQUFJO0FBQ0YsWUFBTUgsR0FBRyxDQUFFLFdBQUYsRUFBZSxVQUFmLEVBQTBCRSxNQUExQixDQUFUO0FBQ0QsS0FGRCxDQUVFLE9BQU9FLEdBQVAsRUFBWTtBQUNaRCxNQUFBQSxZQUFZLEdBQUcsS0FBZjtBQUNEOztBQUVELFFBQUlBLFlBQUosRUFBa0I7QUFDaEIsWUFBTUgsR0FBRyxDQUFFLFFBQUYsRUFBWSxJQUFaLEVBQWlCRSxNQUFqQixDQUFUO0FBQ0Q7QUFDRjtBQUNGLENBZkQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21hZWwubmlzb24vY2hlbmlsbGUvc291cmNlcy9naXQiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5leHBvcnRzLmNsZWFyQnJhbmNoZXMgPSBhc3luYyAoZ2l0LCAuLi5icmFuY2hlcykgPT4ge1xuICBhd2FpdCBnaXQoYGNoZWNrb3V0YCwgYC0tZGV0YWNoYCk7XG5cbiAgZm9yIChjb25zdCBicmFuY2ggb2YgYnJhbmNoZXMpIHtcbiAgICBsZXQgYnJhbmNoRXhpc3RzID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZ2l0KGByZXYtcGFyc2VgLCBgLS12ZXJpZnlgLCBicmFuY2gpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYnJhbmNoRXhpc3RzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGJyYW5jaEV4aXN0cykge1xuICAgICAgYXdhaXQgZ2l0KGBicmFuY2hgLCBgLURgLCBicmFuY2gpO1xuICAgIH1cbiAgfVxufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "clearBranches.js"
      ],
      "names": [
        "exports",
        "clearBranches",
        "git",
        "branches",
        "branch",
        "branchExists",
        "err"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,aAAR,GAAwB,OAAOC,GAAP,EAAY,GAAGC,QAAf,KAA4B;AAClD,QAAMD,GAAG,CAAE,UAAF,EAAc,UAAd,CAAT;;AAEA,OAAK,MAAME,MAAX,IAAqBD,QAArB,EAA+B;AAC7B,QAAIE,YAAY,GAAG,IAAnB;;AACA,QAAI;AACF,YAAMH,GAAG,CAAE,WAAF,EAAe,UAAf,EAA0BE,MAA1B,CAAT;AACD,KAFD,CAEE,OAAOE,GAAP,EAAY;AACZD,MAAAA,YAAY,GAAG,KAAf;AACD;;AAED,QAAIA,YAAJ,EAAkB;AAChB,YAAMH,GAAG,CAAE,QAAF,EAAY,IAAZ,EAAiBE,MAAjB,CAAT;AACD;AACF;AACF,CAfD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.clearBranches = async (git, ...branches) => {\n  await git(`checkout`, `--detach`);\n\n  for (const branch of branches) {\n    let branchExists = true;\n    try {\n      await git(`rev-parse`, `--verify`, branch);\n    } catch (err) {\n      branchExists = false;\n    }\n\n    if (branchExists) {\n      await git(`branch`, `-D`, branch);\n    }\n  }\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578919965067
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/openRepository.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/openRepository.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/openRepository.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/openRepository.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "openRepository.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.openRepository = openRepository;\n\nvar _fslib = require(\"@yarnpkg/fslib\");\n\nvar _chalk = _interopRequireDefault(require(\"chalk\"));\n\nvar _child_process = _interopRequireDefault(require(\"child_process\"));\n\nvar _getConfiguration = require(\"../getConfiguration\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\n;\n\nasync function openRepository(dir, {\n  stdout\n} = {}) {\n  const nDir = _fslib.npath.fromPortablePath(dir);\n\n  const git = async (...args) => {\n    if (stdout) stdout.write(`${_chalk.default.grey(`$ git ${args.join(` `)}`)}\\n`);\n\n    const result = _child_process.default.execFileSync(`git`, args, {\n      cwd: nDir,\n      encoding: `utf8`,\n      stdio: `pipe`\n    });\n\n    if (process.env.DEBUG_TESTS) {\n      console.log(`===`, ...args);\n      console.log(result);\n    }\n\n    return result.trim();\n  };\n\n  git.prefixSquashMessage = async prefix => {\n    const squashMessagePath = _fslib.ppath.resolve(dir, `.git/SQUASH_MSG`);\n\n    const squashMessage = await _fslib.xfs.readFilePromise(squashMessagePath, `utf8`);\n    await _fslib.xfs.writeFilePromise(squashMessagePath, `${prefix}${squashMessage}`);\n  };\n\n  const config = await (0, _getConfiguration.getConfiguration)(git);\n  git.config = config;\n  await git(`checkout`, git.config.branches.master);\n\n  try {\n    await git(`checkout`, git.config.branches.mergeQueue);\n  } catch {\n    await git(`checkout`, git.config.branches.mergeQueue, git.config.branches.master);\n    await git(`branch`, `-u`, `origin/${git.config.branches.mergeQueue}`);\n  }\n\n  if (stdout) {\n    const masterHash = await git(`rev-parse`, git.config.branches.master);\n    stdout.write(`${masterHash} Branch: ${git.config.branches.master}\\n`);\n    const mergeQueueHash = await git(`rev-parse`, git.config.branches.mergeQueue);\n    stdout.write(`${mergeQueueHash} Branch: ${git.config.branches.mergeQueue}\\n`);\n  }\n\n  return git;\n}\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9wZW5SZXBvc2l0b3J5LnRzIl0sIm5hbWVzIjpbIm9wZW5SZXBvc2l0b3J5IiwiZGlyIiwic3Rkb3V0IiwibkRpciIsIm5wYXRoIiwiZnJvbVBvcnRhYmxlUGF0aCIsImdpdCIsImFyZ3MiLCJ3cml0ZSIsImNoYWxrIiwiZ3JleSIsImpvaW4iLCJyZXN1bHQiLCJjcCIsImV4ZWNGaWxlU3luYyIsImN3ZCIsImVuY29kaW5nIiwic3RkaW8iLCJwcm9jZXNzIiwiZW52IiwiREVCVUdfVEVTVFMiLCJjb25zb2xlIiwibG9nIiwidHJpbSIsInByZWZpeFNxdWFzaE1lc3NhZ2UiLCJwcmVmaXgiLCJzcXVhc2hNZXNzYWdlUGF0aCIsInBwYXRoIiwicmVzb2x2ZSIsInNxdWFzaE1lc3NhZ2UiLCJ4ZnMiLCJyZWFkRmlsZVByb21pc2UiLCJ3cml0ZUZpbGVQcm9taXNlIiwiY29uZmlnIiwiYnJhbmNoZXMiLCJtYXN0ZXIiLCJtZXJnZVF1ZXVlIiwibWFzdGVySGFzaCIsIm1lcmdlUXVldWVIYXNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTUE7O0FBRUE7O0FBQ0E7O0FBRUE7Ozs7QUFYQTs7Ozs7O0FBaUJDOztBQUVNLGVBQWVBLGNBQWYsQ0FBOEJDLEdBQTlCLEVBQWlEO0FBQUNDLEVBQUFBO0FBQUQsSUFBZ0MsRUFBakYsRUFBbUc7QUFDeEcsUUFBTUMsSUFBSSxHQUFHQyxhQUFNQyxnQkFBTixDQUF1QkosR0FBdkIsQ0FBYjs7QUFFQSxRQUFNSyxHQUFHLEdBQUcsT0FBTyxHQUFHQyxJQUFWLEtBQTZCO0FBQ3ZDLFFBQUlMLE1BQUosRUFDRUEsTUFBTSxDQUFDTSxLQUFQLENBQWMsR0FBRUMsZUFBTUMsSUFBTixDQUFZLFNBQVFILElBQUksQ0FBQ0ksSUFBTCxDQUFXLEdBQVgsQ0FBZSxFQUFuQyxDQUFzQyxJQUF0RDs7QUFFRixVQUFNQyxNQUFNLEdBQUdDLHVCQUFHQyxZQUFILENBQWlCLEtBQWpCLEVBQXVCUCxJQUF2QixFQUE2QjtBQUMxQ1EsTUFBQUEsR0FBRyxFQUFFWixJQURxQztBQUUxQ2EsTUFBQUEsUUFBUSxFQUFHLE1BRitCO0FBRzFDQyxNQUFBQSxLQUFLLEVBQUc7QUFIa0MsS0FBN0IsQ0FBZjs7QUFNQSxRQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsV0FBaEIsRUFBNkI7QUFDekJDLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLEtBQWIsRUFBbUIsR0FBR2YsSUFBdEI7QUFDQWMsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlWLE1BQVo7QUFDSDs7QUFFRCxXQUFPQSxNQUFNLENBQUNXLElBQVAsRUFBUDtBQUNELEdBaEJEOztBQWtCQWpCLEVBQUFBLEdBQUcsQ0FBQ2tCLG1CQUFKLEdBQTBCLE1BQU9DLE1BQVAsSUFBMEI7QUFDbEQsVUFBTUMsaUJBQWlCLEdBQUdDLGFBQU1DLE9BQU4sQ0FBYzNCLEdBQWQsRUFBb0IsaUJBQXBCLENBQTFCOztBQUNBLFVBQU00QixhQUFhLEdBQUcsTUFBTUMsV0FBSUMsZUFBSixDQUFvQkwsaUJBQXBCLEVBQXdDLE1BQXhDLENBQTVCO0FBRUEsVUFBTUksV0FBSUUsZ0JBQUosQ0FBcUJOLGlCQUFyQixFQUF5QyxHQUFFRCxNQUFPLEdBQUVJLGFBQWMsRUFBbEUsQ0FBTjtBQUNELEdBTEQ7O0FBT0EsUUFBTUksTUFBcUIsR0FBRyxNQUFNLHdDQUFpQjNCLEdBQWpCLENBQXBDO0FBQ0FBLEVBQUFBLEdBQUcsQ0FBQzJCLE1BQUosR0FBYUEsTUFBYjtBQUVBLFFBQU0zQixHQUFHLENBQUUsVUFBRixFQUFhQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLE1BQWpDLENBQVQ7O0FBRUEsTUFBSTtBQUNGLFVBQU03QixHQUFHLENBQUUsVUFBRixFQUFhQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLFVBQWpDLENBQVQ7QUFDRCxHQUZELENBRUUsTUFBTTtBQUNOLFVBQU05QixHQUFHLENBQUUsVUFBRixFQUFhQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLFVBQWpDLEVBQTZDOUIsR0FBRyxDQUFDMkIsTUFBSixDQUFXQyxRQUFYLENBQW9CQyxNQUFqRSxDQUFUO0FBQ0EsVUFBTTdCLEdBQUcsQ0FBRSxRQUFGLEVBQVksSUFBWixFQUFrQixVQUFTQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLFVBQVcsRUFBMUQsQ0FBVDtBQUNEOztBQUVELE1BQUlsQyxNQUFKLEVBQVk7QUFDVixVQUFNbUMsVUFBVSxHQUFHLE1BQU0vQixHQUFHLENBQUUsV0FBRixFQUFjQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLE1BQWxDLENBQTVCO0FBQ0FqQyxJQUFBQSxNQUFNLENBQUNNLEtBQVAsQ0FBYyxHQUFFNkIsVUFBVyxZQUFXL0IsR0FBRyxDQUFDMkIsTUFBSixDQUFXQyxRQUFYLENBQW9CQyxNQUFPLElBQWpFO0FBRUEsVUFBTUcsY0FBYyxHQUFHLE1BQU1oQyxHQUFHLENBQUUsV0FBRixFQUFjQSxHQUFHLENBQUMyQixNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLFVBQWxDLENBQWhDO0FBQ0FsQyxJQUFBQSxNQUFNLENBQUNNLEtBQVAsQ0FBYyxHQUFFOEIsY0FBZSxZQUFXaEMsR0FBRyxDQUFDMkIsTUFBSixDQUFXQyxRQUFYLENBQW9CRSxVQUFXLElBQXpFO0FBQ0Q7O0FBRUQsU0FBTzlCLEdBQVA7QUFDRDs7QUFBQSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmltcG9ydCB7UG9ydGFibGVQYXRoLCBucGF0aCwgcHBhdGgsIHhmc30gZnJvbSAnQHlhcm5wa2cvZnNsaWInO1xuaW1wb3J0IHtXcml0YWJsZX0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgY3AgZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5cbmltcG9ydCB7Q29uZmlndXJhdGlvbiwgZ2V0Q29uZmlndXJhdGlvbn0gZnJvbSAnLi4vZ2V0Q29uZmlndXJhdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2l0IHtcbiAgKC4uLmFyZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTxzdHJpbmc+O1xuICBwcmVmaXhTcXVhc2hNZXNzYWdlKHByZWZpeDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgY29uZmlnOiBDb25maWd1cmF0aW9uO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wZW5SZXBvc2l0b3J5KGRpcjogUG9ydGFibGVQYXRoLCB7c3Rkb3V0fToge3N0ZG91dD86IFdyaXRhYmxlfSA9IHt9KTogUHJvbWlzZTxHaXQ+IHtcbiAgY29uc3QgbkRpciA9IG5wYXRoLmZyb21Qb3J0YWJsZVBhdGgoZGlyKTtcblxuICBjb25zdCBnaXQgPSBhc3luYyAoLi4uYXJnczogc3RyaW5nW10pID0+IHtcbiAgICBpZiAoc3Rkb3V0KVxuICAgICAgc3Rkb3V0LndyaXRlKGAke2NoYWxrLmdyZXkoYCQgZ2l0ICR7YXJncy5qb2luKGAgYCl9YCl9XFxuYCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBjcC5leGVjRmlsZVN5bmMoYGdpdGAsIGFyZ3MsIHtcbiAgICAgIGN3ZDogbkRpcixcbiAgICAgIGVuY29kaW5nOiBgdXRmOGAsXG4gICAgICBzdGRpbzogYHBpcGVgLFxuICAgIH0pO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52LkRFQlVHX1RFU1RTKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGA9PT1gLCAuLi5hcmdzKTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LnRyaW0oKTtcbiAgfTtcblxuICBnaXQucHJlZml4U3F1YXNoTWVzc2FnZSA9IGFzeW5jIChwcmVmaXg6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHNxdWFzaE1lc3NhZ2VQYXRoID0gcHBhdGgucmVzb2x2ZShkaXIsIGAuZ2l0L1NRVUFTSF9NU0dgIGFzIFBvcnRhYmxlUGF0aCk7XG4gICAgY29uc3Qgc3F1YXNoTWVzc2FnZSA9IGF3YWl0IHhmcy5yZWFkRmlsZVByb21pc2Uoc3F1YXNoTWVzc2FnZVBhdGgsIGB1dGY4YCk7XG5cbiAgICBhd2FpdCB4ZnMud3JpdGVGaWxlUHJvbWlzZShzcXVhc2hNZXNzYWdlUGF0aCwgYCR7cHJlZml4fSR7c3F1YXNoTWVzc2FnZX1gKTtcbiAgfTtcblxuICBjb25zdCBjb25maWc6IENvbmZpZ3VyYXRpb24gPSBhd2FpdCBnZXRDb25maWd1cmF0aW9uKGdpdCk7XG4gIGdpdC5jb25maWcgPSBjb25maWc7XG5cbiAgYXdhaXQgZ2l0KGBjaGVja291dGAsIGdpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyKTtcblxuICB0cnkge1xuICAgIGF3YWl0IGdpdChgY2hlY2tvdXRgLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUpO1xuICB9IGNhdGNoIHtcbiAgICBhd2FpdCBnaXQoYGNoZWNrb3V0YCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcik7XG4gICAgYXdhaXQgZ2l0KGBicmFuY2hgLCBgLXVgLCBgb3JpZ2luLyR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlfWApO1xuICB9XG5cbiAgaWYgKHN0ZG91dCkge1xuICAgIGNvbnN0IG1hc3Rlckhhc2ggPSBhd2FpdCBnaXQoYHJldi1wYXJzZWAsIGdpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyKTtcbiAgICBzdGRvdXQud3JpdGUoYCR7bWFzdGVySGFzaH0gQnJhbmNoOiAke2dpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyfVxcbmApO1xuXG4gICAgY29uc3QgbWVyZ2VRdWV1ZUhhc2ggPSBhd2FpdCBnaXQoYHJldi1wYXJzZWAsIGdpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZSk7XG4gICAgc3Rkb3V0LndyaXRlKGAke21lcmdlUXVldWVIYXNofSBCcmFuY2g6ICR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlfVxcbmApO1xuICB9XG5cbiAgcmV0dXJuIGdpdDtcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "openRepository.ts"
      ],
      "names": [
        "openRepository",
        "dir",
        "stdout",
        "nDir",
        "npath",
        "fromPortablePath",
        "git",
        "args",
        "write",
        "chalk",
        "grey",
        "join",
        "result",
        "cp",
        "execFileSync",
        "cwd",
        "encoding",
        "stdio",
        "process",
        "env",
        "DEBUG_TESTS",
        "console",
        "log",
        "trim",
        "prefixSquashMessage",
        "prefix",
        "squashMessagePath",
        "ppath",
        "resolve",
        "squashMessage",
        "xfs",
        "readFilePromise",
        "writeFilePromise",
        "config",
        "branches",
        "master",
        "mergeQueue",
        "masterHash",
        "mergeQueueHash"
      ],
      "mappings": ";;;;;;;AAMA;;AAEA;;AACA;;AAEA;;;;AAXA;;;;;;AAiBC;;AAEM,eAAeA,cAAf,CAA8BC,GAA9B,EAAiD;AAACC,EAAAA;AAAD,IAAgC,EAAjF,EAAmG;AACxG,QAAMC,IAAI,GAAGC,aAAMC,gBAAN,CAAuBJ,GAAvB,CAAb;;AAEA,QAAMK,GAAG,GAAG,OAAO,GAAGC,IAAV,KAA6B;AACvC,QAAIL,MAAJ,EACEA,MAAM,CAACM,KAAP,CAAc,GAAEC,eAAMC,IAAN,CAAY,SAAQH,IAAI,CAACI,IAAL,CAAW,GAAX,CAAe,EAAnC,CAAsC,IAAtD;;AAEF,UAAMC,MAAM,GAAGC,uBAAGC,YAAH,CAAiB,KAAjB,EAAuBP,IAAvB,EAA6B;AAC1CQ,MAAAA,GAAG,EAAEZ,IADqC;AAE1Ca,MAAAA,QAAQ,EAAG,MAF+B;AAG1CC,MAAAA,KAAK,EAAG;AAHkC,KAA7B,CAAf;;AAMA,QAAIC,OAAO,CAACC,GAAR,CAAYC,WAAhB,EAA6B;AACzBC,MAAAA,OAAO,CAACC,GAAR,CAAa,KAAb,EAAmB,GAAGf,IAAtB;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AACH;;AAED,WAAOA,MAAM,CAACW,IAAP,EAAP;AACD,GAhBD;;AAkBAjB,EAAAA,GAAG,CAACkB,mBAAJ,GAA0B,MAAOC,MAAP,IAA0B;AAClD,UAAMC,iBAAiB,GAAGC,aAAMC,OAAN,CAAc3B,GAAd,EAAoB,iBAApB,CAA1B;;AACA,UAAM4B,aAAa,GAAG,MAAMC,WAAIC,eAAJ,CAAoBL,iBAApB,EAAwC,MAAxC,CAA5B;AAEA,UAAMI,WAAIE,gBAAJ,CAAqBN,iBAArB,EAAyC,GAAED,MAAO,GAAEI,aAAc,EAAlE,CAAN;AACD,GALD;;AAOA,QAAMI,MAAqB,GAAG,MAAM,wCAAiB3B,GAAjB,CAApC;AACAA,EAAAA,GAAG,CAAC2B,MAAJ,GAAaA,MAAb;AAEA,QAAM3B,GAAG,CAAE,UAAF,EAAaA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBC,MAAjC,CAAT;;AAEA,MAAI;AACF,UAAM7B,GAAG,CAAE,UAAF,EAAaA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBE,UAAjC,CAAT;AACD,GAFD,CAEE,MAAM;AACN,UAAM9B,GAAG,CAAE,UAAF,EAAaA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBE,UAAjC,EAA6C9B,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBC,MAAjE,CAAT;AACA,UAAM7B,GAAG,CAAE,QAAF,EAAY,IAAZ,EAAkB,UAASA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBE,UAAW,EAA1D,CAAT;AACD;;AAED,MAAIlC,MAAJ,EAAY;AACV,UAAMmC,UAAU,GAAG,MAAM/B,GAAG,CAAE,WAAF,EAAcA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBC,MAAlC,CAA5B;AACAjC,IAAAA,MAAM,CAACM,KAAP,CAAc,GAAE6B,UAAW,YAAW/B,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBC,MAAO,IAAjE;AAEA,UAAMG,cAAc,GAAG,MAAMhC,GAAG,CAAE,WAAF,EAAcA,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBE,UAAlC,CAAhC;AACAlC,IAAAA,MAAM,CAACM,KAAP,CAAc,GAAE8B,cAAe,YAAWhC,GAAG,CAAC2B,MAAJ,CAAWC,QAAX,CAAoBE,UAAW,IAAzE;AACD;;AAED,SAAO9B,GAAP;AACD;;AAAA",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport {PortablePath, npath, ppath, xfs} from '@yarnpkg/fslib';\nimport {Writable} from 'stream';\nimport chalk from 'chalk';\nimport cp from 'child_process';\n\nimport {Configuration, getConfiguration} from '../getConfiguration';\n\nexport interface Git {\n  (...args: string[]): Promise<string>;\n  prefixSquashMessage(prefix: string): Promise<void>;\n  config: Configuration;\n};\n\nexport async function openRepository(dir: PortablePath, {stdout}: {stdout?: Writable} = {}): Promise<Git> {\n  const nDir = npath.fromPortablePath(dir);\n\n  const git = async (...args: string[]) => {\n    if (stdout)\n      stdout.write(`${chalk.grey(`$ git ${args.join(` `)}`)}\\n`);\n\n    const result = cp.execFileSync(`git`, args, {\n      cwd: nDir,\n      encoding: `utf8`,\n      stdio: `pipe`,\n    });\n\n    if (process.env.DEBUG_TESTS) {\n        console.log(`===`, ...args);\n        console.log(result);\n    }\n\n    return result.trim();\n  };\n\n  git.prefixSquashMessage = async (prefix: string) => {\n    const squashMessagePath = ppath.resolve(dir, `.git/SQUASH_MSG` as PortablePath);\n    const squashMessage = await xfs.readFilePromise(squashMessagePath, `utf8`);\n\n    await xfs.writeFilePromise(squashMessagePath, `${prefix}${squashMessage}`);\n  };\n\n  const config: Configuration = await getConfiguration(git);\n  git.config = config;\n\n  await git(`checkout`, git.config.branches.master);\n\n  try {\n    await git(`checkout`, git.config.branches.mergeQueue);\n  } catch {\n    await git(`checkout`, git.config.branches.mergeQueue, git.config.branches.master);\n    await git(`branch`, `-u`, `origin/${git.config.branches.mergeQueue}`);\n  }\n\n  if (stdout) {\n    const masterHash = await git(`rev-parse`, git.config.branches.master);\n    stdout.write(`${masterHash} Branch: ${git.config.branches.master}\\n`);\n\n    const mergeQueueHash = await git(`rev-parse`, git.config.branches.mergeQueue);\n    stdout.write(`${mergeQueueHash} Branch: ${git.config.branches.mergeQueue}\\n`);\n  }\n\n  return git;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934526009
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/getConfiguration.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/getConfiguration.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/getConfiguration.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/getConfiguration.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "getConfiguration.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getConfiguration = getConfiguration;\nexports.BASE_CONFIGURATION = void 0;\n\nvar _jsYaml = _interopRequireDefault(require(\"js-yaml\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst BASE_CONFIGURATION = {\n  branches: {\n    master: process.env.INPUT_MASTER || `master`,\n    mergeQueue: process.env.INPUT_MERGEQUEUE || `merge-queue`\n  }\n};\nexports.BASE_CONFIGURATION = BASE_CONFIGURATION;\n\nasync function getConfiguration(git) {\n  let configFile;\n\n  try {\n    configFile = await git(`show`, `${exports.BASE_CONFIGURATION.branches.master}:chenille.yml`);\n  } catch {}\n\n  const userConfiguration = typeof configFile !== `undefined` ? _jsYaml.default.safeLoad(configFile) : {};\n  return { ...userConfiguration,\n    ...exports.BASE_CONFIGURATION\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldENvbmZpZ3VyYXRpb24udHMiXSwibmFtZXMiOlsiQkFTRV9DT05GSUdVUkFUSU9OIiwiYnJhbmNoZXMiLCJtYXN0ZXIiLCJwcm9jZXNzIiwiZW52IiwiSU5QVVRfTUFTVEVSIiwibWVyZ2VRdWV1ZSIsIklOUFVUX01FUkdFUVVFVUUiLCJnZXRDb25maWd1cmF0aW9uIiwiZ2l0IiwiY29uZmlnRmlsZSIsImV4cG9ydHMiLCJ1c2VyQ29uZmlndXJhdGlvbiIsInlhbWwiLCJzYWZlTG9hZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFNQTs7OztBQU5BOzs7Ozs7QUFrQk8sTUFBTUEsa0JBQWtCLEdBQUc7QUFDaENDLEVBQUFBLFFBQVEsRUFBRTtBQUNSQyxJQUFBQSxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxZQUFaLElBQTZCLFFBRDdCO0FBRVJDLElBQUFBLFVBQVUsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHLGdCQUFaLElBQWlDO0FBRnJDO0FBRHNCLENBQTNCOzs7QUFPQSxlQUFlQyxnQkFBZixDQUFnQ0MsR0FBaEMsRUFBa0U7QUFDdkUsTUFBSUMsVUFBSjs7QUFDQSxNQUFJO0FBQ0ZBLElBQUFBLFVBQVUsR0FBRyxNQUFNRCxHQUFHLENBQUUsTUFBRixFQUFVLEdBQUVFLE9BQU8sQ0FBQ1gsa0JBQVIsQ0FBMkJDLFFBQTNCLENBQW9DQyxNQUFPLGVBQXZELENBQXRCO0FBQ0QsR0FGRCxDQUVFLE1BQU0sQ0FBRTs7QUFFVixRQUFNVSxpQkFBaUIsR0FBRyxPQUFPRixVQUFQLEtBQXVCLFdBQXZCLEdBQ3RCRyxnQkFBS0MsUUFBTCxDQUFjSixVQUFkLENBRHNCLEdBRXRCLEVBRko7QUFJQSxTQUFPLEVBQ0wsR0FBR0UsaUJBREU7QUFFTCxPQUFHRCxPQUFPLENBQUNYO0FBRk4sR0FBUDtBQUlEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5pbXBvcnQgeWFtbCBmcm9tICdqcy15YW1sJztcblxuaW1wb3J0IHtHaXR9IGZyb20gJy4vZ2l0L29wZW5SZXBvc2l0b3J5JztcblxuZXhwb3J0IGludGVyZmFjZSBDb25maWd1cmF0aW9uIHtcbiAgcmVxdWlyZWRTdGF0dXM/OiBzdHJpbmdbXTtcbiAgYnJhbmNoZXM6IHtcbiAgICBtYXN0ZXI6IHN0cmluZztcbiAgICBtZXJnZVF1ZXVlOiBzdHJpbmc7XG4gIH07XG59IFxuXG5leHBvcnQgY29uc3QgQkFTRV9DT05GSUdVUkFUSU9OID0ge1xuICBicmFuY2hlczoge1xuICAgIG1hc3RlcjogcHJvY2Vzcy5lbnYuSU5QVVRfTUFTVEVSIHx8IGBtYXN0ZXJgLFxuICAgIG1lcmdlUXVldWU6IHByb2Nlc3MuZW52LklOUFVUX01FUkdFUVVFVUUgfHwgYG1lcmdlLXF1ZXVlYCxcbiAgfSxcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25maWd1cmF0aW9uKGdpdDogR2l0KTogUHJvbWlzZTxDb25maWd1cmF0aW9uPiB7XG4gIGxldCBjb25maWdGaWxlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHRyeSB7XG4gICAgY29uZmlnRmlsZSA9IGF3YWl0IGdpdChgc2hvd2AsIGAke2V4cG9ydHMuQkFTRV9DT05GSUdVUkFUSU9OLmJyYW5jaGVzLm1hc3Rlcn06Y2hlbmlsbGUueW1sYCk7XG4gIH0gY2F0Y2gge31cblxuICBjb25zdCB1c2VyQ29uZmlndXJhdGlvbiA9IHR5cGVvZiBjb25maWdGaWxlICE9PSBgdW5kZWZpbmVkYFxuICAgID8geWFtbC5zYWZlTG9hZChjb25maWdGaWxlKVxuICAgIDoge307XG5cbiAgcmV0dXJuIHtcbiAgICAuLi51c2VyQ29uZmlndXJhdGlvbixcbiAgICAuLi5leHBvcnRzLkJBU0VfQ09ORklHVVJBVElPTixcbiAgfTtcbn1cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "getConfiguration.ts"
      ],
      "names": [
        "BASE_CONFIGURATION",
        "branches",
        "master",
        "process",
        "env",
        "INPUT_MASTER",
        "mergeQueue",
        "INPUT_MERGEQUEUE",
        "getConfiguration",
        "git",
        "configFile",
        "exports",
        "userConfiguration",
        "yaml",
        "safeLoad"
      ],
      "mappings": ";;;;;;;;AAMA;;;;AANA;;;;;;AAkBO,MAAMA,kBAAkB,GAAG;AAChCC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,YAAZ,IAA6B,QAD7B;AAERC,IAAAA,UAAU,EAAEH,OAAO,CAACC,GAAR,CAAYG,gBAAZ,IAAiC;AAFrC;AADsB,CAA3B;;;AAOA,eAAeC,gBAAf,CAAgCC,GAAhC,EAAkE;AACvE,MAAIC,UAAJ;;AACA,MAAI;AACFA,IAAAA,UAAU,GAAG,MAAMD,GAAG,CAAE,MAAF,EAAU,GAAEE,OAAO,CAACX,kBAAR,CAA2BC,QAA3B,CAAoCC,MAAO,eAAvD,CAAtB;AACD,GAFD,CAEE,MAAM,CAAE;;AAEV,QAAMU,iBAAiB,GAAG,OAAOF,UAAP,KAAuB,WAAvB,GACtBG,gBAAKC,QAAL,CAAcJ,UAAd,CADsB,GAEtB,EAFJ;AAIA,SAAO,EACL,GAAGE,iBADE;AAEL,OAAGD,OAAO,CAACX;AAFN,GAAP;AAID",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport yaml from 'js-yaml';\n\nimport {Git} from './git/openRepository';\n\nexport interface Configuration {\n  requiredStatus?: string[];\n  branches: {\n    master: string;\n    mergeQueue: string;\n  };\n} \n\nexport const BASE_CONFIGURATION = {\n  branches: {\n    master: process.env.INPUT_MASTER || `master`,\n    mergeQueue: process.env.INPUT_MERGEQUEUE || `merge-queue`,\n  },\n};\n\nexport async function getConfiguration(git: Git): Promise<Configuration> {\n  let configFile: string | undefined;\n  try {\n    configFile = await git(`show`, `${exports.BASE_CONFIGURATION.branches.master}:chenille.yml`);\n  } catch {}\n\n  const userConfiguration = typeof configFile !== `undefined`\n    ? yaml.safeLoad(configFile)\n    : {};\n\n  return {\n    ...userConfiguration,\n    ...exports.BASE_CONFIGURATION,\n  };\n}\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934605695
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/retryIfStale.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/retryIfStale.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/retryIfStale.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/retryIfStale.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "retryIfStale.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.retryIfStale = async cb => {\n  do {\n    try {\n      return await cb();\n    } catch (error) {\n      if (error.stdout && error.stdout.includes(`(stale info)`)) {\n        continue;\n      } else {\n        throw error;\n      }\n    }\n  } while (false);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJ5SWZTdGFsZS5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwicmV0cnlJZlN0YWxlIiwiY2IiLCJlcnJvciIsInN0ZG91dCIsImluY2x1ZGVzIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFNQUEsT0FBTyxDQUFDQyxZQUFSLEdBQXVCLE1BQU9DLEVBQVAsSUFBYztBQUNuQyxLQUFHO0FBQ0QsUUFBSTtBQUNGLGFBQU8sTUFBTUEsRUFBRSxFQUFmO0FBQ0QsS0FGRCxDQUVFLE9BQU9DLEtBQVAsRUFBYztBQUNkLFVBQUlBLEtBQUssQ0FBQ0MsTUFBTixJQUFnQkQsS0FBSyxDQUFDQyxNQUFOLENBQWFDLFFBQWIsQ0FBdUIsY0FBdkIsQ0FBcEIsRUFBMkQ7QUFDekQ7QUFDRCxPQUZELE1BRU87QUFDTCxjQUFNRixLQUFOO0FBQ0Q7QUFDRjtBQUNGLEdBVkQsUUFVUyxLQVZUO0FBV0QsQ0FaRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmV4cG9ydHMucmV0cnlJZlN0YWxlID0gYXN5bmMgKGNiKSA9PiB7XG4gIGRvIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGNiKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5zdGRvdXQgJiYgZXJyb3Iuc3Rkb3V0LmluY2x1ZGVzKGAoc3RhbGUgaW5mbylgKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAoZmFsc2UpO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "retryIfStale.js"
      ],
      "names": [
        "exports",
        "retryIfStale",
        "cb",
        "error",
        "stdout",
        "includes"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,YAAR,GAAuB,MAAOC,EAAP,IAAc;AACnC,KAAG;AACD,QAAI;AACF,aAAO,MAAMA,EAAE,EAAf;AACD,KAFD,CAEE,OAAOC,KAAP,EAAc;AACd,UAAIA,KAAK,CAACC,MAAN,IAAgBD,KAAK,CAACC,MAAN,CAAaC,QAAb,CAAuB,cAAvB,CAApB,EAA2D;AACzD;AACD,OAFD,MAEO;AACL,cAAMF,KAAN;AACD;AACF;AACF,GAVD,QAUS,KAVT;AAWD,CAZD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.retryIfStale = async (cb) => {\n  do {\n    try {\n      return await cb();\n    } catch (error) {\n      if (error.stdout && error.stdout.includes(`(stale info)`)) {\n        continue;\n      } else {\n        throw error;\n      }\n    }\n  } while (false);\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567901
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/synchroniseWithMaster.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/synchroniseWithMaster.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/synchroniseWithMaster.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/synchroniseWithMaster.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "synchroniseWithMaster.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  getAllQueuedPullRequests\n} = require(`./getAllQueuedPullRequests`);\n\nconst {\n  isSynchronisedWithMaster\n} = require(`./isSynchronisedWithMaster`);\n\nexports.synchroniseWithMaster = async git => {\n  const canceled = [];\n  if (await isSynchronisedWithMaster(git)) return canceled;\n  const prs = await getAllQueuedPullRequests(git);\n  await git(`checkout`, `-b`, `temp/${git.config.branches.mergeQueue}`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, git.config.branches.master);\n\n  for (const pr of prs) {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, pr.hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, pr.hash);\n    const author = [`-c`, `user.name=${authorName}`, `-c`, `user.email=${authorEmail}`];\n\n    try {\n      await git(...author, `cherry-pick`, pr.hash);\n    } catch (error) {\n      await git(`cherry-pick`, `--abort`);\n      canceled.push({ ...pr,\n        reason: `Rebase on top of ${git.config.branches.master} failed (${error.message})`\n      });\n    }\n  }\n\n  await git(`checkout`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `temp/${git.config.branches.mergeQueue}`);\n  await git(`branch`, `-D`, `temp/${git.config.branches.mergeQueue}`);\n  return canceled;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN5bmNocm9uaXNlV2l0aE1hc3Rlci5qcyJdLCJuYW1lcyI6WyJnZXRBbGxRdWV1ZWRQdWxsUmVxdWVzdHMiLCJyZXF1aXJlIiwiaXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyIiwiZXhwb3J0cyIsInN5bmNocm9uaXNlV2l0aE1hc3RlciIsImdpdCIsImNhbmNlbGVkIiwicHJzIiwiY29uZmlnIiwiYnJhbmNoZXMiLCJtZXJnZVF1ZXVlIiwibWFzdGVyIiwicHIiLCJhdXRob3JOYW1lIiwiaGFzaCIsImF1dGhvckVtYWlsIiwiYXV0aG9yIiwiZXJyb3IiLCJwdXNoIiwicmVhc29uIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUEsTUFBTTtBQUFDQSxFQUFBQTtBQUFELElBQTZCQyxPQUFPLENBQUUsNEJBQUYsQ0FBMUM7O0FBQ0EsTUFBTTtBQUFDQyxFQUFBQTtBQUFELElBQTZCRCxPQUFPLENBQUUsNEJBQUYsQ0FBMUM7O0FBRUFFLE9BQU8sQ0FBQ0MscUJBQVIsR0FBZ0MsTUFBTUMsR0FBTixJQUFhO0FBQzNDLFFBQU1DLFFBQVEsR0FBRyxFQUFqQjtBQUNBLE1BQUksTUFBTUosd0JBQXdCLENBQUNHLEdBQUQsQ0FBbEMsRUFDRSxPQUFPQyxRQUFQO0FBRUYsUUFBTUMsR0FBRyxHQUFHLE1BQU1QLHdCQUF3QixDQUFDSyxHQUFELENBQTFDO0FBRUEsUUFBTUEsR0FBRyxDQUFFLFVBQUYsRUFBYyxJQUFkLEVBQW9CLFFBQU9BLEdBQUcsQ0FBQ0csTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUFXLEVBQTFELEVBQTZETCxHQUFHLENBQUNHLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBakYsQ0FBVDtBQUNBLFFBQU1MLEdBQUcsQ0FBRSxPQUFGLEVBQVcsUUFBWCxFQUFvQkEsR0FBRyxDQUFDRyxNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLE1BQXhDLENBQVQ7O0FBRUEsT0FBSyxNQUFNQyxFQUFYLElBQWlCTCxHQUFqQixFQUFzQjtBQUNwQixVQUFNTSxVQUFVLEdBQUcsTUFBTVIsR0FBRyxDQUFFLEtBQUYsRUFBUyxJQUFULEVBQWUsdUJBQWYsRUFBdUNPLEVBQUUsQ0FBQ0UsSUFBMUMsQ0FBNUI7QUFDQSxVQUFNQyxXQUFXLEdBQUcsTUFBTVYsR0FBRyxDQUFFLEtBQUYsRUFBUyxJQUFULEVBQWUsdUJBQWYsRUFBdUNPLEVBQUUsQ0FBQ0UsSUFBMUMsQ0FBN0I7QUFFQSxVQUFNRSxNQUFNLEdBQUcsQ0FDWixJQURZLEVBQ04sYUFBWUgsVUFBVyxFQURqQixFQUVaLElBRlksRUFFTixjQUFhRSxXQUFZLEVBRm5CLENBQWY7O0FBS0EsUUFBSTtBQUNGLFlBQU1WLEdBQUcsQ0FBQyxHQUFHVyxNQUFKLEVBQWEsYUFBYixFQUEyQkosRUFBRSxDQUFDRSxJQUE5QixDQUFUO0FBQ0QsS0FGRCxDQUVFLE9BQU9HLEtBQVAsRUFBYztBQUNkLFlBQU1aLEdBQUcsQ0FBRSxhQUFGLEVBQWlCLFNBQWpCLENBQVQ7QUFDQUMsTUFBQUEsUUFBUSxDQUFDWSxJQUFULENBQWMsRUFDWixHQUFHTixFQURTO0FBRVpPLFFBQUFBLE1BQU0sRUFBRyxvQkFBbUJkLEdBQUcsQ0FBQ0csTUFBSixDQUFXQyxRQUFYLENBQW9CRSxNQUFPLFlBQVdNLEtBQUssQ0FBQ0csT0FBUTtBQUZwRSxPQUFkO0FBSUQ7QUFDRjs7QUFFRCxRQUFNZixHQUFHLENBQUUsVUFBRixFQUFhQSxHQUFHLENBQUNHLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBakMsQ0FBVDtBQUNBLFFBQU1MLEdBQUcsQ0FBRSxPQUFGLEVBQVcsUUFBWCxFQUFxQixRQUFPQSxHQUFHLENBQUNHLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBVyxFQUEzRCxDQUFUO0FBQ0EsUUFBTUwsR0FBRyxDQUFFLFFBQUYsRUFBWSxJQUFaLEVBQWtCLFFBQU9BLEdBQUcsQ0FBQ0csTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUFXLEVBQXhELENBQVQ7QUFFQSxTQUFPSixRQUFQO0FBQ0QsQ0FuQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21hZWwubmlzb24vY2hlbmlsbGUvc291cmNlcy9naXQiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5jb25zdCB7Z2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzfSA9IHJlcXVpcmUoYC4vZ2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzYCk7XG5jb25zdCB7aXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyfSA9IHJlcXVpcmUoYC4vaXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyYCk7XG5cbmV4cG9ydHMuc3luY2hyb25pc2VXaXRoTWFzdGVyID0gYXN5bmMgZ2l0ID0+IHtcbiAgY29uc3QgY2FuY2VsZWQgPSBbXTtcbiAgaWYgKGF3YWl0IGlzU3luY2hyb25pc2VkV2l0aE1hc3RlcihnaXQpKVxuICAgIHJldHVybiBjYW5jZWxlZDtcblxuICBjb25zdCBwcnMgPSBhd2FpdCBnZXRBbGxRdWV1ZWRQdWxsUmVxdWVzdHMoZ2l0KTtcblxuICBhd2FpdCBnaXQoYGNoZWNrb3V0YCwgYC1iYCwgYHRlbXAvJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9YCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlKTtcbiAgYXdhaXQgZ2l0KGByZXNldGAsIGAtLWhhcmRgLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcik7XG5cbiAgZm9yIChjb25zdCBwciBvZiBwcnMpIHtcbiAgICBjb25zdCBhdXRob3JOYW1lID0gYXdhaXQgZ2l0KGBsb2dgLCBgLTFgLCBgLS1wcmV0dHk9Zm9ybWF0OiclYW4nYCwgcHIuaGFzaCk7XG4gICAgY29uc3QgYXV0aG9yRW1haWwgPSBhd2FpdCBnaXQoYGxvZ2AsIGAtMWAsIGAtLXByZXR0eT1mb3JtYXQ6JyVhZSdgLCBwci5oYXNoKTtcblxuICAgIGNvbnN0IGF1dGhvciA9IFtcbiAgICAgIGAtY2AsIGB1c2VyLm5hbWU9JHthdXRob3JOYW1lfWAsXG4gICAgICBgLWNgLCBgdXNlci5lbWFpbD0ke2F1dGhvckVtYWlsfWAsXG4gICAgXTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBnaXQoLi4uYXV0aG9yLCBgY2hlcnJ5LXBpY2tgLCBwci5oYXNoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgZ2l0KGBjaGVycnktcGlja2AsIGAtLWFib3J0YCk7XG4gICAgICBjYW5jZWxlZC5wdXNoKHtcbiAgICAgICAgLi4ucHIsXG4gICAgICAgIHJlYXNvbjogYFJlYmFzZSBvbiB0b3Agb2YgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn0gZmFpbGVkICgke2Vycm9yLm1lc3NhZ2V9KWAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhd2FpdCBnaXQoYGNoZWNrb3V0YCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlKTtcbiAgYXdhaXQgZ2l0KGByZXNldGAsIGAtLWhhcmRgLCBgdGVtcC8ke2dpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZX1gKTtcbiAgYXdhaXQgZ2l0KGBicmFuY2hgLCBgLURgLCBgdGVtcC8ke2dpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZX1gKTtcblxuICByZXR1cm4gY2FuY2VsZWQ7XG59O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "synchroniseWithMaster.js"
      ],
      "names": [
        "getAllQueuedPullRequests",
        "require",
        "isSynchronisedWithMaster",
        "exports",
        "synchroniseWithMaster",
        "git",
        "canceled",
        "prs",
        "config",
        "branches",
        "mergeQueue",
        "master",
        "pr",
        "authorName",
        "hash",
        "authorEmail",
        "author",
        "error",
        "push",
        "reason",
        "message"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAA6BC,OAAO,CAAE,4BAAF,CAA1C;;AACA,MAAM;AAACC,EAAAA;AAAD,IAA6BD,OAAO,CAAE,4BAAF,CAA1C;;AAEAE,OAAO,CAACC,qBAAR,GAAgC,MAAMC,GAAN,IAAa;AAC3C,QAAMC,QAAQ,GAAG,EAAjB;AACA,MAAI,MAAMJ,wBAAwB,CAACG,GAAD,CAAlC,EACE,OAAOC,QAAP;AAEF,QAAMC,GAAG,GAAG,MAAMP,wBAAwB,CAACK,GAAD,CAA1C;AAEA,QAAMA,GAAG,CAAE,UAAF,EAAc,IAAd,EAAoB,QAAOA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAA1D,EAA6DL,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBC,UAAjF,CAAT;AACA,QAAML,GAAG,CAAE,OAAF,EAAW,QAAX,EAAoBA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBE,MAAxC,CAAT;;AAEA,OAAK,MAAMC,EAAX,IAAiBL,GAAjB,EAAsB;AACpB,UAAMM,UAAU,GAAG,MAAMR,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCO,EAAE,CAACE,IAA1C,CAA5B;AACA,UAAMC,WAAW,GAAG,MAAMV,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCO,EAAE,CAACE,IAA1C,CAA7B;AAEA,UAAME,MAAM,GAAG,CACZ,IADY,EACN,aAAYH,UAAW,EADjB,EAEZ,IAFY,EAEN,cAAaE,WAAY,EAFnB,CAAf;;AAKA,QAAI;AACF,YAAMV,GAAG,CAAC,GAAGW,MAAJ,EAAa,aAAb,EAA2BJ,EAAE,CAACE,IAA9B,CAAT;AACD,KAFD,CAEE,OAAOG,KAAP,EAAc;AACd,YAAMZ,GAAG,CAAE,aAAF,EAAiB,SAAjB,CAAT;AACAC,MAAAA,QAAQ,CAACY,IAAT,CAAc,EACZ,GAAGN,EADS;AAEZO,QAAAA,MAAM,EAAG,oBAAmBd,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBE,MAAO,YAAWM,KAAK,CAACG,OAAQ;AAFpE,OAAd;AAID;AACF;;AAED,QAAMf,GAAG,CAAE,UAAF,EAAaA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBC,UAAjC,CAAT;AACA,QAAML,GAAG,CAAE,OAAF,EAAW,QAAX,EAAqB,QAAOA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAA3D,CAAT;AACA,QAAML,GAAG,CAAE,QAAF,EAAY,IAAZ,EAAkB,QAAOA,GAAG,CAACG,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAAxD,CAAT;AAEA,SAAOJ,QAAP;AACD,CAnCD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {getAllQueuedPullRequests} = require(`./getAllQueuedPullRequests`);\nconst {isSynchronisedWithMaster} = require(`./isSynchronisedWithMaster`);\n\nexports.synchroniseWithMaster = async git => {\n  const canceled = [];\n  if (await isSynchronisedWithMaster(git))\n    return canceled;\n\n  const prs = await getAllQueuedPullRequests(git);\n\n  await git(`checkout`, `-b`, `temp/${git.config.branches.mergeQueue}`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, git.config.branches.master);\n\n  for (const pr of prs) {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, pr.hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, pr.hash);\n\n    const author = [\n      `-c`, `user.name=${authorName}`,\n      `-c`, `user.email=${authorEmail}`,\n    ];\n\n    try {\n      await git(...author, `cherry-pick`, pr.hash);\n    } catch (error) {\n      await git(`cherry-pick`, `--abort`);\n      canceled.push({\n        ...pr,\n        reason: `Rebase on top of ${git.config.branches.master} failed (${error.message})`,\n      });\n    }\n  }\n\n  await git(`checkout`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `temp/${git.config.branches.mergeQueue}`);\n  await git(`branch`, `-D`, `temp/${git.config.branches.mergeQueue}`);\n\n  return canceled;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578923008731
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/getAllQueuedPullRequests.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/getAllQueuedPullRequests.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/getAllQueuedPullRequests.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/getAllQueuedPullRequests.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "getAllQueuedPullRequests.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.getAllQueuedPullRequests = async (git, branch = git.config.branches.mergeQueue) => {\n  const prs = [];\n  const history = branch !== git.config.branches.master ? `${git.config.branches.master}..${branch}` : branch;\n  const output = await git(`log`, `--reverse`, `--grep=^\\\\[#[[:digit:]]\\\\+\\\\]`, history, `--pretty=format:%s%n%H`);\n  if (output.length === 0) return prs;\n  const lines = output.split(/\\n/);\n\n  for (let t = 0; t < lines.length; t += 2) {\n    const oneline = lines[t];\n    const hash = lines[t + 1]; // The first number in the title is the PR number\n\n    const [, numberStr, title] = oneline.match(/^\\[#(\\d+)\\] (.*)/);\n    const number = parseInt(numberStr, 10);\n    prs.push({\n      number,\n      title,\n      hash\n    });\n  }\n\n  return prs;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEFsbFF1ZXVlZFB1bGxSZXF1ZXN0cy5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiZ2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzIiwiZ2l0IiwiYnJhbmNoIiwiY29uZmlnIiwiYnJhbmNoZXMiLCJtZXJnZVF1ZXVlIiwicHJzIiwiaGlzdG9yeSIsIm1hc3RlciIsIm91dHB1dCIsImxlbmd0aCIsImxpbmVzIiwic3BsaXQiLCJ0Iiwib25lbGluZSIsImhhc2giLCJudW1iZXJTdHIiLCJ0aXRsZSIsIm1hdGNoIiwibnVtYmVyIiwicGFyc2VJbnQiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFNQUEsT0FBTyxDQUFDQyx3QkFBUixHQUFtQyxPQUFPQyxHQUFQLEVBQVlDLE1BQU0sR0FBR0QsR0FBRyxDQUFDRSxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLFVBQXpDLEtBQXdEO0FBQ3pGLFFBQU1DLEdBQUcsR0FBRyxFQUFaO0FBRUEsUUFBTUMsT0FBTyxHQUFHTCxNQUFNLEtBQUtELEdBQUcsQ0FBQ0UsTUFBSixDQUFXQyxRQUFYLENBQW9CSSxNQUEvQixHQUNYLEdBQUVQLEdBQUcsQ0FBQ0UsTUFBSixDQUFXQyxRQUFYLENBQW9CSSxNQUFPLEtBQUlOLE1BQU8sRUFEN0IsR0FFWkEsTUFGSjtBQUlBLFFBQU1PLE1BQU0sR0FBRyxNQUFNUixHQUFHLENBQUUsS0FBRixFQUFTLFdBQVQsRUFBc0IsK0JBQXRCLEVBQXNETSxPQUF0RCxFQUFnRSx3QkFBaEUsQ0FBeEI7QUFDQSxNQUFJRSxNQUFNLENBQUNDLE1BQVAsS0FBa0IsQ0FBdEIsRUFDRSxPQUFPSixHQUFQO0FBRUYsUUFBTUssS0FBSyxHQUFHRixNQUFNLENBQUNHLEtBQVAsQ0FBYSxJQUFiLENBQWQ7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixLQUFLLENBQUNELE1BQTFCLEVBQWtDRyxDQUFDLElBQUksQ0FBdkMsRUFBMEM7QUFDeEMsVUFBTUMsT0FBTyxHQUFHSCxLQUFLLENBQUNFLENBQUQsQ0FBckI7QUFDQSxVQUFNRSxJQUFJLEdBQUdKLEtBQUssQ0FBQ0UsQ0FBQyxHQUFHLENBQUwsQ0FBbEIsQ0FGd0MsQ0FJeEM7O0FBQ0EsVUFBTSxHQUFHRyxTQUFILEVBQWNDLEtBQWQsSUFBdUJILE9BQU8sQ0FBQ0ksS0FBUixDQUFjLGtCQUFkLENBQTdCO0FBQ0EsVUFBTUMsTUFBTSxHQUFHQyxRQUFRLENBQUNKLFNBQUQsRUFBWSxFQUFaLENBQXZCO0FBRUFWLElBQUFBLEdBQUcsQ0FBQ2UsSUFBSixDQUFTO0FBQUNGLE1BQUFBLE1BQUQ7QUFBU0YsTUFBQUEsS0FBVDtBQUFnQkYsTUFBQUE7QUFBaEIsS0FBVDtBQUNEOztBQUVELFNBQU9ULEdBQVA7QUFDRCxDQXhCRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmV4cG9ydHMuZ2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzID0gYXN5bmMgKGdpdCwgYnJhbmNoID0gZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlKSA9PiB7XG4gIGNvbnN0IHBycyA9IFtdO1xuXG4gIGNvbnN0IGhpc3RvcnkgPSBicmFuY2ggIT09IGdpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyXG4gICAgPyBgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn0uLiR7YnJhbmNofWBcbiAgICA6IGJyYW5jaDtcblxuICBjb25zdCBvdXRwdXQgPSBhd2FpdCBnaXQoYGxvZ2AsIGAtLXJldmVyc2VgLCBgLS1ncmVwPV5cXFxcWyNbWzpkaWdpdDpdXVxcXFwrXFxcXF1gLCBoaXN0b3J5LCBgLS1wcmV0dHk9Zm9ybWF0OiVzJW4lSGApO1xuICBpZiAob3V0cHV0Lmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gcHJzO1xuXG4gIGNvbnN0IGxpbmVzID0gb3V0cHV0LnNwbGl0KC9cXG4vKTtcbiAgZm9yIChsZXQgdCA9IDA7IHQgPCBsaW5lcy5sZW5ndGg7IHQgKz0gMikge1xuICAgIGNvbnN0IG9uZWxpbmUgPSBsaW5lc1t0XTtcbiAgICBjb25zdCBoYXNoID0gbGluZXNbdCArIDFdO1xuXG4gICAgLy8gVGhlIGZpcnN0IG51bWJlciBpbiB0aGUgdGl0bGUgaXMgdGhlIFBSIG51bWJlclxuICAgIGNvbnN0IFssIG51bWJlclN0ciwgdGl0bGVdID0gb25lbGluZS5tYXRjaCgvXlxcWyMoXFxkKylcXF0gKC4qKS8pO1xuICAgIGNvbnN0IG51bWJlciA9IHBhcnNlSW50KG51bWJlclN0ciwgMTApO1xuXG4gICAgcHJzLnB1c2goe251bWJlciwgdGl0bGUsIGhhc2h9KTtcbiAgfVxuXG4gIHJldHVybiBwcnM7XG59O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "getAllQueuedPullRequests.js"
      ],
      "names": [
        "exports",
        "getAllQueuedPullRequests",
        "git",
        "branch",
        "config",
        "branches",
        "mergeQueue",
        "prs",
        "history",
        "master",
        "output",
        "length",
        "lines",
        "split",
        "t",
        "oneline",
        "hash",
        "numberStr",
        "title",
        "match",
        "number",
        "parseInt",
        "push"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,wBAAR,GAAmC,OAAOC,GAAP,EAAYC,MAAM,GAAGD,GAAG,CAACE,MAAJ,CAAWC,QAAX,CAAoBC,UAAzC,KAAwD;AACzF,QAAMC,GAAG,GAAG,EAAZ;AAEA,QAAMC,OAAO,GAAGL,MAAM,KAAKD,GAAG,CAACE,MAAJ,CAAWC,QAAX,CAAoBI,MAA/B,GACX,GAAEP,GAAG,CAACE,MAAJ,CAAWC,QAAX,CAAoBI,MAAO,KAAIN,MAAO,EAD7B,GAEZA,MAFJ;AAIA,QAAMO,MAAM,GAAG,MAAMR,GAAG,CAAE,KAAF,EAAS,WAAT,EAAsB,+BAAtB,EAAsDM,OAAtD,EAAgE,wBAAhE,CAAxB;AACA,MAAIE,MAAM,CAACC,MAAP,KAAkB,CAAtB,EACE,OAAOJ,GAAP;AAEF,QAAMK,KAAK,GAAGF,MAAM,CAACG,KAAP,CAAa,IAAb,CAAd;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACD,MAA1B,EAAkCG,CAAC,IAAI,CAAvC,EAA0C;AACxC,UAAMC,OAAO,GAAGH,KAAK,CAACE,CAAD,CAArB;AACA,UAAME,IAAI,GAAGJ,KAAK,CAACE,CAAC,GAAG,CAAL,CAAlB,CAFwC,CAIxC;;AACA,UAAM,GAAGG,SAAH,EAAcC,KAAd,IAAuBH,OAAO,CAACI,KAAR,CAAc,kBAAd,CAA7B;AACA,UAAMC,MAAM,GAAGC,QAAQ,CAACJ,SAAD,EAAY,EAAZ,CAAvB;AAEAV,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAACF,MAAAA,MAAD;AAASF,MAAAA,KAAT;AAAgBF,MAAAA;AAAhB,KAAT;AACD;;AAED,SAAOT,GAAP;AACD,CAxBD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.getAllQueuedPullRequests = async (git, branch = git.config.branches.mergeQueue) => {\n  const prs = [];\n\n  const history = branch !== git.config.branches.master\n    ? `${git.config.branches.master}..${branch}`\n    : branch;\n\n  const output = await git(`log`, `--reverse`, `--grep=^\\\\[#[[:digit:]]\\\\+\\\\]`, history, `--pretty=format:%s%n%H`);\n  if (output.length === 0)\n    return prs;\n\n  const lines = output.split(/\\n/);\n  for (let t = 0; t < lines.length; t += 2) {\n    const oneline = lines[t];\n    const hash = lines[t + 1];\n\n    // The first number in the title is the PR number\n    const [, numberStr, title] = oneline.match(/^\\[#(\\d+)\\] (.*)/);\n    const number = parseInt(numberStr, 10);\n\n    prs.push({number, title, hash});\n  }\n\n  return prs;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567899
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/isSynchronisedWithMaster.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/isSynchronisedWithMaster.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/isSynchronisedWithMaster.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/isSynchronisedWithMaster.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "isSynchronisedWithMaster.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.isSynchronisedWithMaster = async git => {\n  return Number((await git(`rev-list`, `--count`, `${git.config.branches.mergeQueue}..${git.config.branches.master}`))) === 0;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlzU3luY2hyb25pc2VkV2l0aE1hc3Rlci5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiaXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyIiwiZ2l0IiwiTnVtYmVyIiwiY29uZmlnIiwiYnJhbmNoZXMiLCJtZXJnZVF1ZXVlIiwibWFzdGVyIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFNQUEsT0FBTyxDQUFDQyx3QkFBUixHQUFtQyxNQUFNQyxHQUFOLElBQWE7QUFDOUMsU0FBT0MsTUFBTSxFQUFDLE1BQU1ELEdBQUcsQ0FBRSxVQUFGLEVBQWMsU0FBZCxFQUF5QixHQUFFQSxHQUFHLENBQUNFLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBVyxLQUFJSixHQUFHLENBQUNFLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkUsTUFBTyxFQUF6RixDQUFWLEVBQU4sS0FBaUgsQ0FBeEg7QUFDRCxDQUZEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMvZ2l0Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmxlc3MgZXhwbGljaXRseSBzdGF0ZWQgb3RoZXJ3aXNlIGFsbCBmaWxlcyBpbiB0aGlzIHJlcG9zaXRvcnkgYXJlIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqXG4gKiBUaGlzIHByb2R1Y3QgaW5jbHVkZXMgc29mdHdhcmUgZGV2ZWxvcGVkIGF0IERhdGFkb2cgKGh0dHBzOi8vd3d3LmRhdGFkb2docS5jb20vKS5cbiAqIENvcHlyaWdodCAoYykgMjAyMC1QcmVzZW50IERhdGFkb2csIEluYy5cbiAqL1xuZXhwb3J0cy5pc1N5bmNocm9uaXNlZFdpdGhNYXN0ZXIgPSBhc3luYyBnaXQgPT4ge1xuICByZXR1cm4gTnVtYmVyKGF3YWl0IGdpdChgcmV2LWxpc3RgLCBgLS1jb3VudGAsIGAke2dpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZX0uLiR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tYXN0ZXJ9YCkpID09PSAwO1xufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "isSynchronisedWithMaster.js"
      ],
      "names": [
        "exports",
        "isSynchronisedWithMaster",
        "git",
        "Number",
        "config",
        "branches",
        "mergeQueue",
        "master"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,wBAAR,GAAmC,MAAMC,GAAN,IAAa;AAC9C,SAAOC,MAAM,EAAC,MAAMD,GAAG,CAAE,UAAF,EAAc,SAAd,EAAyB,GAAEA,GAAG,CAACE,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,KAAIJ,GAAG,CAACE,MAAJ,CAAWC,QAAX,CAAoBE,MAAO,EAAzF,CAAV,EAAN,KAAiH,CAAxH;AACD,CAFD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.isSynchronisedWithMaster = async git => {\n  return Number(await git(`rev-list`, `--count`, `${git.config.branches.mergeQueue}..${git.config.branches.master}`)) === 0;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567900
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/commands\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/commands/SyncAgainstQueue.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/commands/SyncAgainstQueue.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/commands/SyncAgainstQueue.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/commands/SyncAgainstQueue.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
        "sourceFileName": "SyncAgainstQueue.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  Command\n} = require(`clipanion`);\n\nconst {\n  clearBranches\n} = require(`../git/clearBranches`);\n\nconst {\n  getAllQueuedPullRequests\n} = require(`../git/getAllQueuedPullRequests`);\n\nconst {\n  isSynchronisedWithMaster\n} = require(`../git/isSynchronisedWithMaster`);\n\nconst {\n  openRepository\n} = require(`../git/openRepository`);\n\nconst {\n  removeFromMergeQueue\n} = require(`../git/removeFromMergeQueue`);\n\nconst {\n  retryIfStale\n} = require(`../git/retryIfStale`);\n\nconst {\n  setBranchToCommit\n} = require(`../git/setBranchToCommit`);\n\nconst {\n  normalizeStatusMap\n} = require(`../normalizeStatusMap`);\n\nconst {\n  validateStatusMap\n} = require(`../validateStatusMap`);\n\nclass SyncAgainstQueue extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout\n    });\n    const cancelled = await retryIfStale(async () => {\n      let cancelled = [];\n      await clearBranches(git, git.config.branches.master, git.config.branches.mergeQueue);\n      this.context.stdout.write(`Fetching the head for master and the merge queue...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.master}:${git.config.branches.master}`, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`); // There is a chance that this workflow is executed right after\n      // something has been pushed on master but before the\n      // SyncAgainstMaster job has been triggered. Without this check\n      // we would risk overriding master with the merge queue head,\n      // forgetting any ninja-landed commit.\n\n      if (!(await isSynchronisedWithMaster(git))) {\n        this.context.stdout.write(`Branch ${git.config.branches.master} is ahead of the merge queue; bailout\\n`);\n        return cancelled;\n      }\n\n      const prs = await getAllQueuedPullRequests(git);\n\n      if (prs.length === 0) {\n        this.context.stdout.write(`No PRs queued; bailout\\n`);\n        return cancelled;\n      }\n\n      const prsWithStatus = await this.context.driver.fetchCommitStatus(git, prs);\n\n      for (const pr of prsWithStatus) {\n        const originalStatusMap = pr.statusMap;\n        pr.statusMap = await normalizeStatusMap(git, pr.statusMap);\n        pr.status = validateStatusMap(pr.statusMap);\n        this.context.stdout.write(`#${pr.number} - ${pr.title} - ${pr.status}\\n`);\n        this.context.stdout.write(`${require(`util`).inspect(originalStatusMap)}\\n`);\n      }\n\n      let okCount = 0;\n\n      while (okCount < prsWithStatus.length && prsWithStatus[okCount].status === true) okCount += 1; // If the merge queue contains green commits, then we can move\n      // them into master. Since we have previously checked that\n      // master and merge-queue are in sync, we don't risk overriding\n      // master by accident (because we'll push w/ force-with-lease).\n\n\n      if (okCount > 0) {\n        this.context.stdout.write(`Synchronizing ${git.config.branches.master} to ${prsWithStatus[okCount - 1].number}`);\n        await setBranchToCommit(git, git.config.branches.master, prsWithStatus[okCount - 1].hash);\n      } // If a commit adjacent to a green commit is red, is probably\n      // means something is wrong with it. We must remove it from\n      // the queue in the hope that the following commits will be\n      // green (all the tests will unfortunately have to run anew).\n\n\n      if (okCount < prsWithStatus.length && prsWithStatus[okCount].status === false) {\n        this.context.stdout.write(`Removing ${prsWithStatus[okCount].number}\\n`);\n        cancelled = await removeFromMergeQueue(git, prsWithStatus[okCount].number, {\n          reason: `Test results are red`\n        });\n      }\n\n      if (okCount > 0 || cancelled.length > 0) {\n        this.context.stdout.write(`Done - pushing the changes!\\n`);\n        await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.master, git.config.branches.mergeQueue);\n      }\n\n      return cancelled;\n    });\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n\n}\n\nSyncAgainstQueue.addPath(`sync`, `against`, `queue`);\nmodule.exports = SyncAgainstQueue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN5bmNBZ2FpbnN0UXVldWUuanMiXSwibmFtZXMiOlsiQ29tbWFuZCIsInJlcXVpcmUiLCJjbGVhckJyYW5jaGVzIiwiZ2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzIiwiaXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyIiwib3BlblJlcG9zaXRvcnkiLCJyZW1vdmVGcm9tTWVyZ2VRdWV1ZSIsInJldHJ5SWZTdGFsZSIsInNldEJyYW5jaFRvQ29tbWl0Iiwibm9ybWFsaXplU3RhdHVzTWFwIiwidmFsaWRhdGVTdGF0dXNNYXAiLCJTeW5jQWdhaW5zdFF1ZXVlIiwiZXhlY3V0ZSIsImdpdCIsImNvbnRleHQiLCJjd2QiLCJzdGRvdXQiLCJjYW5jZWxsZWQiLCJjb25maWciLCJicmFuY2hlcyIsIm1hc3RlciIsIm1lcmdlUXVldWUiLCJ3cml0ZSIsImRyaXZlciIsImZldGNoRnJvbU9yaWdpbiIsInBycyIsImxlbmd0aCIsInByc1dpdGhTdGF0dXMiLCJmZXRjaENvbW1pdFN0YXR1cyIsInByIiwib3JpZ2luYWxTdGF0dXNNYXAiLCJzdGF0dXNNYXAiLCJzdGF0dXMiLCJudW1iZXIiLCJ0aXRsZSIsImluc3BlY3QiLCJva0NvdW50IiwiaGFzaCIsInJlYXNvbiIsInB1c2hUb09yaWdpbiIsInNlbmRDYW5jZWxOb3RpZmljYXRpb25zIiwiYWRkUGF0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQU1BLE1BQU07QUFBQ0EsRUFBQUE7QUFBRCxJQUFZQyxPQUFPLENBQUUsV0FBRixDQUF6Qjs7QUFFQSxNQUFNO0FBQUNDLEVBQUFBO0FBQUQsSUFBa0JELE9BQU8sQ0FBRSxzQkFBRixDQUEvQjs7QUFDQSxNQUFNO0FBQUNFLEVBQUFBO0FBQUQsSUFBNkJGLE9BQU8sQ0FBRSxpQ0FBRixDQUExQzs7QUFDQSxNQUFNO0FBQUNHLEVBQUFBO0FBQUQsSUFBNkJILE9BQU8sQ0FBRSxpQ0FBRixDQUExQzs7QUFDQSxNQUFNO0FBQUNJLEVB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QUFBQSxTQUFTLEdBQUcsTUFBTVgsb0JBQW9CLENBQUNPLEdBQUQsRUFBTWMsYUFBYSxDQUFDUyxPQUFELENBQWIsQ0FBdUJILE1BQTdCLEVBQXFDO0FBQUNLLFVBQUFBLE1BQU0sRUFBRztBQUFWLFNBQXJDLENBQXRDO0FBQ0Q7O0FBRUQsVUFBSUYsT0FBTyxHQUFHLENBQVYsSUFBZW5CLFNBQVMsQ0FBQ1MsTUFBVixHQUFtQixDQUF0QyxFQUF5QztBQUN2QyxhQUFLWixPQUFMLENBQWFFLE1BQWIsQ0FBb0JNLEtBQXBCLENBQTJCLCtCQUEzQjtBQUNBLGNBQU0sS0FBS1IsT0FBTCxDQUFhUyxNQUFiLENBQW9CZ0IsWUFBcEIsQ0FBaUMxQixHQUFqQyxFQUF1QyxVQUF2QyxFQUFtRCxvQkFBbkQsRUFBd0VBLEdBQUcsQ0FBQ0ssTUFBSixDQUFXQyxRQUFYLENBQW9CQyxNQUE1RixFQUFvR1AsR0FBRyxDQUFDSyxNQUFKLENBQVdDLFFBQVgsQ0FBb0JFLFVBQXhILENBQU47QUFDRDs7QUFFRCxhQUFPSixTQUFQO0FBQ0QsS0FuRW1DLENBQXBDO0FBcUVBLFVBQU0sS0FBS0gsT0FBTCxDQUFhUyxNQUFiLENBQW9CaUIsdUJBQXBCLENBQTRDdkIsU0FBNUMsQ0FBTjtBQUNEOztBQTVFb0M7O0FBK0V2Q04sZ0JBQWdCLENBQUM4QixPQUFqQixDQUEwQixNQUExQixFQUFrQyxTQUFsQyxFQUE2QyxPQUE3QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJoQyxnQkFBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL21hZWwubmlzb24vY2hlbmlsbGUvc291cmNlcy9jb21tYW5kcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmNvbnN0IHtDb21tYW5kfSA9IHJlcXVpcmUoYGNsaXBhbmlvbmApO1xuXG5jb25zdCB7Y2xlYXJCcmFuY2hlc30gPSByZXF1aXJlKGAuLi9naXQvY2xlYXJCcmFuY2hlc2ApO1xuY29uc3Qge2dldEFsbFF1ZXVlZFB1bGxSZXF1ZXN0c30gPSByZXF1aXJlKGAuLi9naXQvZ2V0QWxsUXVldWVkUHVsbFJlcXVlc3RzYCk7XG5jb25zdCB7aXNTeW5jaHJvbmlzZWRXaXRoTWFzdGVyfSA9IHJlcXVpcmUoYC4uL2dpdC9pc1N5bmNocm9uaXNlZFdpdGhNYXN0ZXJgKTtcbmNvbnN0IHtvcGVuUmVwb3NpdG9yeX0gPSByZXF1aXJlKGAuLi9naXQvb3BlblJlcG9zaXRvcnlgKTtcbmNvbnN0IHtyZW1vdmVGcm9tTWVyZ2VRdWV1ZX0gPSByZXF1aXJlKGAuLi9naXQvcmVtb3ZlRnJvbU1lcmdlUXVldWVgKTtcbmNvbnN0IHtyZXRyeUlmU3RhbGV9ID0gcmVxdWlyZShgLi4vZ2l0L3JldHJ5SWZTdGFsZWApO1xuY29uc3Qge3NldEJyYW5jaFRvQ29tbWl0fSA9IHJlcXVpcmUoYC4uL2dpdC9zZXRCcmFuY2hUb0NvbW1pdGApXG5cbmNvbnN0IHtub3JtYWxpemVTdGF0dXNNYXB9ID0gcmVxdWlyZShgLi4vbm9ybWFsaXplU3RhdHVzTWFwYCk7XG5jb25zdCB7dmFsaWRhdGVTdGF0dXNNYXB9ID0gcmVxdWlyZShgLi4vdmFsaWRhdGVTdGF0dXNNYXBgKTtcblxuY2xhc3MgU3luY0FnYWluc3RRdWV1ZSBleHRlbmRzIENvbW1hbmQge1xuICBhc3luYyBleGVjdXRlKCkge1xuICAgIGNvbnN0IGdpdCA9IGF3YWl0IG9wZW5SZXBvc2l0b3J5KHRoaXMuY29udGV4dC5jd2QsIHtcbiAgICAgIHN0ZG91dDogdGhpcy5jb250ZXh0LnN0ZG91dCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNhbmNlbGxlZCA9IGF3YWl0IHJldHJ5SWZTdGFsZShhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY2FuY2VsbGVkID0gW107XG5cbiAgICAgIGF3YWl0IGNsZWFyQnJhbmNoZXMoZ2l0LCBnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3RlciwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlKTtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgRmV0Y2hpbmcgdGhlIGhlYWQgZm9yIG1hc3RlciBhbmQgdGhlIG1lcmdlIHF1ZXVlLi4uXFxuYCk7XG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQuZHJpdmVyLmZldGNoRnJvbU9yaWdpbihnaXQsIGAke2dpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyfToke2dpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyfWAsIGAke2dpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZX06JHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9YCk7XG5cbiAgICAgIC8vIFRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgdGhpcyB3b3JrZmxvdyBpcyBleGVjdXRlZCByaWdodCBhZnRlclxuICAgICAgLy8gc29tZXRoaW5nIGhhcyBiZWVuIHB1c2hlZCBvbiBtYXN0ZXIgYnV0IGJlZm9yZSB0aGVcbiAgICAgIC8vIFN5bmNBZ2FpbnN0TWFzdGVyIGpvYiBoYXMgYmVlbiB0cmlnZ2VyZWQuIFdpdGhvdXQgdGhpcyBjaGVja1xuICAgICAgLy8gd2Ugd291bGQgcmlzayBvdmVycmlkaW5nIG1hc3RlciB3aXRoIHRoZSBtZXJnZSBxdWV1ZSBoZWFkLFxuICAgICAgLy8gZm9yZ2V0dGluZyBhbnkgbmluamEtbGFuZGVkIGNvbW1pdC5cblxuICAgICAgaWYgKCFhd2FpdCBpc1N5bmNocm9uaXNlZFdpdGhNYXN0ZXIoZ2l0KSkge1xuICAgICAgICB0aGlzLmNvbnRleHQuc3Rkb3V0LndyaXRlKGBCcmFuY2ggJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn0gaXMgYWhlYWQgb2YgdGhlIG1lcmdlIHF1ZXVlOyBiYWlsb3V0XFxuYCk7XG4gICAgICAgIHJldHVybiBjYW5jZWxsZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBycyA9IGF3YWl0IGdldEFsbFF1ZXVlZFB1bGxSZXF1ZXN0cyhnaXQpO1xuICAgICAgaWYgKHBycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgTm8gUFJzIHF1ZXVlZDsgYmFpbG91dFxcbmApO1xuICAgICAgICByZXR1cm4gY2FuY2VsbGVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcnNXaXRoU3RhdHVzID0gYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5mZXRjaENvbW1pdFN0YXR1cyhnaXQsIHBycyk7XG5cbiAgICAgIGZvciAoY29uc3QgcHIgb2YgcHJzV2l0aFN0YXR1cykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFN0YXR1c01hcCA9IHByLnN0YXR1c01hcDtcblxuICAgICAgICBwci5zdGF0dXNNYXAgPSBhd2FpdCBub3JtYWxpemVTdGF0dXNNYXAoZ2l0LCBwci5zdGF0dXNNYXApO1xuICAgICAgICBwci5zdGF0dXMgPSB2YWxpZGF0ZVN0YXR1c01hcChwci5zdGF0dXNNYXApO1xuXG4gICAgICAgIHRoaXMuY29udGV4dC5zdGRvdXQud3JpdGUoYCMke3ByLm51bWJlcn0gLSAke3ByLnRpdGxlfSAtICR7cHIuc3RhdHVzfVxcbmApO1xuICAgICAgICB0aGlzLmNvbnRleHQuc3Rkb3V0LndyaXRlKGAke3JlcXVpcmUoYHV0aWxgKS5pbnNwZWN0KG9yaWdpbmFsU3RhdHVzTWFwKX1cXG5gKTtcbiAgICAgIH1cblxuICAgICAgbGV0IG9rQ291bnQgPSAwO1xuICAgICAgd2hpbGUgKG9rQ291bnQgPCBwcnNXaXRoU3RhdHVzLmxlbmd0aCAmJiBwcnNXaXRoU3RhdHVzW29rQ291bnRdLnN0YXR1cyA9PT0gdHJ1ZSlcbiAgICAgICAgb2tDb3VudCArPSAxO1xuXG4gICAgICAvLyBJZiB0aGUgbWVyZ2UgcXVldWUgY29udGFpbnMgZ3JlZW4gY29tbWl0cywgdGhlbiB3ZSBjYW4gbW92ZVxuICAgICAgLy8gdGhlbSBpbnRvIG1hc3Rlci4gU2luY2Ugd2UgaGF2ZSBwcmV2aW91c2x5IGNoZWNrZWQgdGhhdFxuICAgICAgLy8gbWFzdGVyIGFuZCBtZXJnZS1xdWV1ZSBhcmUgaW4gc3luYywgd2UgZG9uJ3QgcmlzayBvdmVycmlkaW5nXG4gICAgICAvLyBtYXN0ZXIgYnkgYWNjaWRlbnQgKGJlY2F1c2Ugd2UnbGwgcHVzaCB3LyBmb3JjZS13aXRoLWxlYXNlKS5cblxuICAgICAgaWYgKG9rQ291bnQgPiAwKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5zdGRvdXQud3JpdGUoYFN5bmNocm9uaXppbmcgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1hc3Rlcn0gdG8gJHtwcnNXaXRoU3RhdHVzW29rQ291bnQgLSAxXS5udW1iZXJ9YCk7XG4gICAgICAgIGF3YWl0IHNldEJyYW5jaFRvQ29tbWl0KGdpdCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tYXN0ZXIsIHByc1dpdGhTdGF0dXNbb2tDb3VudCAtIDFdLmhhc2gpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIGNvbW1pdCBhZGphY2VudCB0byBhIGdyZWVuIGNvbW1pdCBpcyByZWQsIGlzIHByb2JhYmx5XG4gICAgICAvLyBtZWFucyBzb21ldGhpbmcgaXMgd3Jvbmcgd2l0aCBpdC4gV2UgbXVzdCByZW1vdmUgaXQgZnJvbVxuICAgICAgLy8gdGhlIHF1ZXVlIGluIHRoZSBob3BlIHRoYXQgdGhlIGZvbGxvd2luZyBjb21taXRzIHdpbGwgYmVcbiAgICAgIC8vIGdyZWVuIChhbGwgdGhlIHRlc3RzIHdpbGwgdW5mb3J0dW5hdGVseSBoYXZlIHRvIHJ1biBhbmV3KS5cblxuICAgICAgaWYgKG9rQ291bnQgPCBwcnNXaXRoU3RhdHVzLmxlbmd0aCAmJiBwcnNXaXRoU3RhdHVzW29rQ291bnRdLnN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgUmVtb3ZpbmcgJHtwcnNXaXRoU3RhdHVzW29rQ291bnRdLm51bWJlcn1cXG5gKTtcbiAgICAgICAgY2FuY2VsbGVkID0gYXdhaXQgcmVtb3ZlRnJvbU1lcmdlUXVldWUoZ2l0LCBwcnNXaXRoU3RhdHVzW29rQ291bnRdLm51bWJlciwge3JlYXNvbjogYFRlc3QgcmVzdWx0cyBhcmUgcmVkYH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAob2tDb3VudCA+IDAgfHwgY2FuY2VsbGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgRG9uZSAtIHB1c2hpbmcgdGhlIGNoYW5nZXMhXFxuYCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kcml2ZXIucHVzaFRvT3JpZ2luKGdpdCwgYC0tYXRvbWljYCwgYC0tZm9yY2Utd2l0aC1sZWFzZWAsIGdpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FuY2VsbGVkO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5zZW5kQ2FuY2VsTm90aWZpY2F0aW9ucyhjYW5jZWxsZWQpO1xuICB9XG59XG5cblN5bmNBZ2FpbnN0UXVldWUuYWRkUGF0aChgc3luY2AsIGBhZ2FpbnN0YCwgYHF1ZXVlYCk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3luY0FnYWluc3RRdWV1ZTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "SyncAgainstQueue.js"
      ],
      "names": [
        "Command",
        "require",
        "clearBranches",
        "getAllQueuedPullRequests",
        "isSynchronisedWithMaster",
        "openRepository",
        "removeFromMergeQueue",
        "retryIfStale",
        "setBranchToCommit",
        "normalizeStatusMap",
        "validateStatusMap",
        "SyncAgainstQueue",
        "execute",
        "git",
        "context",
        "cwd",
        "stdout",
        "cancelled",
        "config",
        "branches",
        "master",
        "mergeQueue",
        "write",
        "driver",
        "fetchFromOrigin",
        "prs",
        "length",
        "prsWithStatus",
        "fetchCommitStatus",
        "pr",
        "originalStatusMap",
        "statusMap",
        "status",
        "number",
        "title",
        "inspect",
        "okCount",
        "hash",
        "reason",
        "pushToOrigin",
        "sendCancelNotifications",
        "addPath",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {Command} = require(`clipanion`);\n\nconst {clearBranches} = require(`../git/clearBranches`);\nconst {getAllQueuedPullRequests} = require(`../git/getAllQueuedPullRequests`);\nconst {isSynchronisedWithMaster} = require(`../git/isSynchronisedWithMaster`);\nconst {openRepository} = require(`../git/openRepository`);\nconst {removeFromMergeQueue} = require(`../git/removeFromMergeQueue`);\nconst {retryIfStale} = require(`../git/retryIfStale`);\nconst {setBranchToCommit} = require(`../git/setBranchToCommit`)\n\nconst {normalizeStatusMap} = require(`../normalizeStatusMap`);\nconst {validateStatusMap} = require(`../validateStatusMap`);\n\nclass SyncAgainstQueue extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout,\n    });\n\n    const cancelled = await retryIfStale(async () => {\n      let cancelled = [];\n\n      await clearBranches(git, git.config.branches.master, git.config.branches.mergeQueue);\n\n      this.context.stdout.write(`Fetching the head for master and the merge queue...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.master}:${git.config.branches.master}`, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`);\n\n      // There is a chance that this workflow is executed right after\n      // something has been pushed on master but before the\n      // SyncAgainstMaster job has been triggered. Without this check\n      // we would risk overriding master with the merge queue head,\n      // forgetting any ninja-landed commit.\n\n      if (!await isSynchronisedWithMaster(git)) {\n        this.context.stdout.write(`Branch ${git.config.branches.master} is ahead of the merge queue; bailout\\n`);\n        return cancelled;\n      }\n\n      const prs = await getAllQueuedPullRequests(git);\n      if (prs.length === 0) {\n        this.context.stdout.write(`No PRs queued; bailout\\n`);\n        return cancelled;\n      }\n\n      const prsWithStatus = await this.context.driver.fetchCommitStatus(git, prs);\n\n      for (const pr of prsWithStatus) {\n        const originalStatusMap = pr.statusMap;\n\n        pr.statusMap = await normalizeStatusMap(git, pr.statusMap);\n        pr.status = validateStatusMap(pr.statusMap);\n\n        this.context.stdout.write(`#${pr.number} - ${pr.title} - ${pr.status}\\n`);\n        this.context.stdout.write(`${require(`util`).inspect(originalStatusMap)}\\n`);\n      }\n\n      let okCount = 0;\n      while (okCount < prsWithStatus.length && prsWithStatus[okCount].status === true)\n        okCount += 1;\n\n      // If the merge queue contains green commits, then we can move\n      // them into master. Since we have previously checked that\n      // master and merge-queue are in sync, we don't risk overriding\n      // master by accident (because we'll push w/ force-with-lease).\n\n      if (okCount > 0) {\n        this.context.stdout.write(`Synchronizing ${git.config.branches.master} to ${prsWithStatus[okCount - 1].number}`);\n        await setBranchToCommit(git, git.config.branches.master, prsWithStatus[okCount - 1].hash);\n      }\n\n      // If a commit adjacent to a green commit is red, is probably\n      // means something is wrong with it. We must remove it from\n      // the queue in the hope that the following commits will be\n      // green (all the tests will unfortunately have to run anew).\n\n      if (okCount < prsWithStatus.length && prsWithStatus[okCount].status === false) {\n        this.context.stdout.write(`Removing ${prsWithStatus[okCount].number}\\n`);\n        cancelled = await removeFromMergeQueue(git, prsWithStatus[okCount].number, {reason: `Test results are red`});\n      }\n\n      if (okCount > 0 || cancelled.length > 0) {\n        this.context.stdout.write(`Done - pushing the changes!\\n`);\n        await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.master, git.config.branches.mergeQueue);\n      }\n\n      return cancelled;\n    });\n\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n}\n\nSyncAgainstQueue.addPath(`sync`, `against`, `queue`);\n\nmodule.exports = SyncAgainstQueue;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567899
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/removeFromMergeQueue.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/removeFromMergeQueue.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/removeFromMergeQueue.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/removeFromMergeQueue.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "removeFromMergeQueue.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  getAllQueuedPullRequests\n} = require(`./getAllQueuedPullRequests`);\n\nexports.removeFromMergeQueue = async (git, removedPr, {\n  reason = `n/a`\n} = {}) => {\n  const cancelled = [];\n  const prs = await getAllQueuedPullRequests(git);\n  const killPoint = prs.findIndex(({\n    number\n  }) => number == removedPr);\n  if (killPoint === -1) return cancelled;\n  cancelled.push({ ...prs[killPoint],\n    reason\n  });\n  const {\n    hash\n  } = prs[killPoint];\n  await git(`checkout`, `-b`, `temp/${git.config.branches.mergeQueue}`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `${hash}^1`);\n\n  for (const pr of prs.slice(killPoint + 1)) {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, pr.hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, pr.hash);\n    const author = [`-c`, `user.name=${authorName}`, `-c`, `user.email=${authorEmail}`];\n\n    try {\n      await git(...author, `cherry-pick`, pr.hash);\n    } catch {\n      await git(`cherry-pick`, `--abort`);\n      cancelled.push({ ...pr,\n        reason: `Rebase on top of its new parent (${await git(`rev-parse`, `--short`, `HEAD`)}) failed`\n      });\n    }\n  }\n\n  await git(`checkout`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `temp/${git.config.branches.mergeQueue}`);\n  await git(`branch`, `-D`, `temp/${git.config.branches.mergeQueue}`);\n  return cancelled;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbW92ZUZyb21NZXJnZVF1ZXVlLmpzIl0sIm5hbWVzIjpbImdldEFsbFF1ZXVlZFB1bGxSZXF1ZXN0cyIsInJlcXVpcmUiLCJleHBvcnRzIiwicmVtb3ZlRnJvbU1lcmdlUXVldWUiLCJnaXQiLCJyZW1vdmVkUHIiLCJyZWFzb24iLCJjYW5jZWxsZWQiLCJwcnMiLCJraWxsUG9pbnQiLCJmaW5kSW5kZXgiLCJudW1iZXIiLCJwdXNoIiwiaGFzaCIsImNvbmZpZyIsImJyYW5jaGVzIiwibWVyZ2VRdWV1ZSIsInByIiwic2xpY2UiLCJhdXRob3JOYW1lIiwiYXV0aG9yRW1haWwiLCJhdXRob3IiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQU1BLE1BQU07QUFBQ0EsRUFBQUE7QUFBRCxJQUE2QkMsT0FBTyxDQUFFLDRCQUFGLENBQTFDOztBQUVBQyxPQUFPLENBQUNDLG9CQUFSLEdBQStCLE9BQU9DLEdBQVAsRUFBWUMsU0FBWixFQUF1QjtBQUFDQyxFQUFBQSxNQUFNLEdBQUk7QUFBWCxJQUFtQixFQUExQyxLQUFpRDtBQUM5RSxRQUFNQyxTQUFTLEdBQUcsRUFBbEI7QUFDQSxRQUFNQyxHQUFHLEdBQUcsTUFBTVIsd0JBQXdCLENBQUNJLEdBQUQsQ0FBMUM7QUFFQSxRQUFNSyxTQUFTLEdBQUdELEdBQUcsQ0FBQ0UsU0FBSixDQUFjLENBQUM7QUFBQ0MsSUFBQUE7QUFBRCxHQUFELEtBQWNBLE1BQU0sSUFBSU4sU0FBdEMsQ0FBbEI7QUFDQSxNQUFJSSxTQUFTLEtBQUssQ0FBQyxDQUFuQixFQUNFLE9BQU9GLFNBQVA7QUFFRkEsRUFBQUEsU0FBUyxDQUFDSyxJQUFWLENBQWUsRUFDYixHQUFHSixHQUFHLENBQUNDLFNBQUQsQ0FETztBQUViSCxJQUFBQTtBQUZhLEdBQWY7QUFLQSxRQUFNO0FBQUNPLElBQUFBO0FBQUQsTUFBU0wsR0FBRyxDQUFDQyxTQUFELENBQWxCO0FBRUEsUUFBTUwsR0FBRyxDQUFFLFVBQUYsRUFBYyxJQUFkLEVBQW9CLFFBQU9BLEdBQUcsQ0FBQ1UsTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUFXLEVBQTFELEVBQTZEWixHQUFHLENBQUNVLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBakYsQ0FBVDtBQUNBLFFBQU1aLEdBQUcsQ0FBRSxPQUFGLEVBQVcsUUFBWCxFQUFxQixHQUFFUyxJQUFLLElBQTVCLENBQVQ7O0FBRUEsT0FBSyxNQUFNSSxFQUFYLElBQWlCVCxHQUFHLENBQUNVLEtBQUosQ0FBVVQsU0FBUyxHQUFHLENBQXRCLENBQWpCLEVBQTJDO0FBQ3pDLFVBQU1VLFVBQVUsR0FBRyxNQUFNZixHQUFHLENBQUUsS0FBRixFQUFTLElBQVQsRUFBZSx1QkFBZixFQUF1Q2EsRUFBRSxDQUFDSixJQUExQyxDQUE1QjtBQUNBLFVBQU1PLFdBQVcsR0FBRyxNQUFNaEIsR0FBRyxDQUFFLEtBQUYsRUFBUyxJQUFULEVBQWUsdUJBQWYsRUFBdUNhLEVBQUUsQ0FBQ0osSUFBMUMsQ0FBN0I7QUFFQSxVQUFNUSxNQUFNLEdBQUcsQ0FDWixJQURZLEVBQ04sYUFBWUYsVUFBVyxFQURqQixFQUVaLElBRlksRUFFTixjQUFhQyxXQUFZLEVBRm5CLENBQWY7O0FBS0EsUUFBSTtBQUNGLFlBQU1oQixHQUFHLENBQUMsR0FBR2lCLE1BQUosRUFBYSxhQUFiLEVBQTJCSixFQUFFLENBQUNKLElBQTlCLENBQVQ7QUFDRCxLQUZELENBRUUsTUFBTTtBQUNOLFlBQU1ULEdBQUcsQ0FBRSxhQUFGLEVBQWlCLFNBQWpCLENBQVQ7QUFDQUcsTUFBQUEsU0FBUyxDQUFDSyxJQUFWLENBQWUsRUFDYixHQUFHSyxFQURVO0FBRWJYLFFBQUFBLE1BQU0sRUFBRyxvQ0FBbUMsTUFBTUYsR0FBRyxDQUFFLFdBQUYsRUFBZSxTQUFmLEVBQTBCLE1BQTFCLENBQWlDO0FBRnpFLE9BQWY7QUFJRDtBQUNGOztBQUVELFFBQU1BLEdBQUcsQ0FBRSxVQUFGLEVBQWFBLEdBQUcsQ0FBQ1UsTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUFqQyxDQUFUO0FBQ0EsUUFBTVosR0FBRyxDQUFFLE9BQUYsRUFBVyxRQUFYLEVBQXFCLFFBQU9BLEdBQUcsQ0FBQ1UsTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUFXLEVBQTNELENBQVQ7QUFDQSxRQUFNWixHQUFHLENBQUUsUUFBRixFQUFZLElBQVosRUFBa0IsUUFBT0EsR0FBRyxDQUFDVSxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLFVBQVcsRUFBeEQsQ0FBVDtBQUVBLFNBQU9ULFNBQVA7QUFDRCxDQTNDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmNvbnN0IHtnZXRBbGxRdWV1ZWRQdWxsUmVxdWVzdHN9ID0gcmVxdWlyZShgLi9nZXRBbGxRdWV1ZWRQdWxsUmVxdWVzdHNgKTtcblxuZXhwb3J0cy5yZW1vdmVGcm9tTWVyZ2VRdWV1ZSA9IGFzeW5jIChnaXQsIHJlbW92ZWRQciwge3JlYXNvbiA9IGBuL2FgfSA9IHt9KSA9PiB7XG4gIGNvbnN0IGNhbmNlbGxlZCA9IFtdO1xuICBjb25zdCBwcnMgPSBhd2FpdCBnZXRBbGxRdWV1ZWRQdWxsUmVxdWVzdHMoZ2l0KTtcblxuICBjb25zdCBraWxsUG9pbnQgPSBwcnMuZmluZEluZGV4KCh7bnVtYmVyfSkgPT4gbnVtYmVyID09IHJlbW92ZWRQcik7XG4gIGlmIChraWxsUG9pbnQgPT09IC0xKVxuICAgIHJldHVybiBjYW5jZWxsZWQ7XG5cbiAgY2FuY2VsbGVkLnB1c2goe1xuICAgIC4uLnByc1traWxsUG9pbnRdLFxuICAgIHJlYXNvbixcbiAgfSk7XG5cbiAgY29uc3Qge2hhc2h9ID0gcHJzW2tpbGxQb2ludF07XG5cbiAgYXdhaXQgZ2l0KGBjaGVja291dGAsIGAtYmAsIGB0ZW1wLyR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlfWAsIGdpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZSk7XG4gIGF3YWl0IGdpdChgcmVzZXRgLCBgLS1oYXJkYCwgYCR7aGFzaH1eMWApO1xuXG4gIGZvciAoY29uc3QgcHIgb2YgcHJzLnNsaWNlKGtpbGxQb2ludCArIDEpKSB7XG4gICAgY29uc3QgYXV0aG9yTmFtZSA9IGF3YWl0IGdpdChgbG9nYCwgYC0xYCwgYC0tcHJldHR5PWZvcm1hdDonJWFuJ2AsIHByLmhhc2gpO1xuICAgIGNvbnN0IGF1dGhvckVtYWlsID0gYXdhaXQgZ2l0KGBsb2dgLCBgLTFgLCBgLS1wcmV0dHk9Zm9ybWF0OiclYWUnYCwgcHIuaGFzaCk7XG5cbiAgICBjb25zdCBhdXRob3IgPSBbXG4gICAgICBgLWNgLCBgdXNlci5uYW1lPSR7YXV0aG9yTmFtZX1gLFxuICAgICAgYC1jYCwgYHVzZXIuZW1haWw9JHthdXRob3JFbWFpbH1gLFxuICAgIF07XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgZ2l0KC4uLmF1dGhvciwgYGNoZXJyeS1waWNrYCwgcHIuaGFzaCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBhd2FpdCBnaXQoYGNoZXJyeS1waWNrYCwgYC0tYWJvcnRgKTtcbiAgICAgIGNhbmNlbGxlZC5wdXNoKHtcbiAgICAgICAgLi4ucHIsXG4gICAgICAgIHJlYXNvbjogYFJlYmFzZSBvbiB0b3Agb2YgaXRzIG5ldyBwYXJlbnQgKCR7YXdhaXQgZ2l0KGByZXYtcGFyc2VgLCBgLS1zaG9ydGAsIGBIRUFEYCl9KSBmYWlsZWRgLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgYXdhaXQgZ2l0KGBjaGVja291dGAsIGdpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZSk7XG4gIGF3YWl0IGdpdChgcmVzZXRgLCBgLS1oYXJkYCwgYHRlbXAvJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9YCk7XG4gIGF3YWl0IGdpdChgYnJhbmNoYCwgYC1EYCwgYHRlbXAvJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9YCk7XG5cbiAgcmV0dXJuIGNhbmNlbGxlZDtcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "removeFromMergeQueue.js"
      ],
      "names": [
        "getAllQueuedPullRequests",
        "require",
        "exports",
        "removeFromMergeQueue",
        "git",
        "removedPr",
        "reason",
        "cancelled",
        "prs",
        "killPoint",
        "findIndex",
        "number",
        "push",
        "hash",
        "config",
        "branches",
        "mergeQueue",
        "pr",
        "slice",
        "authorName",
        "authorEmail",
        "author"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAA6BC,OAAO,CAAE,4BAAF,CAA1C;;AAEAC,OAAO,CAACC,oBAAR,GAA+B,OAAOC,GAAP,EAAYC,SAAZ,EAAuB;AAACC,EAAAA,MAAM,GAAI;AAAX,IAAmB,EAA1C,KAAiD;AAC9E,QAAMC,SAAS,GAAG,EAAlB;AACA,QAAMC,GAAG,GAAG,MAAMR,wBAAwB,CAACI,GAAD,CAA1C;AAEA,QAAMK,SAAS,GAAGD,GAAG,CAACE,SAAJ,CAAc,CAAC;AAACC,IAAAA;AAAD,GAAD,KAAcA,MAAM,IAAIN,SAAtC,CAAlB;AACA,MAAII,SAAS,KAAK,CAAC,CAAnB,EACE,OAAOF,SAAP;AAEFA,EAAAA,SAAS,CAACK,IAAV,CAAe,EACb,GAAGJ,GAAG,CAACC,SAAD,CADO;AAEbH,IAAAA;AAFa,GAAf;AAKA,QAAM;AAACO,IAAAA;AAAD,MAASL,GAAG,CAACC,SAAD,CAAlB;AAEA,QAAML,GAAG,CAAE,UAAF,EAAc,IAAd,EAAoB,QAAOA,GAAG,CAACU,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAA1D,EAA6DZ,GAAG,CAACU,MAAJ,CAAWC,QAAX,CAAoBC,UAAjF,CAAT;AACA,QAAMZ,GAAG,CAAE,OAAF,EAAW,QAAX,EAAqB,GAAES,IAAK,IAA5B,CAAT;;AAEA,OAAK,MAAMI,EAAX,IAAiBT,GAAG,CAACU,KAAJ,CAAUT,SAAS,GAAG,CAAtB,CAAjB,EAA2C;AACzC,UAAMU,UAAU,GAAG,MAAMf,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCa,EAAE,CAACJ,IAA1C,CAA5B;AACA,UAAMO,WAAW,GAAG,MAAMhB,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCa,EAAE,CAACJ,IAA1C,CAA7B;AAEA,UAAMQ,MAAM,GAAG,CACZ,IADY,EACN,aAAYF,UAAW,EADjB,EAEZ,IAFY,EAEN,cAAaC,WAAY,EAFnB,CAAf;;AAKA,QAAI;AACF,YAAMhB,GAAG,CAAC,GAAGiB,MAAJ,EAAa,aAAb,EAA2BJ,EAAE,CAACJ,IAA9B,CAAT;AACD,KAFD,CAEE,MAAM;AACN,YAAMT,GAAG,CAAE,aAAF,EAAiB,SAAjB,CAAT;AACAG,MAAAA,SAAS,CAACK,IAAV,CAAe,EACb,GAAGK,EADU;AAEbX,QAAAA,MAAM,EAAG,oCAAmC,MAAMF,GAAG,CAAE,WAAF,EAAe,SAAf,EAA0B,MAA1B,CAAiC;AAFzE,OAAf;AAID;AACF;;AAED,QAAMA,GAAG,CAAE,UAAF,EAAaA,GAAG,CAACU,MAAJ,CAAWC,QAAX,CAAoBC,UAAjC,CAAT;AACA,QAAMZ,GAAG,CAAE,OAAF,EAAW,QAAX,EAAqB,QAAOA,GAAG,CAACU,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAA3D,CAAT;AACA,QAAMZ,GAAG,CAAE,QAAF,EAAY,IAAZ,EAAkB,QAAOA,GAAG,CAACU,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,EAAxD,CAAT;AAEA,SAAOT,SAAP;AACD,CA3CD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {getAllQueuedPullRequests} = require(`./getAllQueuedPullRequests`);\n\nexports.removeFromMergeQueue = async (git, removedPr, {reason = `n/a`} = {}) => {\n  const cancelled = [];\n  const prs = await getAllQueuedPullRequests(git);\n\n  const killPoint = prs.findIndex(({number}) => number == removedPr);\n  if (killPoint === -1)\n    return cancelled;\n\n  cancelled.push({\n    ...prs[killPoint],\n    reason,\n  });\n\n  const {hash} = prs[killPoint];\n\n  await git(`checkout`, `-b`, `temp/${git.config.branches.mergeQueue}`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `${hash}^1`);\n\n  for (const pr of prs.slice(killPoint + 1)) {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, pr.hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, pr.hash);\n\n    const author = [\n      `-c`, `user.name=${authorName}`,\n      `-c`, `user.email=${authorEmail}`,\n    ];\n\n    try {\n      await git(...author, `cherry-pick`, pr.hash);\n    } catch {\n      await git(`cherry-pick`, `--abort`);\n      cancelled.push({\n        ...pr,\n        reason: `Rebase on top of its new parent (${await git(`rev-parse`, `--short`, `HEAD`)}) failed`,\n      });\n    }\n  }\n\n  await git(`checkout`, git.config.branches.mergeQueue);\n  await git(`reset`, `--hard`, `temp/${git.config.branches.mergeQueue}`);\n  await git(`branch`, `-D`, `temp/${git.config.branches.mergeQueue}`);\n\n  return cancelled;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578923001200
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/setBranchToCommit.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/setBranchToCommit.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/setBranchToCommit.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/setBranchToCommit.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "setBranchToCommit.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.setBranchToCommit = async (git, branchName, hash) => {\n  const currentBranch = await git(`rev-parse`, `--abbrev-ref`, `HEAD`);\n\n  if (currentBranch === branchName) {\n    await git(`reset`, `--hard`, hash);\n  } else {\n    await git(`branch`, `-f`, branchName, hash);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldEJyYW5jaFRvQ29tbWl0LmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJzZXRCcmFuY2hUb0NvbW1pdCIsImdpdCIsImJyYW5jaE5hbWUiLCJoYXNoIiwiY3VycmVudEJyYW5jaCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUFBLE9BQU8sQ0FBQ0MsaUJBQVIsR0FBNEIsT0FBT0MsR0FBUCxFQUFZQyxVQUFaLEVBQXdCQyxJQUF4QixLQUFpQztBQUMzRCxRQUFNQyxhQUFhLEdBQUcsTUFBTUgsR0FBRyxDQUFFLFdBQUYsRUFBZSxjQUFmLEVBQStCLE1BQS9CLENBQS9COztBQUVBLE1BQUlHLGFBQWEsS0FBS0YsVUFBdEIsRUFBa0M7QUFDaEMsVUFBTUQsR0FBRyxDQUFFLE9BQUYsRUFBVyxRQUFYLEVBQW9CRSxJQUFwQixDQUFUO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsVUFBTUYsR0FBRyxDQUFFLFFBQUYsRUFBWSxJQUFaLEVBQWlCQyxVQUFqQixFQUE2QkMsSUFBN0IsQ0FBVDtBQUNEO0FBQ0YsQ0FSRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmV4cG9ydHMuc2V0QnJhbmNoVG9Db21taXQgPSBhc3luYyAoZ2l0LCBicmFuY2hOYW1lLCBoYXNoKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRCcmFuY2ggPSBhd2FpdCBnaXQoYHJldi1wYXJzZWAsIGAtLWFiYnJldi1yZWZgLCBgSEVBRGApO1xuXG4gIGlmIChjdXJyZW50QnJhbmNoID09PSBicmFuY2hOYW1lKSB7XG4gICAgYXdhaXQgZ2l0KGByZXNldGAsIGAtLWhhcmRgLCBoYXNoKTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCBnaXQoYGJyYW5jaGAsIGAtZmAsIGJyYW5jaE5hbWUsIGhhc2gpO1xuICB9XG59O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "setBranchToCommit.js"
      ],
      "names": [
        "exports",
        "setBranchToCommit",
        "git",
        "branchName",
        "hash",
        "currentBranch"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,iBAAR,GAA4B,OAAOC,GAAP,EAAYC,UAAZ,EAAwBC,IAAxB,KAAiC;AAC3D,QAAMC,aAAa,GAAG,MAAMH,GAAG,CAAE,WAAF,EAAe,cAAf,EAA+B,MAA/B,CAA/B;;AAEA,MAAIG,aAAa,KAAKF,UAAtB,EAAkC;AAChC,UAAMD,GAAG,CAAE,OAAF,EAAW,QAAX,EAAoBE,IAApB,CAAT;AACD,GAFD,MAEO;AACL,UAAMF,GAAG,CAAE,QAAF,EAAY,IAAZ,EAAiBC,UAAjB,EAA6BC,IAA7B,CAAT;AACD;AACF,CARD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.setBranchToCommit = async (git, branchName, hash) => {\n  const currentBranch = await git(`rev-parse`, `--abbrev-ref`, `HEAD`);\n\n  if (currentBranch === branchName) {\n    await git(`reset`, `--hard`, hash);\n  } else {\n    await git(`branch`, `-f`, branchName, hash);\n  }\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567902
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/normalizeStatusMap.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/normalizeStatusMap.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/normalizeStatusMap.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/normalizeStatusMap.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "normalizeStatusMap.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeStatusMap = normalizeStatusMap;\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nfunction normalizeStatusMap(git, statusMap) {\n  if (!git.config.requiredStatus) return statusMap;\n  return new Map(git.config.requiredStatus.map(title => {\n    return [title, statusMap.get(title)];\n  }));\n}\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vcm1hbGl6ZVN0YXR1c01hcC50cyJdLCJuYW1lcyI6WyJub3JtYWxpemVTdGF0dXNNYXAiLCJnaXQiLCJzdGF0dXNNYXAiLCJjb25maWciLCJyZXF1aXJlZFN0YXR1cyIsIk1hcCIsIm1hcCIsInRpdGxlIiwiZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztBQVFPLFNBQVNBLGtCQUFULENBQTRCQyxHQUE1QixFQUFzQ0MsU0FBdEMsRUFBOEU7QUFDbkYsTUFBSSxDQUFDRCxHQUFHLENBQUNFLE1BQUosQ0FBV0MsY0FBaEIsRUFDRSxPQUFPRixTQUFQO0FBRUYsU0FBTyxJQUFJRyxHQUFKLENBQVFKLEdBQUcsQ0FBQ0UsTUFBSixDQUFXQyxjQUFYLENBQTBCRSxHQUExQixDQUE4QkMsS0FBSyxJQUFJO0FBQ3BELFdBQU8sQ0FBQ0EsS0FBRCxFQUFRTCxTQUFTLENBQUNNLEdBQVYsQ0FBY0QsS0FBZCxDQUFSLENBQVA7QUFDRCxHQUZjLENBQVIsQ0FBUDtBQUdEOztBQUFBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5pbXBvcnQge0dpdH0gZnJvbSAnLi9naXQvb3BlblJlcG9zaXRvcnknO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplU3RhdHVzTWFwKGdpdDogR2l0LCBzdGF0dXNNYXA6IE1hcDxzdHJpbmcsIGJvb2xlYW4gfCBudWxsPikge1xuICBpZiAoIWdpdC5jb25maWcucmVxdWlyZWRTdGF0dXMpXG4gICAgcmV0dXJuIHN0YXR1c01hcDtcblxuICByZXR1cm4gbmV3IE1hcChnaXQuY29uZmlnLnJlcXVpcmVkU3RhdHVzLm1hcCh0aXRsZSA9PiB7XG4gICAgcmV0dXJuIFt0aXRsZSwgc3RhdHVzTWFwLmdldCh0aXRsZSldO1xuICB9KSk7XG59O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "normalizeStatusMap.ts"
      ],
      "names": [
        "normalizeStatusMap",
        "git",
        "statusMap",
        "config",
        "requiredStatus",
        "Map",
        "map",
        "title",
        "get"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAQO,SAASA,kBAAT,CAA4BC,GAA5B,EAAsCC,SAAtC,EAA8E;AACnF,MAAI,CAACD,GAAG,CAACE,MAAJ,CAAWC,cAAhB,EACE,OAAOF,SAAP;AAEF,SAAO,IAAIG,GAAJ,CAAQJ,GAAG,CAACE,MAAJ,CAAWC,cAAX,CAA0BE,GAA1B,CAA8BC,KAAK,IAAI;AACpD,WAAO,CAACA,KAAD,EAAQL,SAAS,CAACM,GAAV,CAAcD,KAAd,CAAR,CAAP;AACD,GAFc,CAAR,CAAP;AAGD;;AAAA",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nimport {Git} from './git/openRepository';\n\nexport function normalizeStatusMap(git: Git, statusMap: Map<string, boolean | null>) {\n  if (!git.config.requiredStatus)\n    return statusMap;\n\n  return new Map(git.config.requiredStatus.map(title => {\n    return [title, statusMap.get(title)];\n  }));\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934642251
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/validateStatusMap.ts\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}},{\"key\":\"transform-typescript\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Identifier\":{\"enter\":[null]},\"RestElement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"ExportSpecifier\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"TSDeclareFunction\":{\"enter\":[null]},\"TSDeclareMethod\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"VariableDeclarator\":{\"enter\":[null]},\"TSIndexSignature\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null,null]},\"TSModuleDeclaration\":{\"enter\":[null]},\"TSInterfaceDeclaration\":{\"enter\":[null]},\"TSTypeAliasDeclaration\":{\"enter\":[null]},\"TSEnumDeclaration\":{\"enter\":[null]},\"TSImportEqualsDeclaration\":{\"enter\":[null]},\"TSExportAssignment\":{\"enter\":[null]},\"TSTypeAssertion\":{\"enter\":[null]},\"TSAsExpression\":{\"enter\":[null]},\"TSNonNullExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"TaggedTemplateExpression\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"isTSX\":false}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/validateStatusMap.ts",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        },
        {
          "key": "transform-typescript",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Identifier": {
              "enter": [
                null
              ]
            },
            "RestElement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "ExportSpecifier": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "TSDeclareFunction": {
              "enter": [
                null
              ]
            },
            "TSDeclareMethod": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "TSIndexSignature": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null,
                null
              ]
            },
            "TSModuleDeclaration": {
              "enter": [
                null
              ]
            },
            "TSInterfaceDeclaration": {
              "enter": [
                null
              ]
            },
            "TSTypeAliasDeclaration": {
              "enter": [
                null
              ]
            },
            "TSEnumDeclaration": {
              "enter": [
                null
              ]
            },
            "TSImportEqualsDeclaration": {
              "enter": [
                null
              ]
            },
            "TSExportAssignment": {
              "enter": [
                null
              ]
            },
            "TSTypeAssertion": {
              "enter": [
                null
              ]
            },
            "TSAsExpression": {
              "enter": [
                null
              ]
            },
            "TSNonNullExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "JSXOpeningElement": {
              "enter": [
                null
              ]
            },
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "isTSX": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/validateStatusMap.ts",
        "plugins": [
          "typescript",
          "classProperties",
          "objectRestSpread"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/validateStatusMap.ts",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources",
        "sourceFileName": "validateStatusMap.ts"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateStatusMap = validateStatusMap;\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nfunction validateStatusMap(statusMap) {\n  let pending = false;\n\n  for (const status of statusMap.values()) {\n    if (status === false) return false;\n\n    if (typeof status === `undefined` || status === null) {\n      pending = true;\n    }\n  }\n\n  if (pending) {\n    return null;\n  } else {\n    return true;\n  }\n}\n\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRlU3RhdHVzTWFwLnRzIl0sIm5hbWVzIjpbInZhbGlkYXRlU3RhdHVzTWFwIiwic3RhdHVzTWFwIiwicGVuZGluZyIsInN0YXR1cyIsInZhbHVlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFNTyxTQUFTQSxpQkFBVCxDQUEyQkMsU0FBM0IsRUFBbUU7QUFDeEUsTUFBSUMsT0FBTyxHQUFHLEtBQWQ7O0FBRUEsT0FBSyxNQUFNQyxNQUFYLElBQXFCRixTQUFTLENBQUNHLE1BQVYsRUFBckIsRUFBeUM7QUFDdkMsUUFBSUQsTUFBTSxLQUFLLEtBQWYsRUFDRSxPQUFPLEtBQVA7O0FBRUYsUUFBSSxPQUFPQSxNQUFQLEtBQW1CLFdBQW5CLElBQWlDQSxNQUFNLEtBQUssSUFBaEQsRUFBc0Q7QUFDcERELE1BQUFBLE9BQU8sR0FBRyxJQUFWO0FBQ0Q7QUFDRjs7QUFFRCxNQUFJQSxPQUFKLEVBQWE7QUFDWCxXQUFPLElBQVA7QUFDRCxHQUZELE1BRU87QUFDTCxXQUFPLElBQVA7QUFDRDtBQUNGOztBQUFBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXNNYXAoc3RhdHVzTWFwOiBNYXA8c3RyaW5nLCBib29sZWFuIHwgbnVsbD4pIHtcbiAgbGV0IHBlbmRpbmcgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IHN0YXR1cyBvZiBzdGF0dXNNYXAudmFsdWVzKCkpIHtcbiAgICBpZiAoc3RhdHVzID09PSBmYWxzZSlcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmICh0eXBlb2Ygc3RhdHVzID09PSBgdW5kZWZpbmVkYCB8fCBzdGF0dXMgPT09IG51bGwpIHtcbiAgICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwZW5kaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "validateStatusMap.ts"
      ],
      "names": [
        "validateStatusMap",
        "statusMap",
        "pending",
        "status",
        "values"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAMO,SAASA,iBAAT,CAA2BC,SAA3B,EAAmE;AACxE,MAAIC,OAAO,GAAG,KAAd;;AAEA,OAAK,MAAMC,MAAX,IAAqBF,SAAS,CAACG,MAAV,EAArB,EAAyC;AACvC,QAAID,MAAM,KAAK,KAAf,EACE,OAAO,KAAP;;AAEF,QAAI,OAAOA,MAAP,KAAmB,WAAnB,IAAiCA,MAAM,KAAK,IAAhD,EAAsD;AACpDD,MAAAA,OAAO,GAAG,IAAV;AACD;AACF;;AAED,MAAIA,OAAJ,EAAa;AACX,WAAO,IAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF;;AAAA",
      "sourceRoot": "/Users/mael.nison/chenille/sources",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexport function validateStatusMap(statusMap: Map<string, boolean | null>) {\n  let pending = false;\n\n  for (const status of statusMap.values()) {\n    if (status === false)\n      return false;\n\n    if (typeof status === `undefined` || status === null) {\n      pending = true;\n    }\n  }\n\n  if (pending) {\n    return null;\n  } else {\n    return true;\n  }\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578934671309
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/commands\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/commands/Cancel.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/commands/Cancel.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/commands/Cancel.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/commands/Cancel.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
        "sourceFileName": "Cancel.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  Command\n} = require(`clipanion`);\n\nconst yup = require(`yup`);\n\nconst {\n  openRepository\n} = require(`../git/openRepository`);\n\nconst {\n  removeFromMergeQueue\n} = require(`../git/removeFromMergeQueue`);\n\nconst {\n  retryIfStale\n} = require(`../git/retryIfStale`);\n\nclass Cancel extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout\n    });\n    const cancelled = await retryIfStale(async () => {\n      this.context.stdout.write(`Fetching the head for ${git.config.branches.mergeQueue}...\\n`);\n      await this.context.driver.fetchFromOrigin(git, git.config.branches.mergeQueue);\n      this.context.stdout.write(`Removing ${this.pr} from the merge queue (if needed)...\\n`);\n      const cancelled = await removeFromMergeQueue(git, this.pr, {\n        reason: this.reason || `Manual request`\n      });\n      if (cancelled.length === 0) return cancelled;\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.mergeQueue);\n      return cancelled;\n    });\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n\n}\n\nCancel.schema = yup.object().shape({\n  pr: yup.number().required(),\n  reason: yup.string()\n});\nCancel.addPath(`cancel`);\nCancel.addOption(`reason`, Command.String(`--reason`));\nCancel.addOption(`pr`, Command.String());\nmodule.exports = Cancel;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhbmNlbC5qcyJdLCJuYW1lcyI6WyJDb21tYW5kIiwicmVxdWlyZSIsInl1cCIsIm9wZW5SZXBvc2l0b3J5IiwicmVtb3ZlRnJvbU1lcmdlUXVldWUiLCJyZXRyeUlmU3RhbGUiLCJDYW5jZWwiLCJleGVjdXRlIiwiZ2l0IiwiY29udGV4dCIsImN3ZCIsInN0ZG91dCIsImNhbmNlbGxlZCIsIndyaXRlIiwiY29uZmlnIiwiYnJhbmNoZXMiLCJtZXJnZVF1ZXVlIiwiZHJpdmVyIiwiZmV0Y2hGcm9tT3JpZ2luIiwicHIiLCJyZWFzb24iLCJsZW5ndGgiLCJwdXNoVG9PcmlnaW4iLCJzZW5kQ2FuY2VsTm90aWZpY2F0aW9ucyIsInNjaGVtYSIsIm9iamVjdCIsInNoYXBlIiwibnVtYmVyIiwicmVxdWlyZWQiLCJzdHJpbmciLCJhZGRQYXRoIiwiYWRkT3B0aW9uIiwiU3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUEsTUFBTTtBQUFDQSxFQUFBQTtBQUFELElBQVlDLE9BQU8sQ0FBRSxXQUFGLENBQXpCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFFLEtBQUYsQ0FBbkI7O0FBRUEsTUFBTTtBQUFDRSxFQUFBQTtBQUFELElBQW1CRixPQUFPLENBQUUsdUJBQUYsQ0FBaEM7O0FBQ0EsTUFBTTtBQUFDRyxFQUFBQTtBQUFELElBQXlCSCxPQUFPLENBQUUsNkJBQUYsQ0FBdEM7O0FBQ0EsTUFBTTtBQUFDSSxFQUFBQTtBQUFELElBQWlCSixPQUFPLENBQUUscUJBQUYsQ0FBOUI7O0FBRUEsTUFBTUssTUFBTixTQUFxQk4sT0FBckIsQ0FBNkI7QUFDM0IsUUFBTU8sT0FBTixHQUFnQjtBQUNkLFVBQU1DLEdBQUcsR0FBRyxNQUFNTCxjQUFjLENBQUMsS0FBS00sT0FBTCxDQUFhQyxHQUFkLEVBQW1CO0FBQ2pEQyxNQUFBQSxNQUFNLEVBQUUsS0FBS0YsT0FBTCxDQUFhRTtBQUQ0QixLQUFuQixDQUFoQztBQUlBLFVBQU1DLFNBQVMsR0FBRyxNQUFNUCxZQUFZLENBQUMsWUFBWTtBQUMvQyxXQUFLSSxPQUFMLENBQWFFLE1BQWIsQ0FBb0JFLEtBQXBCLENBQTJCLHlCQUF3QkwsR0FBRyxDQUFDTSxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLFVBQVcsT0FBbEY7QUFDQSxZQUFNLEtBQUtQLE9BQUwsQ0FBYVEsTUFBYixDQUFvQkMsZUFBcEIsQ0FBb0NWLEdBQXBDLEVBQXlDQSxHQUFHLENBQUNNLE1BQUosQ0FBV0MsUUFBWCxDQUFvQkMsVUFBN0QsQ0FBTjtBQUVBLFdBQUtQLE9BQUwsQ0FBYUUsTUFBYixDQUFvQkUsS0FBcEIsQ0FBMkIsWUFBVyxLQUFLTSxFQUFHLHdDQUE5QztBQUNBLFlBQU1QLFNBQVMsR0FBRyxNQUFNUixvQkFBb0IsQ0FBQ0ksR0FBRCxFQUFNLEtBQUtXLEVBQVgsRUFBZTtBQUFDQyxRQUFBQSxNQUFNLEVBQUUsS0FBS0EsTUFBTCxJQUFnQjtBQUF6QixPQUFmLENBQTVDO0FBRUEsVUFBSVIsU0FBUyxDQUFDUyxNQUFWLEtBQXFCLENBQXpCLEVBQ0UsT0FBT1QsU0FBUDtBQUVGLFdBQUtILE9BQUwsQ0FBYUUsTUFBYixDQUFvQkUsS0FBcEIsQ0FBMkIsK0JBQTNCO0FBQ0EsWUFBTSxLQUFLSixPQUFMLENBQWFRLE1BQWIsQ0FBb0JLLFlBQXBCLENBQWlDZCxHQUFqQyxFQUF1QyxVQUF2QyxFQUFtRCxvQkFBbkQsRUFBd0VBLEdBQUcsQ0FBQ00sTUFBSixDQUFXQyxRQUFYLENBQW9CQyxVQUE1RixDQUFOO0FBRUEsYUFBT0osU0FBUDtBQUNELEtBZG1DLENBQXBDO0FBZ0JBLFVBQU0sS0FBS0gsT0FBTCxDQUFhUSxNQUFiLENBQW9CTSx1QkFBcEIsQ0FBNENYLFNBQTVDLENBQU47QUFDRDs7QUF2QjBCOztBQTBCN0JOLE1BQU0sQ0FBQ2tCLE1BQVAsR0FBZ0J0QixHQUFHLENBQUN1QixNQUFKLEdBQWFDLEtBQWIsQ0FBbUI7QUFDakNQLEVBQUFBLEVBQUUsRUFBRWpCLEdBQUcsQ0FBQ3lCLE1BQUosR0FBYUMsUUFBYixFQUQ2QjtBQUVqQ1IsRUFBQUEsTUFBTSxFQUFFbEIsR0FBRyxDQUFDMkIsTUFBSjtBQUZ5QixDQUFuQixDQUFoQjtBQUtBdkIsTUFBTSxDQUFDd0IsT0FBUCxDQUFnQixRQUFoQjtBQUVBeEIsTUFBTSxDQUFDeUIsU0FBUCxDQUFrQixRQUFsQixFQUEyQi9CLE9BQU8sQ0FBQ2dDLE1BQVIsQ0FBZ0IsVUFBaEIsQ0FBM0I7QUFDQTFCLE1BQU0sQ0FBQ3lCLFNBQVAsQ0FBa0IsSUFBbEIsRUFBdUIvQixPQUFPLENBQUNnQyxNQUFSLEVBQXZCO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjVCLE1BQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMvY29tbWFuZHMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVubGVzcyBleHBsaWNpdGx5IHN0YXRlZCBvdGhlcndpc2UgYWxsIGZpbGVzIGluIHRoaXMgcmVwb3NpdG9yeSBhcmUgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICpcbiAqIFRoaXMgcHJvZHVjdCBpbmNsdWRlcyBzb2Z0d2FyZSBkZXZlbG9wZWQgYXQgRGF0YWRvZyAoaHR0cHM6Ly93d3cuZGF0YWRvZ2hxLmNvbS8pLlxuICogQ29weXJpZ2h0IChjKSAyMDIwLVByZXNlbnQgRGF0YWRvZywgSW5jLlxuICovXG5jb25zdCB7Q29tbWFuZH0gPSByZXF1aXJlKGBjbGlwYW5pb25gKTtcbmNvbnN0IHl1cCA9IHJlcXVpcmUoYHl1cGApO1xuXG5jb25zdCB7b3BlblJlcG9zaXRvcnl9ID0gcmVxdWlyZShgLi4vZ2l0L29wZW5SZXBvc2l0b3J5YCk7XG5jb25zdCB7cmVtb3ZlRnJvbU1lcmdlUXVldWV9ID0gcmVxdWlyZShgLi4vZ2l0L3JlbW92ZUZyb21NZXJnZVF1ZXVlYCk7XG5jb25zdCB7cmV0cnlJZlN0YWxlfSA9IHJlcXVpcmUoYC4uL2dpdC9yZXRyeUlmU3RhbGVgKTtcblxuY2xhc3MgQ2FuY2VsIGV4dGVuZHMgQ29tbWFuZCB7XG4gIGFzeW5jIGV4ZWN1dGUoKSB7XG4gICAgY29uc3QgZ2l0ID0gYXdhaXQgb3BlblJlcG9zaXRvcnkodGhpcy5jb250ZXh0LmN3ZCwge1xuICAgICAgc3Rkb3V0OiB0aGlzLmNvbnRleHQuc3Rkb3V0LFxuICAgIH0pO1xuXG4gICAgY29uc3QgY2FuY2VsbGVkID0gYXdhaXQgcmV0cnlJZlN0YWxlKGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5zdGRvdXQud3JpdGUoYEZldGNoaW5nIHRoZSBoZWFkIGZvciAke2dpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZX0uLi5cXG5gKTtcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kcml2ZXIuZmV0Y2hGcm9tT3JpZ2luKGdpdCwgZ2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlKTtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgUmVtb3ZpbmcgJHt0aGlzLnByfSBmcm9tIHRoZSBtZXJnZSBxdWV1ZSAoaWYgbmVlZGVkKS4uLlxcbmApO1xuICAgICAgY29uc3QgY2FuY2VsbGVkID0gYXdhaXQgcmVtb3ZlRnJvbU1lcmdlUXVldWUoZ2l0LCB0aGlzLnByLCB7cmVhc29uOiB0aGlzLnJlYXNvbiB8fCBgTWFudWFsIHJlcXVlc3RgfSk7XG5cbiAgICAgIGlmIChjYW5jZWxsZWQubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gY2FuY2VsbGVkO1xuXG4gICAgICB0aGlzLmNvbnRleHQuc3Rkb3V0LndyaXRlKGBEb25lIC0gcHVzaGluZyB0aGUgY2hhbmdlcyFcXG5gKTtcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kcml2ZXIucHVzaFRvT3JpZ2luKGdpdCwgYC0tYXRvbWljYCwgYC0tZm9yY2Utd2l0aC1sZWFzZWAsIGdpdC5jb25maWcuYnJhbmNoZXMubWVyZ2VRdWV1ZSk7XG5cbiAgICAgIHJldHVybiBjYW5jZWxsZWQ7XG4gICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZHJpdmVyLnNlbmRDYW5jZWxOb3RpZmljYXRpb25zKGNhbmNlbGxlZCk7XG4gIH1cbn1cblxuQ2FuY2VsLnNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XG4gIHByOiB5dXAubnVtYmVyKCkucmVxdWlyZWQoKSxcbiAgcmVhc29uOiB5dXAuc3RyaW5nKCksXG59KTtcblxuQ2FuY2VsLmFkZFBhdGgoYGNhbmNlbGApO1xuXG5DYW5jZWwuYWRkT3B0aW9uKGByZWFzb25gLCBDb21tYW5kLlN0cmluZyhgLS1yZWFzb25gKSk7XG5DYW5jZWwuYWRkT3B0aW9uKGBwcmAsIENvbW1hbmQuU3RyaW5nKCkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Cancel.js"
      ],
      "names": [
        "Command",
        "require",
        "yup",
        "openRepository",
        "removeFromMergeQueue",
        "retryIfStale",
        "Cancel",
        "execute",
        "git",
        "context",
        "cwd",
        "stdout",
        "cancelled",
        "write",
        "config",
        "branches",
        "mergeQueue",
        "driver",
        "fetchFromOrigin",
        "pr",
        "reason",
        "length",
        "pushToOrigin",
        "sendCancelNotifications",
        "schema",
        "object",
        "shape",
        "number",
        "required",
        "string",
        "addPath",
        "addOption",
        "String",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAAYC,OAAO,CAAE,WAAF,CAAzB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAE,KAAF,CAAnB;;AAEA,MAAM;AAACE,EAAAA;AAAD,IAAmBF,OAAO,CAAE,uBAAF,CAAhC;;AACA,MAAM;AAACG,EAAAA;AAAD,IAAyBH,OAAO,CAAE,6BAAF,CAAtC;;AACA,MAAM;AAACI,EAAAA;AAAD,IAAiBJ,OAAO,CAAE,qBAAF,CAA9B;;AAEA,MAAMK,MAAN,SAAqBN,OAArB,CAA6B;AAC3B,QAAMO,OAAN,GAAgB;AACd,UAAMC,GAAG,GAAG,MAAML,cAAc,CAAC,KAAKM,OAAL,CAAaC,GAAd,EAAmB;AACjDC,MAAAA,MAAM,EAAE,KAAKF,OAAL,CAAaE;AAD4B,KAAnB,CAAhC;AAIA,UAAMC,SAAS,GAAG,MAAMP,YAAY,CAAC,YAAY;AAC/C,WAAKI,OAAL,CAAaE,MAAb,CAAoBE,KAApB,CAA2B,yBAAwBL,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,UAAW,OAAlF;AACA,YAAM,KAAKP,OAAL,CAAaQ,MAAb,CAAoBC,eAApB,CAAoCV,GAApC,EAAyCA,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,UAA7D,CAAN;AAEA,WAAKP,OAAL,CAAaE,MAAb,CAAoBE,KAApB,CAA2B,YAAW,KAAKM,EAAG,wCAA9C;AACA,YAAMP,SAAS,GAAG,MAAMR,oBAAoB,CAACI,GAAD,EAAM,KAAKW,EAAX,EAAe;AAACC,QAAAA,MAAM,EAAE,KAAKA,MAAL,IAAgB;AAAzB,OAAf,CAA5C;AAEA,UAAIR,SAAS,CAACS,MAAV,KAAqB,CAAzB,EACE,OAAOT,SAAP;AAEF,WAAKH,OAAL,CAAaE,MAAb,CAAoBE,KAApB,CAA2B,+BAA3B;AACA,YAAM,KAAKJ,OAAL,CAAaQ,MAAb,CAAoBK,YAApB,CAAiCd,GAAjC,EAAuC,UAAvC,EAAmD,oBAAnD,EAAwEA,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,UAA5F,CAAN;AAEA,aAAOJ,SAAP;AACD,KAdmC,CAApC;AAgBA,UAAM,KAAKH,OAAL,CAAaQ,MAAb,CAAoBM,uBAApB,CAA4CX,SAA5C,CAAN;AACD;;AAvB0B;;AA0B7BN,MAAM,CAACkB,MAAP,GAAgBtB,GAAG,CAACuB,MAAJ,GAAaC,KAAb,CAAmB;AACjCP,EAAAA,EAAE,EAAEjB,GAAG,CAACyB,MAAJ,GAAaC,QAAb,EAD6B;AAEjCR,EAAAA,MAAM,EAAElB,GAAG,CAAC2B,MAAJ;AAFyB,CAAnB,CAAhB;AAKAvB,MAAM,CAACwB,OAAP,CAAgB,QAAhB;AAEAxB,MAAM,CAACyB,SAAP,CAAkB,QAAlB,EAA2B/B,OAAO,CAACgC,MAAR,CAAgB,UAAhB,CAA3B;AACA1B,MAAM,CAACyB,SAAP,CAAkB,IAAlB,EAAuB/B,OAAO,CAACgC,MAAR,EAAvB;AAEAC,MAAM,CAACC,OAAP,GAAiB5B,MAAjB",
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {Command} = require(`clipanion`);\nconst yup = require(`yup`);\n\nconst {openRepository} = require(`../git/openRepository`);\nconst {removeFromMergeQueue} = require(`../git/removeFromMergeQueue`);\nconst {retryIfStale} = require(`../git/retryIfStale`);\n\nclass Cancel extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout,\n    });\n\n    const cancelled = await retryIfStale(async () => {\n      this.context.stdout.write(`Fetching the head for ${git.config.branches.mergeQueue}...\\n`);\n      await this.context.driver.fetchFromOrigin(git, git.config.branches.mergeQueue);\n\n      this.context.stdout.write(`Removing ${this.pr} from the merge queue (if needed)...\\n`);\n      const cancelled = await removeFromMergeQueue(git, this.pr, {reason: this.reason || `Manual request`});\n\n      if (cancelled.length === 0)\n        return cancelled;\n\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.mergeQueue);\n\n      return cancelled;\n    });\n\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n}\n\nCancel.schema = yup.object().shape({\n  pr: yup.number().required(),\n  reason: yup.string(),\n});\n\nCancel.addPath(`cancel`);\n\nCancel.addOption(`reason`, Command.String(`--reason`));\nCancel.addOption(`pr`, Command.String());\n\nmodule.exports = Cancel;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567898
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/commands\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/commands/Queue.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/commands/Queue.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/commands/Queue.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/commands/Queue.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
        "sourceFileName": "Queue.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  Command\n} = require(`clipanion`);\n\nconst yup = require(`yup`);\n\nconst {\n  clearBranches\n} = require(`../git/clearBranches`);\n\nconst {\n  openRepository\n} = require(`../git/openRepository`);\n\nconst {\n  removeFromMergeQueue\n} = require(`../git/removeFromMergeQueue`);\n\nconst {\n  retryIfStale\n} = require(`../git/retryIfStale`);\n\nconst {\n  sendToMergeQueue\n} = require(`../git/sendToMergeQueue`);\n\nclass Queue extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout\n    });\n    const remote = `pull/${this.pr}/head`;\n    const local = `pr-${this.pr}`;\n    const cancelled = await retryIfStale(async () => {\n      await clearBranches(git, git.config.branches.mergeQueue, local);\n      this.context.stdout.write(`Fetching the head for ${remote}...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`, `${remote}:${local}`);\n      this.context.stdout.write(`Removing ${this.pr} from the merge queue (if needed)...\\n`);\n      await removeFromMergeQueue(git, this.pr);\n      this.context.stdout.write(`Squashing ${this.pr} into the merge queue (${await git(`rev-parse`, `--short`, local)})...\\n`);\n      const cancelled = await sendToMergeQueue(git, {\n        number: this.pr,\n        title: this.title\n      }, local);\n      if (cancelled.length > 0) return cancelled;\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.mergeQueue);\n      return cancelled;\n    });\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n\n}\n\nQueue.schema = yup.object().shape({\n  title: yup.string().required(),\n  pr: yup.number().required()\n});\nQueue.addPath(`queue`);\nQueue.addOption(`title`, Command.String(`--title`));\nQueue.addOption(`pr`, Command.String());\nmodule.exports = Queue;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlF1ZXVlLmpzIl0sIm5hbWVzIjpbIkNvbW1hbmQiLCJyZXF1aXJlIiwieXVwIiwiY2xlYXJCcmFuY2hlcyIsIm9wZW5SZXBvc2l0b3J5IiwicmVtb3ZlRnJvbU1lcmdlUXVldWUiLCJyZXRyeUlmU3RhbGUiLCJzZW5kVG9NZXJnZVF1ZXVlIiwiUXVldWUiLCJleGVjdXRlIiwiZ2l0IiwiY29udGV4dCIsImN3ZCIsInN0ZG91dCIsInJlbW90ZSIsInByIiwibG9jYWwiLCJjYW5jZWxsZWQiLCJjb25maWciLCJicmFuY2hlcyIsIm1lcmdlUXVldWUiLCJ3cml0ZSIsImRyaXZlciIsImZldGNoRnJvbU9yaWdpbiIsIm51bWJlciIsInRpdGxlIiwibGVuZ3RoIiwicHVzaFRvT3JpZ2luIiwic2VuZENhbmNlbE5vdGlmaWNhdGlvbnMiLCJzY2hlbWEiLCJvYmplY3QiLCJzaGFwZSIsInN0cmluZyIsInJlcXVpcmVkIiwiYWRkUGF0aCIsImFkZE9wdGlvbiIsIlN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQU1BLE1BQU07QUFBQ0EsRUFBQUE7QUFBRCxJQUFZQyxPQUFPLENBQUUsV0FBRixDQUF6Qjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBRSxLQUFGLENBQW5COztBQUVBLE1BQU07QUFBQ0UsRUFBQUE7QUFBRCxJQUFrQkYsT0FBTyxDQUFFLHNCQUFGLENBQS9COztBQUNBLE1BQU07QUFBQ0csRUFBQUE7QUFBRCxJQUFtQkgsT0FBTyxDQUFFLHVCQUFGLENBQWhDOztBQUNBLE1BQU07QUFBQ0ksRUFBQUE7QUFBRCxJQUF5QkosT0FBTyxDQUFFLDZCQUFGLENBQXRDOztBQUNBLE1BQU07QUFBQ0ssRUFBQUE7QUFBRCxJQUFpQkwsT0FBTyxDQUFFLHFCQUFGLENBQTlCOztBQUNBLE1BQU07QUFBQ00sRUFBQUE7QUFBRCxJQUFxQk4sT0FBTyxDQUFFLHlCQUFGLENBQWxDOztBQUVBLE1BQU1PLEtBQU4s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QUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2NvbW1hbmRzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmxlc3MgZXhwbGljaXRseSBzdGF0ZWQgb3RoZXJ3aXNlIGFsbCBmaWxlcyBpbiB0aGlzIHJlcG9zaXRvcnkgYXJlIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqXG4gKiBUaGlzIHByb2R1Y3QgaW5jbHVkZXMgc29mdHdhcmUgZGV2ZWxvcGVkIGF0IERhdGFkb2cgKGh0dHBzOi8vd3d3LmRhdGFkb2docS5jb20vKS5cbiAqIENvcHlyaWdodCAoYykgMjAyMC1QcmVzZW50IERhdGFkb2csIEluYy5cbiAqL1xuY29uc3Qge0NvbW1hbmR9ID0gcmVxdWlyZShgY2xpcGFuaW9uYCk7XG5jb25zdCB5dXAgPSByZXF1aXJlKGB5dXBgKTtcblxuY29uc3Qge2NsZWFyQnJhbmNoZXN9ID0gcmVxdWlyZShgLi4vZ2l0L2NsZWFyQnJhbmNoZXNgKTtcbmNvbnN0IHtvcGVuUmVwb3NpdG9yeX0gPSByZXF1aXJlKGAuLi9naXQvb3BlblJlcG9zaXRvcnlgKTtcbmNvbnN0IHtyZW1vdmVGcm9tTWVyZ2VRdWV1ZX0gPSByZXF1aXJlKGAuLi9naXQvcmVtb3ZlRnJvbU1lcmdlUXVldWVgKTtcbmNvbnN0IHtyZXRyeUlmU3RhbGV9ID0gcmVxdWlyZShgLi4vZ2l0L3JldHJ5SWZTdGFsZWApO1xuY29uc3Qge3NlbmRUb01lcmdlUXVldWV9ID0gcmVxdWlyZShgLi4vZ2l0L3NlbmRUb01lcmdlUXVldWVgKTtcblxuY2xhc3MgUXVldWUgZXh0ZW5kcyBDb21tYW5kIHtcbiAgYXN5bmMgZXhlY3V0ZSgpIHtcbiAgICBjb25zdCBnaXQgPSBhd2FpdCBvcGVuUmVwb3NpdG9yeSh0aGlzLmNvbnRleHQuY3dkLCB7XG4gICAgICBzdGRvdXQ6IHRoaXMuY29udGV4dC5zdGRvdXQsXG4gICAgfSk7XG5cbiAgICBjb25zdCByZW1vdGUgPSBgcHVsbC8ke3RoaXMucHJ9L2hlYWRgO1xuICAgIGNvbnN0IGxvY2FsID0gYHByLSR7dGhpcy5wcn1gO1xuXG4gICAgY29uc3QgY2FuY2VsbGVkID0gYXdhaXQgcmV0cnlJZlN0YWxlKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGNsZWFyQnJhbmNoZXMoZ2l0LCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUsIGxvY2FsKTtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgRmV0Y2hpbmcgdGhlIGhlYWQgZm9yICR7cmVtb3RlfS4uLlxcbmApO1xuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5mZXRjaEZyb21PcmlnaW4oZ2l0LCBgJHtnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWV9OiR7Z2l0LmNvbmZpZy5icmFuY2hlcy5tZXJnZVF1ZXVlfWAsIGAke3JlbW90ZX06JHtsb2NhbH1gKTtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgUmVtb3ZpbmcgJHt0aGlzLnByfSBmcm9tIHRoZSBtZXJnZSBxdWV1ZSAoaWYgbmVlZGVkKS4uLlxcbmApO1xuICAgICAgYXdhaXQgcmVtb3ZlRnJvbU1lcmdlUXVldWUoZ2l0LCB0aGlzLnByKTtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgU3F1YXNoaW5nICR7dGhpcy5wcn0gaW50byB0aGUgbWVyZ2UgcXVldWUgKCR7YXdhaXQgZ2l0KGByZXYtcGFyc2VgLCBgLS1zaG9ydGAsIGxvY2FsKX0pLi4uXFxuYCk7XG4gICAgICBjb25zdCBjYW5jZWxsZWQgPSBhd2FpdCBzZW5kVG9NZXJnZVF1ZXVlKGdpdCwge251bWJlcjogdGhpcy5wciwgdGl0bGU6IHRoaXMudGl0bGV9LCBsb2NhbCk7XG5cbiAgICAgIGlmIChjYW5jZWxsZWQubGVuZ3RoID4gMClcbiAgICAgICAgcmV0dXJuIGNhbmNlbGxlZDtcblxuICAgICAgdGhpcy5jb250ZXh0LnN0ZG91dC53cml0ZShgRG9uZSAtIHB1c2hpbmcgdGhlIGNoYW5nZXMhXFxuYCk7XG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQuZHJpdmVyLnB1c2hUb09yaWdpbihnaXQsIGAtLWF0b21pY2AsIGAtLWZvcmNlLXdpdGgtbGVhc2VgLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUpO1xuXG4gICAgICByZXR1cm4gY2FuY2VsbGVkO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5jb250ZXh0LmRyaXZlci5zZW5kQ2FuY2VsTm90aWZpY2F0aW9ucyhjYW5jZWxsZWQpO1xuICB9XG59XG5cblF1ZXVlLnNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XG4gIHRpdGxlOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgcHI6IHl1cC5udW1iZXIoKS5yZXF1aXJlZCgpLFxufSk7XG5cblF1ZXVlLmFkZFBhdGgoYHF1ZXVlYCk7XG5cblF1ZXVlLmFkZE9wdGlvbihgdGl0bGVgLCBDb21tYW5kLlN0cmluZyhgLS10aXRsZWApKTtcblF1ZXVlLmFkZE9wdGlvbihgcHJgLCBDb21tYW5kLlN0cmluZygpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBRdWV1ZTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Queue.js"
      ],
      "names": [
        "Command",
        "require",
        "yup",
        "clearBranches",
        "openRepository",
        "removeFromMergeQueue",
        "retryIfStale",
        "sendToMergeQueue",
        "Queue",
        "execute",
        "git",
        "context",
        "cwd",
        "stdout",
        "remote",
        "pr",
        "local",
        "cancelled",
        "config",
        "branches",
        "mergeQueue",
        "write",
        "driver",
        "fetchFromOrigin",
        "number",
        "title",
        "length",
        "pushToOrigin",
        "sendCancelNotifications",
        "schema",
        "object",
        "shape",
        "string",
        "required",
        "addPath",
        "addOption",
        "String",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/mael.nison/chenille/sources/commands",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {Command} = require(`clipanion`);\nconst yup = require(`yup`);\n\nconst {clearBranches} = require(`../git/clearBranches`);\nconst {openRepository} = require(`../git/openRepository`);\nconst {removeFromMergeQueue} = require(`../git/removeFromMergeQueue`);\nconst {retryIfStale} = require(`../git/retryIfStale`);\nconst {sendToMergeQueue} = require(`../git/sendToMergeQueue`);\n\nclass Queue extends Command {\n  async execute() {\n    const git = await openRepository(this.context.cwd, {\n      stdout: this.context.stdout,\n    });\n\n    const remote = `pull/${this.pr}/head`;\n    const local = `pr-${this.pr}`;\n\n    const cancelled = await retryIfStale(async () => {\n      await clearBranches(git, git.config.branches.mergeQueue, local);\n\n      this.context.stdout.write(`Fetching the head for ${remote}...\\n`);\n      await this.context.driver.fetchFromOrigin(git, `${git.config.branches.mergeQueue}:${git.config.branches.mergeQueue}`, `${remote}:${local}`);\n\n      this.context.stdout.write(`Removing ${this.pr} from the merge queue (if needed)...\\n`);\n      await removeFromMergeQueue(git, this.pr);\n\n      this.context.stdout.write(`Squashing ${this.pr} into the merge queue (${await git(`rev-parse`, `--short`, local)})...\\n`);\n      const cancelled = await sendToMergeQueue(git, {number: this.pr, title: this.title}, local);\n\n      if (cancelled.length > 0)\n        return cancelled;\n\n      this.context.stdout.write(`Done - pushing the changes!\\n`);\n      await this.context.driver.pushToOrigin(git, `--atomic`, `--force-with-lease`, git.config.branches.mergeQueue);\n\n      return cancelled;\n    });\n\n    await this.context.driver.sendCancelNotifications(cancelled);\n  }\n}\n\nQueue.schema = yup.object().shape({\n  title: yup.string().required(),\n  pr: yup.number().required(),\n});\n\nQueue.addPath(`queue`);\n\nQueue.addOption(`title`, Command.String(`--title`));\nQueue.addOption(`pr`, Command.String());\n\nmodule.exports = Queue;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567898
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/git\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/git/sendToMergeQueue.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/git/sendToMergeQueue.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/git/sendToMergeQueue.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/git/sendToMergeQueue.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/git",
        "sourceFileName": "sendToMergeQueue.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.sendToMergeQueue = async (git, pr, hash) => {\n  try {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, hash);\n    const author = [`-c`, `user.name=${authorName}`, `-c`, `user.email=${authorEmail}`];\n    await git(`checkout`, git.config.branches.mergeQueue);\n    await git(...author, `merge`, `--squash`, hash);\n    await git.prefixSquashMessage(`[#${pr.number}] ${pr.title}\\n\\nCloses: #${pr.number}\\n\\n`);\n    await git(...author, `commit`, `--no-edit`, `--author`, `${authorName} <${authorEmail}>`);\n    return [];\n  } catch (error) {\n    return [{ ...pr,\n      reason: `Merge into ${git.config.branches.master} failed (${error.message})`\n    }];\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbmRUb01lcmdlUXVldWUuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsInNlbmRUb01lcmdlUXVldWUiLCJnaXQiLCJwciIsImhhc2giLCJhdXRob3JOYW1lIiwiYXV0aG9yRW1haWwiLCJhdXRob3IiLCJjb25maWciLCJicmFuY2hlcyIsIm1lcmdlUXVldWUiLCJwcmVmaXhTcXVhc2hNZXNzYWdlIiwibnVtYmVyIiwidGl0bGUiLCJlcnJvciIsInJlYXNvbiIsIm1hc3RlciIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7OztBQU1BQSxPQUFPLENBQUNDLGdCQUFSLEdBQTJCLE9BQU9DLEdBQVAsRUFBWUMsRUFBWixFQUFnQkMsSUFBaEIsS0FBeUI7QUFDbEQsTUFBSTtBQUNGLFVBQU1DLFVBQVUsR0FBRyxNQUFNSCxHQUFHLENBQUUsS0FBRixFQUFTLElBQVQsRUFBZSx1QkFBZixFQUF1Q0UsSUFBdkMsQ0FBNUI7QUFDQSxVQUFNRSxXQUFXLEdBQUcsTUFBTUosR0FBRyxDQUFFLEtBQUYsRUFBUyxJQUFULEVBQWUsdUJBQWYsRUFBdUNFLElBQXZDLENBQTdCO0FBRUEsVUFBTUcsTUFBTSxHQUFHLENBQ1osSUFEWSxFQUNOLGFBQVlGLFVBQVcsRUFEakIsRUFFWixJQUZZLEVBRU4sY0FBYUMsV0FBWSxFQUZuQixDQUFmO0FBS0EsVUFBTUosR0FBRyxDQUFFLFVBQUYsRUFBYUEsR0FBRyxDQUFDTSxNQUFKLENBQVdDLFFBQVgsQ0FBb0JDLFVBQWpDLENBQVQ7QUFDQSxVQUFNUixHQUFHLENBQUMsR0FBR0ssTUFBSixFQUFhLE9BQWIsRUFBc0IsVUFBdEIsRUFBaUNILElBQWpDLENBQVQ7QUFDQSxVQUFNRixHQUFHLENBQUNTLG1CQUFKLENBQXlCLEtBQUlSLEVBQUUsQ0FBQ1MsTUFBTyxLQUFJVCxFQUFFLENBQUNVLEtBQU0sZ0JBQWVWLEVBQUUsQ0FBQ1MsTUFBTyxNQUE3RSxDQUFOO0FBQ0EsVUFBTVYsR0FBRyxDQUFDLEdBQUdLLE1BQUosRUFBYSxRQUFiLEVBQXVCLFdBQXZCLEVBQW9DLFVBQXBDLEVBQWdELEdBQUVGLFVBQVcsS0FBSUMsV0FBWSxHQUE3RSxDQUFUO0FBRUEsV0FBTyxFQUFQO0FBQ0QsR0FmRCxDQWVFLE9BQU9RLEtBQVAsRUFBYztBQUNkLFdBQU8sQ0FBQyxFQUNOLEdBQUdYLEVBREc7QUFFTlksTUFBQUEsTUFBTSxFQUFHLGNBQWFiLEdBQUcsQ0FBQ00sTUFBSixDQUFXQyxRQUFYLENBQW9CTyxNQUFPLFlBQVdGLEtBQUssQ0FBQ0csT0FBUTtBQUZwRSxLQUFELENBQVA7QUFJRDtBQUNGLENBdEJEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWVsLm5pc29uL2NoZW5pbGxlL3NvdXJjZXMvZ2l0Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmxlc3MgZXhwbGljaXRseSBzdGF0ZWQgb3RoZXJ3aXNlIGFsbCBmaWxlcyBpbiB0aGlzIHJlcG9zaXRvcnkgYXJlIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqXG4gKiBUaGlzIHByb2R1Y3QgaW5jbHVkZXMgc29mdHdhcmUgZGV2ZWxvcGVkIGF0IERhdGFkb2cgKGh0dHBzOi8vd3d3LmRhdGFkb2docS5jb20vKS5cbiAqIENvcHlyaWdodCAoYykgMjAyMC1QcmVzZW50IERhdGFkb2csIEluYy5cbiAqL1xuZXhwb3J0cy5zZW5kVG9NZXJnZVF1ZXVlID0gYXN5bmMgKGdpdCwgcHIsIGhhc2gpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRob3JOYW1lID0gYXdhaXQgZ2l0KGBsb2dgLCBgLTFgLCBgLS1wcmV0dHk9Zm9ybWF0OiclYW4nYCwgaGFzaCk7XG4gICAgY29uc3QgYXV0aG9yRW1haWwgPSBhd2FpdCBnaXQoYGxvZ2AsIGAtMWAsIGAtLXByZXR0eT1mb3JtYXQ6JyVhZSdgLCBoYXNoKTtcblxuICAgIGNvbnN0IGF1dGhvciA9IFtcbiAgICAgIGAtY2AsIGB1c2VyLm5hbWU9JHthdXRob3JOYW1lfWAsXG4gICAgICBgLWNgLCBgdXNlci5lbWFpbD0ke2F1dGhvckVtYWlsfWAsXG4gICAgXTtcblxuICAgIGF3YWl0IGdpdChgY2hlY2tvdXRgLCBnaXQuY29uZmlnLmJyYW5jaGVzLm1lcmdlUXVldWUpO1xuICAgIGF3YWl0IGdpdCguLi5hdXRob3IsIGBtZXJnZWAsIGAtLXNxdWFzaGAsIGhhc2gpO1xuICAgIGF3YWl0IGdpdC5wcmVmaXhTcXVhc2hNZXNzYWdlKGBbIyR7cHIubnVtYmVyfV0gJHtwci50aXRsZX1cXG5cXG5DbG9zZXM6ICMke3ByLm51bWJlcn1cXG5cXG5gKTtcbiAgICBhd2FpdCBnaXQoLi4uYXV0aG9yLCBgY29tbWl0YCwgYC0tbm8tZWRpdGAsIGAtLWF1dGhvcmAsIGAke2F1dGhvck5hbWV9IDwke2F1dGhvckVtYWlsfT5gKTtcblxuICAgIHJldHVybiBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIC4uLnByLFxuICAgICAgcmVhc29uOiBgTWVyZ2UgaW50byAke2dpdC5jb25maWcuYnJhbmNoZXMubWFzdGVyfSBmYWlsZWQgKCR7ZXJyb3IubWVzc2FnZX0pYCxcbiAgICB9XTtcbiAgfVxufTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "sendToMergeQueue.js"
      ],
      "names": [
        "exports",
        "sendToMergeQueue",
        "git",
        "pr",
        "hash",
        "authorName",
        "authorEmail",
        "author",
        "config",
        "branches",
        "mergeQueue",
        "prefixSquashMessage",
        "number",
        "title",
        "error",
        "reason",
        "master",
        "message"
      ],
      "mappings": ";;AAAA;;;;;;AAMAA,OAAO,CAACC,gBAAR,GAA2B,OAAOC,GAAP,EAAYC,EAAZ,EAAgBC,IAAhB,KAAyB;AAClD,MAAI;AACF,UAAMC,UAAU,GAAG,MAAMH,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCE,IAAvC,CAA5B;AACA,UAAME,WAAW,GAAG,MAAMJ,GAAG,CAAE,KAAF,EAAS,IAAT,EAAe,uBAAf,EAAuCE,IAAvC,CAA7B;AAEA,UAAMG,MAAM,GAAG,CACZ,IADY,EACN,aAAYF,UAAW,EADjB,EAEZ,IAFY,EAEN,cAAaC,WAAY,EAFnB,CAAf;AAKA,UAAMJ,GAAG,CAAE,UAAF,EAAaA,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,UAAjC,CAAT;AACA,UAAMR,GAAG,CAAC,GAAGK,MAAJ,EAAa,OAAb,EAAsB,UAAtB,EAAiCH,IAAjC,CAAT;AACA,UAAMF,GAAG,CAACS,mBAAJ,CAAyB,KAAIR,EAAE,CAACS,MAAO,KAAIT,EAAE,CAACU,KAAM,gBAAeV,EAAE,CAACS,MAAO,MAA7E,CAAN;AACA,UAAMV,GAAG,CAAC,GAAGK,MAAJ,EAAa,QAAb,EAAuB,WAAvB,EAAoC,UAApC,EAAgD,GAAEF,UAAW,KAAIC,WAAY,GAA7E,CAAT;AAEA,WAAO,EAAP;AACD,GAfD,CAeE,OAAOQ,KAAP,EAAc;AACd,WAAO,CAAC,EACN,GAAGX,EADG;AAENY,MAAAA,MAAM,EAAG,cAAab,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBO,MAAO,YAAWF,KAAK,CAACG,OAAQ;AAFpE,KAAD,CAAP;AAID;AACF,CAtBD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/git",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nexports.sendToMergeQueue = async (git, pr, hash) => {\n  try {\n    const authorName = await git(`log`, `-1`, `--pretty=format:'%an'`, hash);\n    const authorEmail = await git(`log`, `-1`, `--pretty=format:'%ae'`, hash);\n\n    const author = [\n      `-c`, `user.name=${authorName}`,\n      `-c`, `user.email=${authorEmail}`,\n    ];\n\n    await git(`checkout`, git.config.branches.mergeQueue);\n    await git(...author, `merge`, `--squash`, hash);\n    await git.prefixSquashMessage(`[#${pr.number}] ${pr.title}\\n\\nCloses: #${pr.number}\\n\\n`);\n    await git(...author, `commit`, `--no-edit`, `--author`, `${authorName} <${authorEmail}>`);\n\n    return [];\n  } catch (error) {\n    return [{\n      ...pr,\n      reason: `Merge into ${git.config.branches.master} failed (${error.message})`,\n    }];\n  }\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567901
  },
  "{\"sourceRoot\":\"/Users/mael.nison/chenille/sources/github\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mael.nison/chenille\",\"filename\":\"/Users/mael.nison/chenille/sources/github/getEventFile.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mael.nison/chenille\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{}}],\"presets\":[]}:7.8.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/mael.nison/chenille/sources/github",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/mael.nison/chenille",
      "filename": "/Users/mael.nison/chenille/sources/github/getEventFile.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/mael.nison/chenille",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {}
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/mael.nison/chenille/sources/github/getEventFile.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/mael.nison/chenille/sources/github/getEventFile.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/mael.nison/chenille/sources/github",
        "sourceFileName": "getEventFile.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {\n  UsageError\n} = require(`clipanion`);\n\nconst {\n  readFileSync\n} = require(`fs`);\n\nexports.getEventFile = () => {\n  if (!process.env.GITHUB_EVENT_PATH) throw new UsageError(`Missing GitHub event file in the environment`);\n  const content = readFileSync(process.env.GITHUB_EVENT_PATH, `utf8`);\n  const data = JSON.parse(content);\n  return data;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEV2ZW50RmlsZS5qcyJdLCJuYW1lcyI6WyJVc2FnZUVycm9yIiwicmVxdWlyZSIsInJlYWRGaWxlU3luYyIsImV4cG9ydHMiLCJnZXRFdmVudEZpbGUiLCJwcm9jZXNzIiwiZW52IiwiR0lUSFVCX0VWRU5UX1BBVEgiLCJjb250ZW50IiwiZGF0YSIsIkpTT04iLCJwYXJzZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBTUEsTUFBTTtBQUFDQSxFQUFBQTtBQUFELElBQWVDLE9BQU8sQ0FBRSxXQUFGLENBQTVCOztBQUNBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFpQkQsT0FBTyxDQUFFLElBQUYsQ0FBOUI7O0FBRUFFLE9BQU8sQ0FBQ0MsWUFBUixHQUF1QixNQUFNO0FBQzNCLE1BQUksQ0FBQ0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGlCQUFqQixFQUNFLE1BQU0sSUFBSVAsVUFBSixDQUFnQiw4Q0FBaEIsQ0FBTjtBQUVGLFFBQU1RLE9BQU8sR0FBR04sWUFBWSxDQUFDRyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsaUJBQWIsRUFBaUMsTUFBakMsQ0FBNUI7QUFDQSxRQUFNRSxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxPQUFYLENBQWI7QUFFQSxTQUFPQyxJQUFQO0FBQ0QsQ0FSRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFlbC5uaXNvbi9jaGVuaWxsZS9zb3VyY2VzL2dpdGh1YiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5sZXNzIGV4cGxpY2l0bHkgc3RhdGVkIG90aGVyd2lzZSBhbGwgZmlsZXMgaW4gdGhpcyByZXBvc2l0b3J5IGFyZSBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKlxuICogVGhpcyBwcm9kdWN0IGluY2x1ZGVzIHNvZnR3YXJlIGRldmVsb3BlZCBhdCBEYXRhZG9nIChodHRwczovL3d3dy5kYXRhZG9naHEuY29tLykuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtUHJlc2VudCBEYXRhZG9nLCBJbmMuXG4gKi9cbmNvbnN0IHtVc2FnZUVycm9yfSA9IHJlcXVpcmUoYGNsaXBhbmlvbmApO1xuY29uc3Qge3JlYWRGaWxlU3luY30gPSByZXF1aXJlKGBmc2ApO1xuXG5leHBvcnRzLmdldEV2ZW50RmlsZSA9ICgpID0+IHtcbiAgaWYgKCFwcm9jZXNzLmVudi5HSVRIVUJfRVZFTlRfUEFUSClcbiAgICB0aHJvdyBuZXcgVXNhZ2VFcnJvcihgTWlzc2luZyBHaXRIdWIgZXZlbnQgZmlsZSBpbiB0aGUgZW52aXJvbm1lbnRgKTtcblxuICBjb25zdCBjb250ZW50ID0gcmVhZEZpbGVTeW5jKHByb2Nlc3MuZW52LkdJVEhVQl9FVkVOVF9QQVRILCBgdXRmOGApO1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "getEventFile.js"
      ],
      "names": [
        "UsageError",
        "require",
        "readFileSync",
        "exports",
        "getEventFile",
        "process",
        "env",
        "GITHUB_EVENT_PATH",
        "content",
        "data",
        "JSON",
        "parse"
      ],
      "mappings": ";;AAAA;;;;;;AAMA,MAAM;AAACA,EAAAA;AAAD,IAAeC,OAAO,CAAE,WAAF,CAA5B;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAiBD,OAAO,CAAE,IAAF,CAA9B;;AAEAE,OAAO,CAACC,YAAR,GAAuB,MAAM;AAC3B,MAAI,CAACC,OAAO,CAACC,GAAR,CAAYC,iBAAjB,EACE,MAAM,IAAIP,UAAJ,CAAgB,8CAAhB,CAAN;AAEF,QAAMQ,OAAO,GAAGN,YAAY,CAACG,OAAO,CAACC,GAAR,CAAYC,iBAAb,EAAiC,MAAjC,CAA5B;AACA,QAAME,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAb;AAEA,SAAOC,IAAP;AACD,CARD",
      "sourceRoot": "/Users/mael.nison/chenille/sources/github",
      "sourcesContent": [
        "/**\n * Unless explicitly stated otherwise all files in this repository are licensed under the MIT License.\n *\n * This product includes software developed at Datadog (https://www.datadoghq.com/).\n * Copyright (c) 2020-Present Datadog, Inc.\n */\nconst {UsageError} = require(`clipanion`);\nconst {readFileSync} = require(`fs`);\n\nexports.getEventFile = () => {\n  if (!process.env.GITHUB_EVENT_PATH)\n    throw new UsageError(`Missing GitHub event file in the environment`);\n\n  const content = readFileSync(process.env.GITHUB_EVENT_PATH, `utf8`);\n  const data = JSON.parse(content);\n\n  return data;\n};\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1578918567903
  }
}